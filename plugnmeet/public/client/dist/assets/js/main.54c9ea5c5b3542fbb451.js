/*! For license information please see main.54c9ea5c5b3542fbb451.js.LICENSE.txt */
(self.webpackChunkplugnmeet_client=self.webpackChunkplugnmeet_client||[]).push([[179],{77410:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Abs:()=>n.SYM,Acos:()=>n.VGw,Acosh:()=>n.SpW,AdadeltaOptimizer:()=>n.zJI,AdagradOptimizer:()=>n.HeW,AdamOptimizer:()=>n.a4z,AdamaxOptimizer:()=>n.DBS,Add:()=>n.mm_,AddN:()=>n.Xze,All:()=>n.oT6,Any:()=>n.IKK,ArgMax:()=>n.sJF,ArgMin:()=>n.aJk,Asin:()=>n.M2y,Asinh:()=>n.qw7,Atan:()=>n.jMg,Atan2:()=>n.QCc,Atanh:()=>n.Oyi,AvgPool:()=>n.JhU,AvgPool3D:()=>n._k9,AvgPool3DGrad:()=>n.IMb,AvgPoolGrad:()=>n.ROF,BatchMatMul:()=>n.XLW,BatchToSpaceND:()=>n.zws,Bincount:()=>n.zvY,BroadcastArgs:()=>n.eEB,BroadcastTo:()=>n.Ly9,Cast:()=>n.RFZ,Ceil:()=>n.gJX,ClipByValue:()=>n.xnO,Complex:()=>n.Zz9,ComplexAbs:()=>n.yj2,Concat:()=>n.Eh3,Conv2D:()=>n.mhS,Conv2DBackpropFilter:()=>n.wUP,Conv2DBackpropInput:()=>n.wm,Conv3D:()=>n.x12,Conv3DBackpropFilterV2:()=>n.o2y,Conv3DBackpropInputV2:()=>n.ik2,Cos:()=>n.mc4,Cosh:()=>n.TR1,CropAndResize:()=>n.VcC,Cumprod:()=>n.Byc,Cumsum:()=>n.iHb,DataStorage:()=>n.JLz,DenseBincount:()=>n.QRR,DepthToSpace:()=>n.T0n,DepthwiseConv2dNative:()=>n.cie,DepthwiseConv2dNativeBackpropFilter:()=>n.sL$,DepthwiseConv2dNativeBackpropInput:()=>n.y7R,Diag:()=>n.$w,Dilation2D:()=>n.p4S,Dilation2DBackpropFilter:()=>n.Vn9,Dilation2DBackpropInput:()=>n.ekb,ENV:()=>n.ViN,Einsum:()=>n.$g6,Elu:()=>n.SX0,EluGrad:()=>n.HEU,Environment:()=>n.qAh,Equal:()=>n.hdR,Erf:()=>n.Omj,Exp:()=>n.NEP,ExpandDims:()=>n.YFo,Expm1:()=>n.Y0y,FFT:()=>n.vwp,Fill:()=>n.deh,FlipLeftRight:()=>n.Uyb,Floor:()=>n.OR,FloorDiv:()=>n.jeX,FromPixels:()=>n.eBW,FusedBatchNorm:()=>n.sHE,FusedConv2D:()=>n._V0,FusedDepthwiseConv2D:()=>n.luS,GatherNd:()=>n.q1x,GatherV2:()=>n.qi_,Greater:()=>n.iZT,GreaterEqual:()=>n.Acj,IFFT:()=>n.Qg5,Identity:()=>n.iJz,Imag:()=>n.J_u,IsFinite:()=>n.avt,IsInf:()=>n.iWB,IsNan:()=>n.r7n,KernelBackend:()=>n.Zuw,LRN:()=>n.eZ0,LRNGrad:()=>n.Hhh,LeakyRelu:()=>n.J$2,Less:()=>n.vtC,LessEqual:()=>n.CAk,LinSpace:()=>n.e7N,Log:()=>n.ZbH,Log1p:()=>n.kU,LogSoftmax:()=>n.qCd,LogicalAnd:()=>n.PYm,LogicalNot:()=>n.VfG,LogicalOr:()=>n.MZg,LowerBound:()=>n.qIC,Max:()=>n.YoZ,MaxPool:()=>n.mTV,MaxPool3D:()=>n.OAf,MaxPool3DGrad:()=>n.OU7,MaxPoolGrad:()=>n.OV7,MaxPoolWithArgmax:()=>n.vFR,Maximum:()=>n.BMI,Mean:()=>n.q2K,Min:()=>n.c17,Minimum:()=>n.q8u,MirrorPad:()=>n.jQs,Mod:()=>n.Vbg,MomentumOptimizer:()=>n.rIn,Multinomial:()=>n.NZg,Multiply:()=>n.wYn,Neg:()=>n.kuV,NonMaxSuppressionV3:()=>n.uv1,NonMaxSuppressionV4:()=>n.cye,NonMaxSuppressionV5:()=>n.W0H,NotEqual:()=>n.yQU,OP_SCOPE_SUFFIX:()=>n.zvA,OneHot:()=>n.we_,OnesLike:()=>n.qWM,Optimizer:()=>n.gaJ,OptimizerConstructors:()=>n.eEe,Pack:()=>n.QiL,PadV2:()=>n.lyA,Pool:()=>n.Kgp,Pow:()=>n.pe_,Prelu:()=>n.o0g,Prod:()=>n.DlI,RMSPropOptimizer:()=>n.gVI,Range:()=>n.e6w,Rank:()=>n.yw1,Real:()=>n.xJR,RealDiv:()=>n.oHH,Reciprocal:()=>n.$HU,Reduction:()=>n.IH3,Relu:()=>n.qkr,Relu6:()=>n.SbG,Reshape:()=>n.HZH,ResizeBilinear:()=>n._Yw,ResizeBilinearGrad:()=>n.zbQ,ResizeNearestNeighbor:()=>n.dpD,ResizeNearestNeighborGrad:()=>n.Hmb,Reverse:()=>n.mKl,RotateWithOffset:()=>n.b9H,Round:()=>n.e07,Rsqrt:()=>n.bV0,SGDOptimizer:()=>n.DYp,ScatterNd:()=>n.xQA,SearchSorted:()=>n.nr8,Select:()=>n.PhF,Selu:()=>n.oFR,Sigmoid:()=>n.a5O,Sign:()=>n.i5y,Sin:()=>n.RQH,Sinh:()=>n.wYB,Slice:()=>n.p2w,Softmax:()=>n.Gcp,Softplus:()=>n.MRv,SpaceToBatchND:()=>n.TQc,SparseFillEmptyRows:()=>n.O3z,SparseReshape:()=>n.nhH,SparseSegmentMean:()=>n.w3H,SparseSegmentSum:()=>n.ZjV,SparseToDense:()=>n.D2d,SplitV:()=>n.L8s,Sqrt:()=>n.FKq,Square:()=>n.bK0,SquaredDifference:()=>n._tC,Step:()=>n.h8e,StridedSlice:()=>n.jQk,StringNGrams:()=>n._JP,StringSplit:()=>n.s1s,StringToHashBucketFast:()=>n.XkS,Sub:()=>n.Tr8,Sum:()=>n.GBy,Tan:()=>n.sEM,Tanh:()=>n.MIZ,Tensor:()=>n.esB,TensorBuffer:()=>n.YDk,Tile:()=>n.n9L,TopK:()=>n.cWu,Transform:()=>n.wx7,Transpose:()=>n.G3Y,Unique:()=>n.kpP,Unpack:()=>n.ToN,UnsortedSegmentSum:()=>n.Qvg,UpperBound:()=>n.XDQ,Variable:()=>n._wD,ZerosLike:()=>n.RuY,_FusedMatMul:()=>n.usg,abs:()=>n.WnP,acos:()=>n.Khb,acosh:()=>n.__u,add:()=>n.IHx,addN:()=>n.QBD,all:()=>n.$6P,any:()=>n.YjB,argMax:()=>n.NqF,argMin:()=>n.vHJ,asin:()=>n.ZRM,asinh:()=>n.VfV,atan:()=>n.z4N,atan2:()=>n.fvJ,atanh:()=>n.C80,avgPool:()=>n.wS1,avgPool3d:()=>n.uR5,backend:()=>n.y3$,backend_util:()=>n.Wap,basicLSTMCell:()=>n.zEQ,batchNorm:()=>n.tgs,batchNorm2d:()=>n.Dxk,batchNorm3d:()=>n.JY5,batchNorm4d:()=>n.p3b,batchToSpaceND:()=>n.E4h,bincount:()=>n.yE8,booleanMaskAsync:()=>n.anm,broadcastArgs:()=>n.XsQ,broadcastTo:()=>n.UFq,broadcast_util:()=>n.Jyw,browser:()=>n.Xhn,buffer:()=>n.f3b,cast:()=>n.pju,ceil:()=>n.mDi,clipByValue:()=>n.iUl,clone:()=>n.d9v,complex:()=>n.PYB,concat:()=>n.zoF,concat1d:()=>n.gME,concat2d:()=>n.Izb,concat3d:()=>n.MNy,concat4d:()=>n.ZaL,conv1d:()=>n.PAt,conv2d:()=>n.Tek,conv2dTranspose:()=>n.bc,conv3d:()=>n.pdZ,conv3dTranspose:()=>n.$QV,copyRegisteredKernels:()=>n.T3b,cos:()=>n.mCk,cosh:()=>n.f9Y,cosineWindow:()=>n.mew,cumprod:()=>n.$Gn,cumsum:()=>n.zbp,customGrad:()=>n.cbc,denseBincount:()=>n.ppE,deprecationWarn:()=>n.MXe,depthToSpace:()=>n.nTT,depthwiseConv2d:()=>n.B10,device_util:()=>n.C2$,diag:()=>n.Ka3,dilation2d:()=>n.WmZ,disableDeprecationWarnings:()=>n.cFr,dispose:()=>n.B90,disposeVariables:()=>n.N8o,div:()=>n.hiC,divNoNan:()=>n.NTj,dot:()=>n.AKD,dropout:()=>n.rvX,einsum:()=>n.WYO,elu:()=>n.pyx,enableDebugMode:()=>n.Ra$,enableProdMode:()=>n.G48,enclosingPowerOfTwo:()=>n.GRh,engine:()=>n.SRH,env:()=>n.OBj,equal:()=>n.DgJ,erf:()=>n.qNN,euclideanNorm:()=>n.d2q,exp:()=>n.Qqt,expandDims:()=>n.dt4,expm1:()=>n.t$B,eye:()=>n.iyy,fft:()=>n.kp_,fill:()=>n.hlL,findBackend:()=>n.x3e,findBackendFactory:()=>n.zel,floor:()=>n.GWj,floorDiv:()=>n.qPi,fused:()=>n.imm,gather:()=>n.Iqj,gatherND:()=>n.dbB,gather_util:()=>n.DaI,getBackend:()=>n.N_N,getGradient:()=>n.ukX,getKernel:()=>n.pIF,getKernelsForBackend:()=>n.trD,grad:()=>n.UQy,grads:()=>n.tiA,greater:()=>n.pjt,greaterEqual:()=>n.brS,ifft:()=>n.Sxn,imag:()=>n.asL,image:()=>n.BHj,inTopKAsync:()=>n.V3u,io:()=>n.io,irfft:()=>n.wx0,isFinite:()=>n.xVT,isInf:()=>n.UWc,isNaN:()=>n.i2d,keep:()=>n.CnY,kernel_impls:()=>n.GDt,leakyRelu:()=>n.hi7,less:()=>n.d9m,lessEqual:()=>n.zN1,linalg:()=>n.$r2,linspace:()=>n.SX3,localResponseNormalization:()=>n.G9k,log:()=>n.cM7,log1p:()=>n.Krr,logSigmoid:()=>n.e_t,logSoftmax:()=>n.CmS,logSumExp:()=>n.l_t,logicalAnd:()=>n.HvI,logicalNot:()=>n.hJK,logicalOr:()=>n.K5V,logicalXor:()=>n.egP,losses:()=>n.MB5,lowerBound:()=>n.eab,matMul:()=>n.OI3,math:()=>n.mAU,max:()=>n.Fp7,maxPool:()=>n._sB,maxPool3d:()=>n.YQQ,maxPoolWithArgmax:()=>n.Ip$,maximum:()=>n.gWQ,mean:()=>n.J69,memory:()=>n.sq6,meshgrid:()=>n.ry_,min:()=>n.VV$,minimum:()=>n.LTh,mirrorPad:()=>n.VdP,mod:()=>n.wQq,moments:()=>n.Gi7,movingAverage:()=>n.p_,mul:()=>n.dC7,multiRNNCell:()=>n.rq4,multinomial:()=>n.SJ_,neg:()=>n.W76,nextFrame:()=>n.glt,norm:()=>n.KOy,notEqual:()=>n.Quu,oneHot:()=>n.lfX,ones:()=>n.iUs,onesLike:()=>n.JpU,op:()=>n.op,outerProduct:()=>n.N2O,pad:()=>n.vku,pad1d:()=>n.pNR,pad2d:()=>n.koy,pad3d:()=>n.t1L,pad4d:()=>n.lGY,pool:()=>n.d_R,pow:()=>n.sQ3,prelu:()=>n.AL3,print:()=>n.S0v,prod:()=>n.WVs,profile:()=>n.N5s,rand:()=>n.TN_,randomGamma:()=>n.wzB,randomNormal:()=>n.nGf,randomUniform:()=>n.LGj,range:()=>n.w6H,ready:()=>n.Cd_,real:()=>n.kwC,reciprocal:()=>n.M25,registerBackend:()=>n.jqO,registerGradient:()=>n.LiG,registerKernel:()=>n.wCN,relu:()=>n.UYe,relu6:()=>n.btT,removeBackend:()=>n.cjG,reshape:()=>n.XLQ,reverse:()=>n.GYS,reverse1d:()=>n.SDf,reverse2d:()=>n.diP,reverse3d:()=>n.sx7,reverse4d:()=>n.mG2,rfft:()=>n.QEs,round:()=>n.NMM,rsqrt:()=>n.bp0,scalar:()=>n.iD$,scatterND:()=>n.snQ,scatter_util:()=>n.yV1,searchSorted:()=>n.zcT,selu:()=>n.U8D,separableConv2d:()=>n.U_I,serialization:()=>n.m7h,setBackend:()=>n.CQI,setPlatform:()=>n.VYu,setdiff1dAsync:()=>n.ODp,sigmoid:()=>n.XD2,sign:()=>n.Xxe,signal:()=>n.tdS,sin:()=>n.O$l,sinh:()=>n.R_K,slice:()=>n.tPi,slice1d:()=>n.jZU,slice2d:()=>n.SmN,slice3d:()=>n.CnO,slice4d:()=>n.p0P,slice_util:()=>n.kuN,softmax:()=>n.XAC,softplus:()=>n.Wvh,spaceToBatchND:()=>n.fBT,sparse:()=>n.rVs,sparseToDense:()=>n.ers,spectral:()=>n.uN7,split:()=>n.Vl2,sqrt:()=>n._b3,square:()=>n.h62,squaredDifference:()=>n.$i,squeeze:()=>n.L9e,stack:()=>n.knu,step:()=>n.Nbs,stridedSlice:()=>n.NXj,string:()=>n.Z_8,sub:()=>n.luU,sum:()=>n.Smz,sumOutType:()=>n.z4k,tan:()=>n.ORZ,tanh:()=>n.AEp,tensor:()=>n.XeE,tensor1d:()=>n.RRF,tensor2d:()=>n.odF,tensor3d:()=>n.wOQ,tensor4d:()=>n.yXz,tensor5d:()=>n.Bfx,tensor6d:()=>n.xZs,tensor_util:()=>n.piX,test_util:()=>n.p3L,tidy:()=>n.lub,tile:()=>n.Gg6,time:()=>n.XVJ,topk:()=>n.hg7,train:()=>n.p_j,transpose:()=>n.p4s,truncatedNormal:()=>n.Xu6,unique:()=>n.Two,unregisterGradient:()=>n.bt3,unregisterKernel:()=>n.nEe,unsortedSegmentSum:()=>n.pUJ,unstack:()=>n.HHK,upcastType:()=>n.x8V,upperBound:()=>n.GaM,util:()=>n.D5U,valueAndGrad:()=>n.h76,valueAndGrads:()=>n.fNQ,variable:()=>n.VD$,variableGrads:()=>n.pnJ,version_core:()=>n.jTM,where:()=>n.arb,whereAsync:()=>n.itS,zeros:()=>n.lls,zerosLike:()=>n.P84});r(85186);var n=r(86931)},31877:(e,t,r)=>{"use strict";var n,o=r(85893),a=r(67294),i=r(20745),s=r(70743),l=r(96042),c=r(27384),u=r(12405),d=(r(93268),r(19841)),f=r(97031),p=r(26071),m=r(65538),h=null!==(n=window.STATIC_ASSETS_PATH)&&void 0!==n?n:"/assets";d.ZP.use(p.Z).use(f.Db).use(m.Z).init({debug:!1,fallbackLng:"en",interpolation:{escapeValue:!1},backend:{loadPath:h+"/locales/{{lng}}/{{ns}}.json"}});const v=d.ZP;var x,y=r(24268),b=r(45673),g=(0,y.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.isSpeaking&&t.isSpeaking?e.audioLevel-t.audioLevel:e.isSpeaking!==t.isSpeaking?e.isSpeaking?-1:1:e.lastSpokeAt!==t.lastSpokeAt?t.lastSpokeAt-e.lastSpokeAt:0}}),w=g.getSelectors((function(e){return e.activeSpeakers})),j=(0,y.oM)({name:"activeSpeakers",initialState:g.getInitialState(),reducers:{addSpeaker:g.addOne,addManySpeakers:g.addMany,setAllSpeakers:g.setAll,removeSpeakers:g.removeAll}}),S=(x=j.actions).addSpeaker,k=(x.addManySpeakers,x.removeSpeakers),_=x.setAllSpeakers;const N=j.reducer;var C,E=(0,y.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.name.localeCompare(t.name)}}),T=E.getSelectors((function(e){return e.participants})),P=(0,y.oM)({name:"participants",initialState:E.getInitialState(),reducers:{addParticipant:E.addOne,removeParticipant:E.removeOne,updateParticipant:E.updateOne}}),O=(C=P.actions).addParticipant,A=C.removeParticipant,R=C.updateParticipant;const I=P.reducer;var F,M={token:"",screenSharing:{isActive:!1,sharedBy:""},isActiveRtmpBroadcasting:!1,isActiveRecording:!1,isWebcamPaginating:!1,isStartup:!0,isChatServiceReady:!1,totalAudioSubscribers:0,totalVideoSubscribers:0,userDeviceType:"desktop",currentRoom:{sid:"",room_id:"",metadata:{room_title:"plugNmeet",is_recording:!1,is_active_rtmp:!1,is_breakout_room:!1,started_at:Date.now(),room_features:{allow_webcams:!0,mute_on_start:!1,allow_screen_share:!0,allow_recording:!0,allow_rtmp:!0,allow_view_other_webcams:!0,allow_view_other_users_list:!0,admin_only_webcams:!1,allow_polls:!0,room_duration:0,chat_features:{allow_chat:!0,allow_file_upload:!0},shared_note_pad_features:{allowed_shared_note_pad:!1,is_active:!1,visible:!1},whiteboard_features:{allowed_whiteboard:!0,visible:!1,whiteboard_file_id:"default",file_name:"default",file_path:"default",total_pages:10},external_media_player_features:{allowed_external_media_player:!0,is_active:!1},waiting_room_features:{is_active:!1,waiting_room_msg:""},breakout_room_features:{is_allow:!0,is_active:!1,allowed_number_rooms:6},display_external_link_features:{is_allow:!0,is_active:!1}}}}},D=(0,y.oM)({name:"session",initialState:M,reducers:{addToken:function(e,t){e.token=t.payload},toggleStartup:function(e,t){e.isStartup=t.payload},addCurrentUser:function(e,t){e.currentUser=t.payload},addCurrentRoom:function(e,t){e.currentRoom.room_id=t.payload.room_id,e.currentRoom.sid=t.payload.sid,t.payload.metadata&&(e.currentRoom.metadata=t.payload.metadata)},updateScreenSharing:function(e,t){e.screenSharing=t.payload},setWebcamPaginating:function(e,t){e.isWebcamPaginating=t.payload},updateCurrentUserMetadata:function(e,t){e.currentUser&&(e.currentUser.metadata=t.payload)},updateCurrentRoomMetadata:function(e,t){e.currentRoom&&(e.currentRoom.metadata=t.payload,e.isActiveRtmpBroadcasting=t.payload.is_active_rtmp,e.isActiveRecording=t.payload.is_recording)},updateIsChatServiceReady:function(e,t){e.isChatServiceReady=t.payload},updateTotalVideoSubscribers:function(e,t){e.totalVideoSubscribers=t.payload},updateTotalAudioSubscribers:function(e,t){e.totalAudioSubscribers=t.payload},updateMuteOnStart:function(e,t){e.currentRoom.metadata&&(e.currentRoom.metadata.room_features.mute_on_start=t.payload)},updateUserDeviceType:function(e,t){e.userDeviceType=t.payload}}}),U=(F=D.actions).addToken,L=F.toggleStartup,B=F.addCurrentUser,W=F.addCurrentRoom,V=F.updateScreenSharing,G=F.setWebcamPaginating,H=F.updateCurrentUserMetadata,z=F.updateCurrentRoomMetadata,Q=F.updateIsChatServiceReady,q=F.updateTotalVideoSubscribers,$=F.updateTotalAudioSubscribers,J=F.updateMuteOnStart,X=F.updateUserDeviceType;const Y=D.reducer;var K,Z,ee={type:"none"},te=null!==(K=window.STATIC_ASSETS_PATH)&&void 0!==K?K:"./assets",re=["architecture-5082700_1280","porch-691330_1280","saxon-switzerland-539418_1280","shibuyasky-4768679_1280"].map((function(e){return"".concat(te,"/backgrounds/").concat(e,".jpg")})),ne={isActiveMicrophone:!1,isActiveWebcam:!1,isActiveChatPanel:!0,isActiveParticipantsPanel:!0,isActiveRaisehand:!1,isActiveRecording:!1,isActiveScreenshare:!1,isActiveSharedNotePad:!1,isActiveWhiteboard:!1,isMicMuted:!1,screenWidth:1024,screenHeight:500,showMicrophoneModal:!1,showVideoShareModal:!1,showLockSettingsModal:!1,showRtmpModal:!1,showExternalMediaPlayerModal:!1,showManageWaitingRoomModal:!1,showManageBreakoutRoomModal:!1,showDisplayExternalLinkModal:!1,totalUnreadChatMsgs:0,virtualBackground:ee},oe=(0,y.oM)({name:"bottomIconsActivity",initialState:ne,reducers:{updateIsActiveMicrophone:function(e,t){e.isActiveMicrophone=t.payload},updateIsMicMuted:function(e,t){e.isMicMuted=t.payload},updateIsActiveWebcam:function(e,t){e.isActiveWebcam=t.payload},updateIsActiveChatPanel:function(e,t){e.screenWidth<1024&&e.isActiveParticipantsPanel&&t.payload&&(e.isActiveParticipantsPanel=!1),e.isActiveChatPanel=t.payload,e.isActiveChatPanel&&(e.totalUnreadChatMsgs=0)},updateIsActiveParticipantsPanel:function(e,t){e.screenWidth<1024&&e.isActiveChatPanel&&t.payload&&(e.isActiveChatPanel=!1),e.isActiveParticipantsPanel=t.payload},updateIsActiveRaisehand:function(e,t){e.isActiveRaisehand=t.payload},updateIsActiveRecording:function(e,t){e.isActiveRecording=t.payload},updateIsActiveScreenshare:function(e,t){e.isActiveScreenshare=t.payload,e.isActiveScreenshare&&(e.isActiveSharedNotePad=!1,e.isActiveWhiteboard=!1,e.isActiveParticipantsPanel=!1)},updateIsActiveSharedNotePad:function(e,t){e.isActiveSharedNotePad=t.payload,e.isActiveSharedNotePad&&(e.isActiveParticipantsPanel=!1)},updateIsActiveWhiteboard:function(e,t){e.isActiveWhiteboard=t.payload,e.isActiveWhiteboard&&(e.isActiveParticipantsPanel=!1)},updateScreenWidth:function(e,t){e.screenWidth=t.payload},updateScreenHeight:function(e,t){e.screenHeight=t.payload},updateShowMicrophoneModal:function(e,t){e.showMicrophoneModal=t.payload},updateShowVideoShareModal:function(e,t){e.showVideoShareModal=t.payload},updateShowLockSettingsModal:function(e,t){e.showLockSettingsModal=t.payload},updateShowRtmpModal:function(e,t){e.showRtmpModal=t.payload},updateShowExternalMediaPlayerModal:function(e,t){e.showExternalMediaPlayerModal=t.payload},updateShowManageWaitingRoomModal:function(e,t){e.showManageWaitingRoomModal=t.payload},updateShowManageBreakoutRoomModal:function(e,t){e.showManageBreakoutRoomModal=t.payload},updateDisplayExternalLinkRoomModal:function(e,t){e.showDisplayExternalLinkModal=t.payload},updateTotalUnreadChatMsgs:function(e){e.isActiveChatPanel||(e.totalUnreadChatMsgs+=1)},updateVirtualBackground:function(e,t){e.virtualBackground=t.payload}}}),ae=(Z=oe.actions).updateIsActiveMicrophone,ie=Z.updateIsMicMuted,se=Z.updateIsActiveWebcam,le=Z.updateIsActiveChatPanel,ce=Z.updateIsActiveParticipantsPanel,ue=Z.updateIsActiveRaisehand,de=(Z.updateIsActiveRecording,Z.updateIsActiveScreenshare),fe=Z.updateIsActiveSharedNotePad,pe=Z.updateIsActiveWhiteboard,me=Z.updateShowMicrophoneModal,he=Z.updateShowVideoShareModal,ve=Z.updateShowLockSettingsModal,xe=Z.updateShowManageWaitingRoomModal,ye=Z.updateShowRtmpModal,be=Z.updateShowExternalMediaPlayerModal,ge=Z.updateShowManageBreakoutRoomModal,we=Z.updateDisplayExternalLinkRoomModal,je=Z.updateScreenWidth,Se=Z.updateScreenHeight,ke=Z.updateTotalUnreadChatMsgs,_e=Z.updateVirtualBackground;const Ne=oe.reducer;var Ce,Ee=(0,y.HF)({selectId:function(e){return e.message_id},sortComparer:function(e,t){var r=new Date(e.time),n=new Date(t.time);return r.getTime()>n.getTime()?1:r.getTime()<n.getTime()?-1:0}}),Te=Ee.getSelectors((function(e){return e.chatMessages})),Pe=(0,y.oM)({name:"chat-messages",initialState:Ee.getInitialState(),reducers:{addChatMessage:Ee.addOne,removeChatMessage:Ee.removeOne,updateChatMessage:Ee.updateOne}}),Oe=(Ce=Pe.actions).addChatMessage;Ce.removeChatMessage,Ce.updateChatMessage;const Ae=Pe.reducer;var Re,Ie=r(95591),Fe=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Me=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},De={isShowRoomSettingsModal:!1,isShowKeyboardShortcuts:!1,audioDevices:[],videoDevices:[],selectedAudioDevice:"",selectedVideoDevice:"",playAudioNotification:!1,activateWebcamsView:!0,activeScreenSharingView:!0,allowPlayAudioNotification:!0,roomAudioVolume:1,roomVideoQuality:Ie.SF.HIGH,selectedTabLeftPanel:0,selectedChatOption:"public",initiatePrivateChat:{name:"",userId:""},unreadMsgFrom:[]},Ue=(0,y.oM)({name:"room-settings",initialState:De,reducers:{updateShowRoomSettingsModal:function(e,t){e.isShowRoomSettingsModal=t.payload},updateShowKeyboardShortcutsModal:function(e,t){e.isShowKeyboardShortcuts=t.payload},addAudioDevices:function(e,t){e.audioDevices=t.payload},addVideoDevices:function(e,t){e.videoDevices=t.payload},updateSelectedAudioDevice:function(e,t){e.selectedAudioDevice=t.payload},updateSelectedVideoDevice:function(e,t){e.selectedVideoDevice=t.payload},updatePlayAudioNotification:function(e,t){e.playAudioNotification=t.payload},updateActivateWebcamsView:function(e,t){e.activateWebcamsView=t.payload},updateActiveScreenSharingView:function(e,t){e.activeScreenSharingView=t.payload},updateAllowPlayAudioNotification:function(e,t){e.allowPlayAudioNotification=t.payload},updateRoomAudioVolume:function(e,t){e.roomAudioVolume=t.payload},updateRoomVideoQuality:function(e,t){e.roomVideoQuality=t.payload},updateSelectedTabLeftPanel:function(e,t){e.selectedTabLeftPanel=t.payload},updateSelectedChatOption:function(e,t){e.selectedChatOption=t.payload},updateInitiatePrivateChat:function(e,t){e.initiatePrivateChat=t.payload},updateUnreadMsgFrom:function(e,t){var r=Me([],Fe(e.unreadMsgFrom),!1);"ADD"===t.payload.task?r.filter((function(e){return e===t.payload.id})).length||(r.push(t.payload.id),e.unreadMsgFrom=r):"DEL"===t.payload.task&&(e.unreadMsgFrom=r.filter((function(e){return e!==t.payload.id})))}}}),Le=(Re=Ue.actions).addAudioDevices,Be=Re.addVideoDevices,We=Re.updateSelectedAudioDevice,Ve=Re.updateSelectedVideoDevice,Ge=Re.updatePlayAudioNotification,He=Re.updateShowRoomSettingsModal,ze=Re.updateActivateWebcamsView,Qe=Re.updateActiveScreenSharingView,qe=Re.updateAllowPlayAudioNotification,$e=Re.updateShowKeyboardShortcutsModal,Je=Re.updateRoomAudioVolume,Xe=Re.updateRoomVideoQuality,Ye=Re.updateSelectedTabLeftPanel,Ke=Re.updateSelectedChatOption,Ze=Re.updateInitiatePrivateChat,et=Re.updateUnreadMsgFrom;const tt=Ue.reducer;var rt,nt=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},ot=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},at=(0,y.oM)({name:"whiteboard",initialState:{totalPages:10,currentPage:1,excalidrawElements:"",mousePointerLocation:"",requestedWhiteboardData:{requested:!1,sendTo:""},currentWhiteboardOfficeFileId:"default",whiteboardOfficeFilePagesAndOtherImages:"",whiteboardUploadedOfficeFiles:[{fileId:"default",fileName:"default",filePath:"default",totalPages:10,currentPage:1,pageFiles:""}]},reducers:{updateExcalidrawElements:function(e,t){e.excalidrawElements=t.payload},updateMousePointerLocation:function(e,t){e.mousePointerLocation=t.payload},addWhiteboardOtherImageFile:function(e,t){var r=[];e.whiteboardOfficeFilePagesAndOtherImages&&(r=JSON.parse(e.whiteboardOfficeFilePagesAndOtherImages)),r.push(t.payload),e.whiteboardOfficeFilePagesAndOtherImages=JSON.stringify(r)},addWhiteboardFileAsJSON:function(e,t){e.whiteboardOfficeFilePagesAndOtherImages=t.payload},updateRequestedWhiteboardData:function(e,t){e.requestedWhiteboardData=t.payload},setWhiteboardCurrentPage:function(e,t){e.currentPage=t.payload},updateCurrentWhiteboardOfficeFileId:function(e,t){var r=e.whiteboardUploadedOfficeFiles.filter((function(e){return e.fileId===t.payload}));r.length&&(e.currentPage=1,e.totalPages=r[0].totalPages,e.whiteboardOfficeFilePagesAndOtherImages=r[0].pageFiles,e.currentWhiteboardOfficeFileId=r[0].fileId)},addWhiteboardUploadedOfficeFiles:function(e,t){if(!e.whiteboardUploadedOfficeFiles.filter((function(e){return e.fileId===t.payload.fileId})).length){var r=ot([],nt(e.whiteboardUploadedOfficeFiles),!1);r.push(t.payload),e.whiteboardUploadedOfficeFiles=r}e.currentWhiteboardOfficeFileId=t.payload.fileId,e.whiteboardOfficeFilePagesAndOtherImages=t.payload.pageFiles,t.payload.currentPage?e.currentPage=t.payload.currentPage:e.currentPage=1,e.totalPages=t.payload.totalPages}}}),it=(rt=at.actions).updateExcalidrawElements,st=rt.updateMousePointerLocation,lt=rt.addWhiteboardOtherImageFile,ct=rt.updateRequestedWhiteboardData,ut=rt.setWhiteboardCurrentPage,dt=rt.addWhiteboardFileAsJSON,ft=rt.updateCurrentWhiteboardOfficeFileId,pt=rt.addWhiteboardUploadedOfficeFiles;const mt=at.reducer;var ht,vt=(0,y.oM)({name:"externalMediaPlayer",initialState:{action:"",seekTo:-1},reducers:{addExternalMediaPlayerAction:function(e,t){e.action=t.payload},externalMediaPlayerSeekTo:function(e,t){e.seekTo=t.payload},resetExternalMediaPlayer:function(e){e.action="",e.seekTo=-1}}}),xt=(ht=vt.actions).addExternalMediaPlayerAction,yt=ht.externalMediaPlayerSeekTo,bt=ht.resetExternalMediaPlayer;const gt=vt.reducer;var wt,jt=r(30848),St=(0,jt.LC)({reducerPath:"pollsApi",baseQuery:(0,b.ni)({baseUrl:window.PLUG_N_MEET_SERVER_URL+"/api/polls",prepareHeaders:function(e,t){var r=t.getState().session.token;return e.append("Authorization",r),e.append("Content-Type","application/json"),e}}),tagTypes:["List","PollsStats","Count","Selected","PollDetails","PollResult"],endpoints:function(e){return{getPollLists:e.query({query:function(){return"listPolls"},providesTags:["List"]}),getCountTotalResponses:e.query({query:function(e){return"countTotalResponses/".concat(e)},providesTags:function(e){return e.status?["Count",{type:"Count",id:e.poll_id}]:["Count"]}}),getUserSelectedOption:e.query({query:function(e){var t=e.pollId,r=e.userId;return"userSelectedOption/".concat(t,"/").concat(r)},providesTags:function(e){return(null===e||void 0===e?void 0:e.status)?["Selected",{type:"Selected",id:e.poll_id}]:["Selected"]}}),getPollResponsesDetails:e.query({query:function(e){return"pollResponsesDetails/".concat(e)},providesTags:function(e){return(null===e||void 0===e?void 0:e.status)?["PollDetails",{type:"PollDetails",id:e.poll_id}]:["PollDetails"]}}),getPollResponsesResult:e.query({query:function(e){return"pollResponsesResult/".concat(e)},providesTags:function(e){return(null===e||void 0===e?void 0:e.status)?["PollResult",{type:"PollResult",id:e.poll_id}]:["PollResult"]}}),getPollsStats:e.query({query:function(){return"pollsStats"},providesTags:["PollsStats"]}),createPoll:e.mutation({query:function(e){return{url:"create",method:"POST",body:e}},invalidatesTags:["List","PollsStats"]}),addResponse:e.mutation({query:function(e){return{url:"submitResponse",method:"POST",body:e}},invalidatesTags:function(e,t,r){var n=r.poll_id;return[{type:"Count",id:n},{type:"Selected",id:n},{type:"PollDetails",id:n}]}}),closePoll:e.mutation({query:function(e){return{url:"closePoll",method:"POST",body:e}},invalidatesTags:["List","PollsStats"]})}}}),kt=St.useGetPollListsQuery,_t=St.useGetCountTotalResponsesQuery,Nt=St.useGetUserSelectedOptionQuery,Ct=St.useGetPollResponsesDetailsQuery,Et=St.useCreatePollMutation,Tt=St.useAddResponseMutation,Pt=St.useClosePollMutation,Ot=St.useGetPollResponsesResultQuery,At=St.useGetPollsStatsQuery,Rt=(0,y.oM)({name:"breakoutRoom",initialState:{droppedUser:{id:"",roomId:0},receivedInvitationFor:""},reducers:{updateBreakoutRoomDroppedUser:function(e,t){e.droppedUser=t.payload},updateReceivedInvitationFor:function(e,t){e.receivedInvitationFor=t.payload}}}),It=(wt=Rt.actions).updateBreakoutRoomDroppedUser,Ft=wt.updateReceivedInvitationFor;const Mt=Rt.reducer;var Dt,Ut=(0,jt.LC)({reducerPath:"breakoutRoomApi",baseQuery:(0,b.ni)({baseUrl:window.PLUG_N_MEET_SERVER_URL+"/api/breakoutRoom",prepareHeaders:function(e,t){var r=t.getState().session.token;return e.append("Authorization",r),e.append("Content-Type","application/json"),e}}),refetchOnMountOrArgChange:!0,tagTypes:["List","My_Rooms"],endpoints:function(e){return{getBreakoutRooms:e.query({query:function(){return"listRooms"},providesTags:["List"]}),createBreakoutRooms:e.mutation({query:function(e){return{url:"create",method:"POST",body:e}},invalidatesTags:["List"]}),increaseDuration:e.mutation({query:function(e){return{url:"increaseDuration",method:"POST",body:e}},invalidatesTags:["List"]}),sendMsg:e.mutation({query:function(e){return{url:"sendMsg",method:"POST",body:e}}}),joinRoom:e.mutation({query:function(e){return{url:"join",method:"POST",body:e}}}),getMyBreakoutRooms:e.query({query:function(){return"myRooms"},providesTags:["My_Rooms"]}),endSingleRoom:e.mutation({query:function(e){return{url:"endRoom",method:"POST",body:{breakout_room_id:e}}},invalidatesTags:["List"]}),endAllRooms:e.mutation({query:function(){return{url:"endAllRooms",method:"POST"}},invalidatesTags:["List"]})}}}),Lt=Ut.useGetBreakoutRoomsQuery,Bt=Ut.useCreateBreakoutRoomsMutation,Wt=Ut.useIncreaseDurationMutation,Vt=Ut.useJoinRoomMutation,Gt=Ut.useEndSingleRoomMutation,Ht=Ut.useEndAllRoomsMutation,zt=Ut.useSendMsgMutation,Qt=Ut.useGetMyBreakoutRoomsQuery,qt=(0,y.xC)({reducer:(Dt={participants:I,activeSpeakers:N,session:Y,bottomIconsActivity:Ne,chatMessages:Ae,roomSettings:tt,whiteboard:mt,externalMediaPlayer:gt,breakoutRoom:Mt},Dt[St.reducerPath]=St.reducer,Dt[Ut.reducerPath]=Ut.reducer,Dt),middleware:function(e){return e().concat(St.middleware,Ut.middleware)},devTools:!1});(0,b.sj)(qt.dispatch);var $t=function(){return(0,s.I0)()},Jt=s.v9,Xt=r(22327),Yt=r(22222),Kt=function(){return Kt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kt.apply(this,arguments)};const Zt=function(e){var t,r=e.title,n=e.text,a=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,o.jsxs)("div",Kt({id:"errorPage",className:"error-page h-screen w-full flex items-center justify-center"},{children:[(0,o.jsx)("div",{className:"error-app-bg absolute w-full h-full left-0 top-0 object-cover pointer-events-none ",style:{backgroundImage:'url("'.concat(a,'/imgs/app-banner.jpg")')}}),(0,o.jsx)("div",Kt({className:"content relative z-20 text-center bg-white rounded-xl shadow-lg h-80 w-[450px] flex items-center justify-center"},{children:(0,o.jsxs)("div",Kt({className:"inner text-center"},{children:[(0,o.jsx)("h2",Kt({className:"text-3xl font-medium mb-4"},{children:r})),(0,o.jsx)("p",{children:n})]}))}))]}))};var er=function(){return er=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},er.apply(this,arguments)};const tr=function(e){var t=e.text;return(0,o.jsx)("div",er({className:"loader opacity-1 fixed top-0 left-0 w-full h-full bg-white/90 z-[999] flex flex-wrap items-center justify-center"},{children:(0,o.jsxs)("div",er({className:"inner"},{children:[(0,o.jsxs)("div",er({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]})),(0,o.jsx)("p",er({className:"block w-full text-center relative bottom-4 capitalize"},{children:t}))]}))}))};var rr=r(47031),nr=r(35771),or=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},ar=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function ir(e){return or(this,void 0,void 0,(function(){var t,r,n,o,a,i;return ar(this,(function(s){switch(s.label){case 0:return t={audio:!0},"videoinput"===e&&(t={video:!0}),[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:if((n=(n=s.sent()).filter((function(t){return t.kind===e}))).length>1&&"default"===n[0].deviceId){for(o=n[0],a=1;a<n.length;a+=1)if(n[a].groupId===o.groupId){i=n[0],n[0]=n[a],n[a]=i;break}return[2,n.filter((function(e){return e!==o}))]}return r.getTracks().forEach((function(e){e.stop()})),[2,n]}}))}))}var sr=function(e){return e.toString(16).padStart(2,"0")},lr=function(e){void 0===e&&(e=20);var t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,sr).join("")},cr=function(e){void 0===e&&(e=10);var t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Number(t.join(""))},ur=function(e){return new Promise((function(t){return setTimeout(t,e)}))},dr=function(){var e,t=null!==(e=window.DEFAULT_SCREEN_SHARE_RESOLUTION)&&void 0!==e?e:"h1080fps15",r=Ie.Ri.h1080fps15.resolution;switch(t){case"h360fps3":r=Ie.Ri.h360fps3.resolution;break;case"h720fps5":r=Ie.Ri.h720fps5.resolution;break;case"h720fps15":r=Ie.Ri.h720fps15.resolution;break;case"h1080fps15":r=Ie.Ri.h1080fps15.resolution;break;case"h1080fps30":r=Ie.Ri.h1080fps30.resolution}return r},fr=function(){return fr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fr.apply(this,arguments)};const pr=function(e){var t=e.deviceId,r=e.onSourcePlayback,n=e.onMediaStream,i=(0,a.useRef)(null);(0,a.useEffect)((function(){var e=i.current,r={video:{deviceId:t}};return navigator.mediaDevices.getUserMedia(r).then((function(t){e&&(n(t),e.srcObject=t)})),function(){e&&(e.pause(),e.removeAttribute("src"))}}),[t]);return(0,o.jsx)("div",fr({className:"preview-camera-webcam"},{children:(0,o.jsx)("video",{className:"my-5 w-full",ref:i,autoPlay:!0,height:"50",onLoadedData:function(e){var t,n,o=e.target;r({htmlElement:o,width:null!==(t=o.videoWidth)&&void 0!==t?t:330,height:null!==(n=o.videoHeight)&&void 0!==n?n:200})}})}))};var mr={"640x360":[640,360],"256x256":[256,256],"256x144":[256,144],"160x96":[160,96]},hr={model:"meet",backend:"wasmSimd",inputResolution:"160x96",pipeline:"canvas2dCpu"};var vr=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},xr=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},yr=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};function br(e,t,r,n,o,a,i){var s=n.getContext("2d"),l=yr(mr[r.inputResolution],2),c=l[0],u=l[1],d=c*u,f=new ImageData(c,u),p=document.createElement("canvas");p.width=c,p.height=u;var m=document.createElement("img");m.crossOrigin="anonymous",m.src=t.url;var h,v=p.getContext("2d"),x=a._getInputMemoryOffset()/4,y=a._getOutputMemoryOffset()/4;function b(){return vr(this,void 0,void 0,(function(){var e,t;return xr(this,(function(r){switch(r.label){case 0:return[4,o.segmentPerson(p)];case 1:for(e=r.sent(),t=0;t<d;t++)f.data[4*t+3]=e.data[t]?255:0;return v.putImageData(f,0,0),[2]}}))}))}return{render:function(){return vr(this,void 0,void 0,(function(){return xr(this,(function(n){switch(n.label){case 0:return"none"!==t.type&&function(){if(v.drawImage(e.htmlElement,0,0,e.width,e.height,0,0,c,u),"meet"===r.model||"mlkit"===r.model)for(var t=v.getImageData(0,0,c,u),n=0;n<d;n++)a.HEAPF32[x+3*n]=t.data[4*n]/255,a.HEAPF32[x+3*n+1]=t.data[4*n+1]/255,a.HEAPF32[x+3*n+2]=t.data[4*n+2]/255}(),i(),"none"===t.type?[3,3]:"bodyPix"!==r.model?[3,2]:[4,b()];case 1:return n.sent(),[3,3];case 2:!function(){a._runInference();for(var e=0;e<d;e++)if("meet"===r.model){var t=a.HEAPF32[y+2*e],n=a.HEAPF32[y+2*e+1],o=Math.max(t,n),i=Math.exp(t-o),s=Math.exp(n-o);f.data[4*e+3]=255*s/(i+s)}else if("mlkit"===r.model){n=a.HEAPF32[y+e];f.data[4*e+3]=255*n}v.putImageData(f,0,0)}(),n.label=3;case 3:return i(),function(){s.globalCompositeOperation="copy",s.filter="none",(null===h||void 0===h?void 0:h.smoothSegmentationMask)&&("blur"===t.type?s.filter="blur(8px)":"image"===t.type&&(s.filter="blur(4px)"));"none"!==t.type&&(s.drawImage(p,0,0,c,u,0,0,e.width,e.height),s.globalCompositeOperation="source-in",s.filter="none");s.drawImage(e.htmlElement,0,0),"blur"===t.type?(s.globalCompositeOperation="destination-over",s.filter="blur(8px)",s.drawImage(e.htmlElement,0,0)):"image"===t.type&&(s.globalCompositeOperation="destination-over",function(e,t,r,n,o,a,i,s){2===arguments.length&&(r=n=0,o=e.canvas.width,a=e.canvas.height);(i="number"===typeof i?i:.5)<0&&(i=0);(s="number"===typeof s?s:.5)<0&&(s=0);i>1&&(i=1);s>1&&(s=1);var l,c,u,d,f=t.width,p=t.height,m=Math.min(o/f,a/p),h=f*m,v=p*m,x=1;h<o&&(x=o/h);Math.abs(x-1)<1e-14&&v<a&&(x=a/v);(l=(f-(u=f/((h*=x)/o)))*i)<0&&(l=0);(c=(p-(d=p/((v*=x)/a)))*s)<0&&(c=0);u>f&&(u=f);d>p&&(d=p);e.drawImage(t,l,c,u,d,r,n,o,a)}(s,m,0,0,s.canvas.width,s.canvas.height,.5,.5))}(),[2]}}))}))},updatePostProcessingConfig:function(e){h=e},cleanUp:function(){}}}var gr=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},wr=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},jr=String.raw;function Sr(e,t,r,n,o){var a=function(e,t,r){var n=e.createProgram();if(e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw new Error("Could not link WebGL program: ".concat(e.getProgramInfoLog(n)));return n}(e,t,r),i=e.getAttribLocation(a,"a_position");e.enableVertexAttribArray(i),e.bindBuffer(e.ARRAY_BUFFER,n),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0);var s=e.getAttribLocation(a,"a_texCoord");return e.enableVertexAttribArray(s),e.bindBuffer(e.ARRAY_BUFFER,o),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),a}function kr(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error("Could not compile shader: ".concat(e.getShaderInfoLog(n)));return n}function _r(e,t,r,n,o,a){void 0===o&&(o=e.NEAREST),void 0===a&&(a=e.NEAREST);var i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,a),e.texStorage2D(e.TEXTURE_2D,1,t,r,n),i}function Nr(e,t,r,n,o,a,i){return gr(this,void 0,void 0,(function(){var s,l;return wr(this,(function(c){switch(c.label){case 0:return s=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0),e.flush(),[4,Cr(e,s)];case 1:return l=c.sent(),e.deleteSync(s),l!==e.WAIT_FAILED&&(e.bindBuffer(t,r),e.getBufferSubData(t,n,o,a,i),e.bindBuffer(t,null)),[2]}}))}))}function Cr(e,t){return new Promise((function(r){requestAnimationFrame((function n(){var o=e.clientWaitSync(t,0,0);o!==e.WAIT_FAILED?o!==e.TIMEOUT_EXPIRED?r(o):requestAnimationFrame(n):r(o)}))}))}var Er,Tr,Pr,Or=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function Ar(e,t,r,n,o,a){var i=function(e,t,r,n,o,a){var i=jr(Er||(Er=Or(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    const float offset[5] = float[](0.0, 1.0, 2.0, 3.0, 4.0);\n    const float weight[5] = float[](0.2270270270, 0.1945945946, 0.1216216216,\n      0.0540540541, 0.0162162162);\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < 5; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    const float offset[5] = float[](0.0, 1.0, 2.0, 3.0, 4.0);\n    const float weight[5] = float[](0.2270270270, 0.1945945946, 0.1216216216,\n      0.0540540541, 0.0162162162);\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < 5; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  "]))),s=.5,l=a.width*s,c=a.height*s,u=1/l,d=1/c,f=kr(e,e.FRAGMENT_SHADER,i),p=Sr(e,t,f,r,n),m=e.getUniformLocation(p,"u_inputFrame"),h=e.getUniformLocation(p,"u_personMask"),v=e.getUniformLocation(p,"u_texelSize"),x=_r(e,e.RGBA8,l,c,e.NEAREST,e.LINEAR),y=_r(e,e.RGBA8,l,c,e.NEAREST,e.LINEAR),b=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,b),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,x,0);var g=e.createFramebuffer();function w(){e.viewport(0,0,l,c),e.useProgram(p),e.uniform1i(m,0),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o);for(var t=0;t<3;t++)e.uniform2f(v,0,d),e.bindFramebuffer(e.FRAMEBUFFER,b),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,x),e.uniform1i(m,2),e.uniform2f(v,u,0),e.bindFramebuffer(e.FRAMEBUFFER,g),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.bindTexture(e.TEXTURE_2D,y)}function j(){e.deleteFramebuffer(g),e.deleteFramebuffer(b),e.deleteTexture(y),e.deleteTexture(x),e.deleteProgram(p),e.deleteShader(f)}return e.bindFramebuffer(e.FRAMEBUFFER,g),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,y,0),e.useProgram(p),e.uniform1i(h,1),{render:w,cleanUp:j}}(e,t,r,n,o,a),s=function(e,t,r,n){var o=jr(Tr||(Tr=Or(["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "],["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "]))),a=jr(Pr||(Pr=Or(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  "]))),i=n.width,s=n.height,l=kr(e,e.VERTEX_SHADER,o),c=kr(e,e.FRAGMENT_SHADER,a),u=Sr(e,l,c,t,r),d=e.getUniformLocation(u,"u_inputFrame"),f=e.getUniformLocation(u,"u_personMask"),p=e.getUniformLocation(u,"u_blurredInputFrame"),m=e.getUniformLocation(u,"u_coverage");function h(){e.viewport(0,0,i,s),e.useProgram(u),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLE_STRIP,0,4)}function v(t){e.useProgram(u),e.uniform2f(m,t[0],t[1])}function x(){e.deleteProgram(u),e.deleteShader(c),e.deleteShader(l)}return e.useProgram(u),e.uniform1i(d,0),e.uniform1i(f,1),e.uniform1i(p,2),e.uniform2f(m,0,1),{render:h,updateCoverage:v,cleanUp:x}}(e,r,n,a);return{render:function(){i.render(),s.render()},updateCoverage:function(e){s.updateCoverage(e)},cleanUp:function(){s.cleanUp(),i.cleanUp()}}}var Rr,Ir,Fr=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var Mr,Dr=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Ur=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};var Lr,Br=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Wr=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};var Vr,Gr=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Hr=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};function zr(e,t,r,n,o,a){var i=jr(Vr||(Vr=Gr(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  "]))),s=a._getInputMemoryOffset()/4,l=Hr(mr[o.inputResolution],2),c=l[0],u=l[1],d=c*u,f=kr(e,e.FRAGMENT_SHADER,i),p=Sr(e,t,f,r,n),m=e.getUniformLocation(p,"u_inputFrame"),h=_r(e,e.RGBA8,c,u),v=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,h,0);var x=new Uint8Array(4*d);return e.useProgram(p),e.uniform1i(m,0),{render:function(){e.viewport(0,0,c,u),e.useProgram(p),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4),function(e,t,r,n,o,a,i,s){gr(this,void 0,void 0,(function(){var l;return wr(this,(function(c){switch(c.label){case 0:return l=e.createBuffer(),e.bindBuffer(e.PIXEL_PACK_BUFFER,l),e.bufferData(e.PIXEL_PACK_BUFFER,s.byteLength,e.STREAM_READ),e.readPixels(t,r,n,o,a,i,0),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),[4,Nr(e,e.PIXEL_PACK_BUFFER,l,0,s)];case 1:return c.sent(),e.deleteBuffer(l),[2,s]}}))}))}(e,0,0,c,u,e.RGBA,e.UNSIGNED_BYTE,x);for(var t=0;t<d;t++){var r=s+3*t,n=4*t;a.HEAPF32[r]=x[n]/255,a.HEAPF32[r+1]=x[n+1]/255,a.HEAPF32[r+2]=x[n+2]/255}},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}var Qr,qr=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},$r=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};var Jr,Xr=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Yr=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Kr=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Zr=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};function en(e,t,r,n,o,a,i){var s=jr(Jr||(Jr=Xr(["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "],["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "]))),l=e.width,c=e.height,u=Zr(mr[n.inputResolution],2),d=u[0],f=u[1],p=o.getContext("webgl2"),m=kr(p,p.VERTEX_SHADER,s),h=p.createVertexArray();p.bindVertexArray(h);var v=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,v),p.bufferData(p.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),p.STATIC_DRAW);var x=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,x),p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),p.STATIC_DRAW);var y=p.createTexture();p.bindTexture(p.TEXTURE_2D,y),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);var b=_r(p,p.RGBA8,d,f),g=_r(p,p.RGBA8,l,c),w=zr(p,m,v,x,n,a),j="meet"===n.model?function(e,t,r,n,o,a,i){var s=jr(Qr||(Qr=qr(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  "]))),l=a._getOutputMemoryOffset()/4,c=$r(mr[o.inputResolution],2),u=c[0],d=c[1],f=kr(e,e.FRAGMENT_SHADER,s),p=Sr(e,t,f,r,n),m=e.getUniformLocation(p,"u_inputSegmentation"),h=_r(e,e.RG32F,u,d),v=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(p),e.uniform1i(m,1),{render:function(){e.viewport(0,0,u,d),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,h),e.texSubImage2D(e.TEXTURE_2D,0,0,0,u,d,e.RG,e.FLOAT,a.HEAPF32,l),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4)},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}(p,m,v,x,n,a,b):function(e,t,r,n,o,a,i){var s=jr(Lr||(Lr=Br(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      float segmentation = texture(u_inputSegmentation, v_texCoord).r;\n      outColor = vec4(vec3(0.0), segmentation);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      float segmentation = texture(u_inputSegmentation, v_texCoord).r;\n      outColor = vec4(vec3(0.0), segmentation);\n    }\n  "]))),l=a._getOutputMemoryOffset()/4,c=Wr(mr[o.inputResolution],2),u=c[0],d=c[1],f=kr(e,e.FRAGMENT_SHADER,s),p=Sr(e,t,f,r,n),m=e.getUniformLocation(p,"u_inputSegmentation"),h=_r(e,e.R32F,u,d),v=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(p),e.uniform1i(m,1),{render:function(){e.viewport(0,0,u,d),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,h),e.texSubImage2D(e.TEXTURE_2D,0,0,0,u,d,e.RED,e.FLOAT,a.HEAPF32,l),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4)},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}(p,m,v,x,n,a,b),S=function(e,t,r,n,o,a,i,s){var l=jr(Mr||(Mr=Dr(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  "]))),c=Ur(mr[a.inputResolution],2),u=c[0],d=c[1],f=s.width,p=s.height,m=1/f,h=1/p,v=kr(e,e.FRAGMENT_SHADER,l),x=Sr(e,t,v,r,n),y=e.getUniformLocation(x,"u_inputFrame"),b=e.getUniformLocation(x,"u_segmentationMask"),g=e.getUniformLocation(x,"u_texelSize"),w=e.getUniformLocation(x,"u_step"),j=e.getUniformLocation(x,"u_radius"),S=e.getUniformLocation(x,"u_offset"),k=e.getUniformLocation(x,"u_sigmaTexel"),_=e.getUniformLocation(x,"u_sigmaColor"),N=e.createFramebuffer();function C(t){t*=Math.max(f/u,p/d);var r=Math.max(1,.66*Math.sqrt(t)),n=t,o=r>1?.5*r:0,a=Math.max(m,h)*t;e.useProgram(x),e.uniform1f(w,r),e.uniform1f(j,n),e.uniform1f(S,o),e.uniform1f(k,a)}function E(t){e.useProgram(x),e.uniform1f(_,t)}return e.bindFramebuffer(e.FRAMEBUFFER,N),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(x),e.uniform1i(y,0),e.uniform1i(b,1),e.uniform2f(g,m,h),C(0),E(0),{render:function(){e.viewport(0,0,f,p),e.useProgram(x),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o),e.bindFramebuffer(e.FRAMEBUFFER,N),e.drawArrays(e.TRIANGLE_STRIP,0,4)},updateSigmaSpace:C,updateSigmaColor:E,cleanUp:function(){e.deleteFramebuffer(N),e.deleteProgram(x),e.deleteShader(v)}}}(p,m,v,x,b,n,g,o),k="blur"===r.type?Ar(p,m,v,x,g,o):function(e,t,r,n,o,a){var i=jr(Rr||(Rr=Fr(["#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  "],["#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  "]))),s=jr(Ir||(Ir=Fr(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap) +\n        (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap) +\n        (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  "]))),l=a.width,c=a.height,u=l/c,d=kr(e,e.VERTEX_SHADER,i),f=kr(e,e.FRAGMENT_SHADER,s),p=Sr(e,d,f,t,r),m=e.getUniformLocation(p,"u_backgroundScale"),h=e.getUniformLocation(p,"u_backgroundOffset"),v=e.getUniformLocation(p,"u_inputFrame"),x=e.getUniformLocation(p,"u_personMask"),y=e.getUniformLocation(p,"u_background"),b=e.getUniformLocation(p,"u_coverage"),g=e.getUniformLocation(p,"u_lightWrapping"),w=e.getUniformLocation(p,"u_blendMode");e.useProgram(p),e.uniform2f(m,1,1),e.uniform2f(h,0,0),e.uniform1i(v,0),e.uniform1i(x,1),e.uniform2f(b,0,1),e.uniform1f(g,0),e.uniform1f(w,0);var j=null;function S(t){j=_r(e,e.RGBA8,t.naturalWidth,t.naturalHeight,e.LINEAR,e.LINEAR),e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.naturalWidth,t.naturalHeight,e.RGBA,e.UNSIGNED_BYTE,t);var r=0,n=0,o=t.naturalWidth,a=t.naturalHeight;o/a<u?(a=o/u,n=(t.naturalHeight-a)/2):(o=a*u,r=(t.naturalWidth-o)/2);var i=o/t.naturalWidth,s=a/t.naturalHeight;r/=t.naturalWidth,n/=t.naturalHeight,e.uniform2f(m,i,s),e.uniform2f(h,r,n)}return(null===o||void 0===o?void 0:o.complete)?S(o):o&&(o.onload=function(){S(o)}),{render:function(){e.viewport(0,0,l,c),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,n),null!==j&&(e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,j),e.uniform1i(y,2)),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLE_STRIP,0,4)},updateCoverage:function(t){e.useProgram(p),e.uniform2f(b,t[0],t[1])},updateLightWrapping:function(t){e.useProgram(p),e.uniform1f(g,t)},updateBlendMode:function(t){e.useProgram(p),e.uniform1f(w,"screen"===t?0:1)},cleanUp:function(){e.deleteTexture(j),e.deleteProgram(p),e.deleteShader(f),e.deleteShader(d)}}}(p,v,x,g,t,o);return{render:function(){return Yr(this,void 0,void 0,(function(){return Kr(this,(function(t){return p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,y),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,e.htmlElement),p.bindVertexArray(h),w.render(),i(),a._runInference(),i(),j.render(),S.render(),k.render(),[2]}))}))},updatePostProcessingConfig:function(e){if(S.updateSigmaSpace(e.jointBilateralFilter.sigmaSpace),S.updateSigmaColor(e.jointBilateralFilter.sigmaColor),"image"===r.type)(t=k).updateCoverage(e.coverage),t.updateLightWrapping(e.lightWrapping),t.updateBlendMode(e.blendMode);else if("blur"===r.type){k.updateCoverage(e.coverage)}else{var t;(t=k).updateCoverage([0,.9999]),t.updateLightWrapping(0)}},cleanUp:function(){k.cleanUp(),S.cleanUp(),j.cleanUp(),w.cleanUp(),p.deleteTexture(g),p.deleteTexture(b),p.deleteTexture(y),p.deleteBuffer(x),p.deleteBuffer(v),p.deleteVertexArray(h),p.deleteShader(m)}}}var tn=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},rn=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},nn=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const on=function(e,t,r,n,o){var i=nn((0,a.useState)(null),2),s=i[0],l=i[1],c=(0,a.useRef)(null),u=(0,a.useRef)(null),d=nn((0,a.useState)(0),2),f=d[0],p=d[1],m=nn((0,a.useState)([]),2),h=m[0],v=m[1];return(0,a.useEffect)((function(){var a,i=!0,s=0,d=0,f=0,m=0,h=[],x="webgl2"===r.pipeline?en(e,c.current,t,r,u.current,o,y):br(e,t,r,u.current,n,o,y);function y(){var e=Date.now();h[f]=e-d,d=e,f++}return function e(){return tn(this,void 0,void 0,(function(){return rn(this,(function(t){switch(t.label){case 0:return i?(d=Date.now(),[4,x.render()]):[2];case 1:return t.sent(),function(){var e=Date.now();h[f]=e-d,m++,e>=s+1e3&&(p(1e3*m/(e-s)),v(h),s=e,m=0);f=0}(),a=requestAnimationFrame(e),[2]}}))}))}(),l(x),function(){i=!1,cancelAnimationFrame(a),x.cleanUp(),l(null)}}),[e,t,r,n,o]),{pipeline:s,backgroundImageRef:c,canvasRef:u,fps:f,durations:h}};var an=function(){return an=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},an.apply(this,arguments)};const sn=function(e){var t=e.sourcePlayback,r=e.backgroundConfig,n=e.segmentationConfig,i=e.postProcessingConfig,s=e.bodyPix,l=e.tflite,c=e.id,u=e.onCanvasRef,d=on(t,r,n,s,l),f=d.pipeline,p=d.canvasRef;return(0,a.useEffect)((function(){f&&f.updatePostProcessingConfig(i)}),[f,i]),(0,a.useEffect)((function(){var e=setTimeout((function(){u&&p&&u(p)}),500);return function(){clearTimeout(e)}}),[p]),(0,o.jsx)("div",an({className:"root preview-camera-webcam"},{children:(0,o.jsx)("canvas",{ref:p,className:"render w-full my-5",width:t.width,height:t.height,id:c},n.pipeline)}))};var ln,cn={smoothSegmentationMask:!0,jointBilateralFilter:{sigmaSpace:1,sigmaColor:.1},coverage:[.5,.75],lightWrapping:.3,blendMode:"screen"},un=r(56124),dn=(r(85186),r(86931)),fn=(r(92423),function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))}),pn=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},mn=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const hn=function(){var e=mn((0,a.useState)(),2),t=e[0],r=e[1];return(0,a.useEffect)((function(){var e;return ln?r(ln):e=setTimeout((function(){!function(){fn(this,void 0,void 0,(function(){return pn(this,(function(e){switch(e.label){case 0:return console.log("Loading TensorFlow.js and BodyPix segmentation model"),[4,dn.Cd_()];case 1:return e.sent(),[4,un.zD()];case 2:return ln=e.sent(),r(ln),console.log("TensorFlow.js and BodyPix loaded"),[2]}}))}))}()}),500),function(){e&&clearTimeout(e)}}),[]),t};var vn=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},xn=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},yn=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const bn=function(e){var t,r=yn((0,a.useState)(),2),n=r[0],o=r[1],i=yn((0,a.useState)(),2),s=i[0],l=i[1],c=yn((0,a.useState)(),2),u=c[0],d=c[1],f=yn((0,a.useState)(!1),2),p=f[0],m=f[1],h=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,a.useEffect)((function(){!function(){vn(this,void 0,void 0,(function(){var e;return xn(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,createTFLiteSIMDModule()];case 1:return e=t.sent(),l(e),o(e),m(!0),[3,3];case 2:t.sent();try{createTFLiteModule().then(o)}catch(r){console.warn("Failed to create TFLite WebAssembly module.",r)}return[3,3];case 3:return[2]}}))}))}()}),[]),(0,a.useEffect)((function(){!function(){vn(this,void 0,void 0,(function(){var t,r,o,a;return xn(this,(function(i){switch(i.label){case 0:if(!n||p&&!s||!p&&"wasmSimd"===e.backend||"meet"!==e.model&&"mlkit"!==e.model)return[2];if(d(void 0),!(t="wasmSimd"===e.backend?s:n))throw new Error("TFLite backend unavailable: ".concat(e.backend));return r=function(e,t){switch(e){case"meet":return"256x144"===t?"segm_full_v679":"segm_lite_v681";case"mlkit":return"selfiesegmentation_mlkit-256x256-2021_01_19-v1215.f16";default:throw new Error("No TFLite file for this segmentation model: ".concat(e))}}(e.model,e.inputResolution),console.log("Loading tflite model:",r),[4,fetch("".concat(h,"/models/").concat(r,".tflite"))];case 1:return[4,i.sent().arrayBuffer()];case 2:return o=i.sent(),console.log("Model buffer size:",o.byteLength),a=t._getModelBufferMemoryOffset(),console.log("Model buffer memory offset:",a),console.log("Loading model buffer..."),t.HEAPU8.set(new Uint8Array(o),a),console.log("_loadModel result:",t._loadModel(o.byteLength)),console.log("Input memory offset:",t._getInputMemoryOffset()),console.log("Input height:",t._getInputHeight()),console.log("Input width:",t._getInputWidth()),console.log("Input channels:",t._getInputChannelCount()),console.log("Output memory offset:",t._getOutputMemoryOffset()),console.log("Output height:",t._getOutputHeight()),console.log("Output width:",t._getOutputWidth()),console.log("Output channels:",t._getOutputChannelCount()),d(t),[2]}}))}))}()}),[n,s,p,e.model,e.backend,e.inputResolution]),{tflite:u,isSIMDSupported:p}};var gn=function(){return gn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gn.apply(this,arguments)},wn=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const jn=function(e){var t=e.sourcePlayback,r=e.backgroundConfig,n=e.id,i=e.onCanvasRef,s=wn((0,a.useState)(hr),2),l=s[0],c=s[1],u=hn(),d=bn(l),f=d.tflite,p=d.isSIMDSupported;return(0,a.useEffect)((function(){u&&c((function(e){return"wasmSimd"!==e.backend||p?e:gn(gn({},e),{backend:"wasm"})}))}),[p]),(0,o.jsx)(o.Fragment,{children:t&&u&&f?(0,o.jsx)(sn,{sourcePlayback:t,backgroundConfig:null!==r&&void 0!==r?r:ee,segmentationConfig:l,postProcessingConfig:cn,bodyPix:u,tflite:f,id:n,onCanvasRef:i}):null})};var Sn=r(65342),kn=r.n(Sn),_n=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Nn=function(e){var t=e.allowedFileTypes,r=e.maxFileSize,n=e.files,o=a.useRef(null),i=_n((0,a.useState)(!1),2),s=i[0],c=i[1],u=_n((0,a.useState)(),2),d=u[0],f=u[1],p=(0,Xt.$)().t,m=qt.getState().session;(0,a.useEffect)((function(){n&&n.length&&h(n)}),[n]);var h=function(e){var n,a="",i=new(kn())({target:window.PLUG_N_MEET_SERVER_URL+"/api/fileUpload",uploadMethod:"POST",query:{sid:m.currentRoom.sid,roomId:m.currentRoom.room_id,userId:null===(n=m.currentUser)||void 0===n?void 0:n.userId,resumable:!0},headers:{Authorization:m.token},fileType:t,fileTypeErrorCallback:function(e){(0,l.Am)(p("notifications.file-type-not-allow",{filetype:e.type}),{type:l.Am.TYPE.ERROR})},maxFileSize:r?1e6*r:void 0,maxFileSizeErrorCallback:function(){(0,l.Am)(p("notifications.max-file-size-exceeds"),{type:l.Am.TYPE.ERROR})}});i.on("fileAdded",(function(e){a=e.fileName,i.isUploading()||(c(!0),i.upload())})),i.on("fileSuccess",(function(e,t){var r=JSON.parse(t);c(!1),setTimeout((function(){var e;l.Am.dismiss(null!==(e=o.current)&&void 0!==e?e:"")}),300),r.status&&f({filePath:r.filePath,fileName:r.fileName,fileExtension:r.fileExtension})})),i.on("fileError",(function(e,t){c(!1),setTimeout((function(){var e;l.Am.dismiss(null!==(e=o.current)&&void 0!==e?e:"")}),300);try{var r=JSON.parse(t);(0,l.Am)(p(r.msg),{type:l.Am.TYPE.ERROR})}catch(n){(0,l.Am)(p("right-panel.file-upload-default-error"),{type:l.Am.TYPE.ERROR})}})),i.on("uploadStart",(function(){o.current=(0,l.Am)(p("right-panel.uploading-file",{fileName:a}),{closeButton:!1,progress:0})})),i.on("fileProgress",(function(e){var t,r=e.progress(!1);l.Am.update(null!==(t=o.current)&&void 0!==t?t:"",{progress:Number(r)})})),i.addFiles(e)};return{isUploading:s,result:d}};var Cn=function(){return Cn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cn.apply(this,arguments)},En=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Tn=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};const Pn=function(e){var t=e.onSelect,r=["jpg","jpeg","png"],n=(0,Xt.$)().t,i=En((0,a.useState)(ee),2),s=i[0],l=i[1],c=En((0,a.useState)(re),2),u=c[0],d=c[1],f=En((0,a.useState)(),2),p=f[0],m=f[1],h=(0,a.useRef)(null),v=Nn({allowedFileTypes:r,maxFileSize:30,files:p}),x=v.isUploading,y=v.result;(0,a.useEffect)((function(){if(y&&y.filePath){var e=window.PLUG_N_MEET_SERVER_URL+"/download/uploadedFile/"+y.filePath,t=Tn([],En(u),!1);t.push(e),d(Tn([],En(t),!1));var r=h.current;r&&(r.value="")}}),[y,h]);var b=function(e,r){var n={type:e,url:r};l(n),t(n)};return(0,o.jsxs)("div",Cn({className:"flex flex-wrap items-center justify-start p-3 bg-slate-100 shadow-header"},{children:[(0,o.jsx)("div",Cn({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center border-2 border-solid border-gray-300 transition transform scale-90 hover:scale-95 ease-in  ".concat("none"===s.type?"border-secondaryColor scale-95":""),onClick:function(){return b("none","")}},{children:(0,o.jsx)("i",{className:"pnm-ban-solid"})})),(0,o.jsx)("div",Cn({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center border-2 border-solid border-gray-300 transition transform scale-90 hover:scale-95 ease-in ".concat("blur"===s.type?"border-secondaryColor scale-95":""),onClick:function(){return b("blur","")}},{children:(0,o.jsx)("i",{className:"pnm-blur"})})),u.map((function(e){return(0,o.jsx)("div",Cn({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center transition transform scale-90 hover:scale-95 ease-in border-2 border-solid border-transparent ".concat(s.url===e?"border-secondaryColor scale-95":""),onClick:function(){return b("image",e)}},{children:(0,o.jsx)("img",{src:e,alt:e,className:"object-cover w-full h-full"})}),e)})),(0,o.jsxs)("div",Cn({className:"upload-btn-wrap relative overflow-hidden inline-block cursor-pointer pt-2 w-full"},{children:[(0,o.jsx)("button",Cn({className:"btn border border-dotted border-secondaryColor bg-transparent py-2 px-4 rounded text-xs text-secondaryColor cursor-pointer"},{children:n("footer.modal.upload-background-image")})),(0,o.jsx)("input",{className:"absolute left-0 top-0 opacity-0 w-full h-full cursor-pointer",ref:h,type:"file",onChange:function(e){if(!x){var t=e.target.files;t&&m(Tn([],En(t),!1))}},accept:r.map((function(e){return"."+e})).join(",")})]}))]}))};var On=function(){return On=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},On.apply(this,arguments)},An=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Rn=function(e){var t,r=e.deviceId,n=An((0,a.useState)(),2),i=n[0],s=n[1],l=An((0,a.useState)(!1),2),c=l[0],u=l[1],d=An((0,a.useState)(),2),f=d[0],p=d[1],m=An((0,a.useState)(),2),h=m[0],v=m[1],x=An((0,a.useState)(),2),y=x[0],b=x[1],g=null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.userId,w=$t(),j=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(0,a.useEffect)((function(){f!==r&&(u(!1),p(r))}),[r]),(0,a.useEffect)((function(){u(!1);i&&setTimeout((function(){u(!0)}),500)}),[i]),(0,a.useEffect)((function(){return function(){y&&y.getTracks().forEach((function(e){e.stop()}))}}),[y]);return(0,o.jsxs)("div",On({className:"mt-5"},{children:[r?(0,o.jsx)("div",On({style:h?{display:"none"}:{display:""}},{children:(0,o.jsx)(pr,{deviceId:r,onSourcePlayback:s,onMediaStream:b})})):null,c&&i&&g&&h?(0,o.jsx)(jn,{sourcePlayback:i,backgroundConfig:h,id:g}):null,j?null:(0,o.jsx)(Pn,{onSelect:function(e){w(_e(e)),"none"===e.type?(u(!1),v(void 0)):(!c&&r&&u(!0),v(e))}})]}))};var In=function(){return In=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},In.apply(this,arguments)},Fn=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Mn=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Dn=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Un=(0,Yt.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e}));const Ln=function(e){var t=e.onSelectedDevice,r=Jt(Un),n=Dn((0,a.useState)(!0),2),i=n[0],s=n[1],l=Dn((0,a.useState)(""),2),c=l[0],u=l[1],d=Dn((0,a.useState)([]),2),f=d[0],p=d[1],m=$t(),h=(0,Xt.$)().t;(0,a.useEffect)((function(){Fn(void 0,void 0,void 0,(function(){var e,t,r;return Mn(this,(function(n){switch(n.label){case 0:return[4,ir("videoinput")];case 1:return e=n.sent(),t=[],r=e.map((function(e){var r={id:e.deviceId,label:e.label};return t.push(r),(0,o.jsx)("option",In({value:e.deviceId},{children:e.label}),e.deviceId)})),p(r),u(e[0].deviceId),t.length&&m(Be(t)),[2]}}))}))}),[m]),(0,a.useEffect)((function(){r&&s(!0)}),[r]);var v=function(){s(!1),m(he(!1)),m(se(!1))};return(0,o.jsx)(o.Fragment,{children:r?(0,o.jsx)(rr.u,In({show:i,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(nr.V,In({open:i,onClose:function(){return!1},className:"share-webcam-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",In({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",In({className:"popup-inner bg-white w-full max-w-md rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",In({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return v()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,In({className:"mb-6"},{children:h("footer.modal.select-webcam")})),(0,o.jsx)("div",In({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",In({value:c,onChange:function(e){return u(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:f}))})),(0,o.jsx)("div",In({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)(Rn,{deviceId:c})})),(0,o.jsx)("div",In({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",In({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none",onClick:function(){return Fn(void 0,void 0,void 0,(function(){return Mn(this,(function(e){return v(),c?(t(c),[2]):[2]}))}))}},{children:h("share")}))}))]}))]}))}))})):null})};var Bn=r(53788),Wn=function(){return Wn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wn.apply(this,arguments)},Vn=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Gn=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Hn=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},zn=(0,Yt.P1)((function(e){return e.roomSettings.videoDevices}),(function(e){return e})),Qn=(0,Yt.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const qn=function(e){var t=e.currentRoom,r=$t(),n=(0,Xt.$)().t,i=Jt(zn),s=Jt(Qn),l=Hn((0,a.useState)(),2),c=l[0],u=l[1],d=Hn((0,a.useState)(),2),f=d[0],p=d[1];(0,a.useEffect)((function(){var e=i.map((function(e){return(0,o.jsx)("div",Wn({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("p",Wn({className:"".concat(s===e.id?"secondaryColor":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-primaryColor hover:text-white"),onClick:function(){return p(e.id)}},{children:e.label}))}})}),e.id)}));u(e)}),[s,i]),(0,a.useEffect)((function(){f&&r(Ve(f))}),[f,r]);return(0,o.jsxs)(Bn.v.Items,Wn({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[c,(0,o.jsx)("div",Wn({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("p",Wn({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return t.localParticipant.videoTracks.forEach((function(e){return Vn(void 0,void 0,void 0,(function(){return Gn(this,(function(r){return e.track&&e.track.source===Ie.fQ.Source.Camera&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),r(se(!1)),r(Ve("")),void r(_e({type:"none"}))}},{children:n("footer.menus.leave-webcam")}))}})}))]}))};var $n=function(){return $n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$n.apply(this,arguments)};const Jn=function(e){var t=e.currentRoom;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",$n({className:"absolute bottom-0 right-3 lg:right-6"},{children:(0,o.jsx)(Bn.v,{children:function(e){var r=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bn.v.Button,{children:(0,o.jsx)("div",$n({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[10px] sm:text-[12px]"})}))}),(0,o.jsx)(rr.u,$n({show:r,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(qn,{currentRoom:t})}))]})}})}))})};var Xn=function(){return Xn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xn.apply(this,arguments)},Yn=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Kn=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Zn=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},eo=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveWebcam}),(function(e){return e})),to=(0,Yt.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e})),ro=(0,Yt.P1)((function(e){var t,r;return null===(r=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.lock_settings.lock_webcam}),(function(e){return e})),no=(0,Yt.P1)((function(e){return e.bottomIconsActivity.virtualBackground}),(function(e){return e})),oo=(0,Yt.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const ao=function(e){var t=e.currentRoom,r=$t(),n="desktop"===qt.getState().session.userDeviceType,i=Jt(to),s=Jt(eo),l=Jt(ro),c=Jt(no),u=Jt(oo),d=(0,Xt.$)().t,f=Zn((0,a.useState)(!1),2),p=f[0],m=f[1],h=Zn((0,a.useState)(),2),v=h[0],x=h[1],y=Zn((0,a.useState)(),2),b=y[0],g=y[1],w=Zn((0,a.useState)(),2),j=w[0],S=w[1],k=(0,a.useRef)(null);(0,a.useEffect)((function(){if(l){m(!0);var e=T.selectById(qt.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.videoTracks)&&(null===t||void 0===t||t.localParticipant.videoTracks.forEach((function(e){e.track&&e.source===Ie.fQ.Source.Camera&&t.localParticipant.unpublishTrack(e.track)})),r(se(!1)))}else m(!1)}),[l,t,r]),(0,a.useEffect)((function(){var e,t,r,n,o=null===(t=null===(e=qt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_webcam,a=null===(n=null===(r=qt.getState().session.currentUser)||void 0===r?void 0:r.metadata)||void 0===n?void 0:n.is_admin;o&&!a&&!1!==l&&m(!0)}),[]),(0,a.useEffect)((function(){s||!j||u||j.getTracks().forEach((function(e){return e.stop()})),s||u||!v||x(void 0)}),[u]),(0,a.useEffect)((function(){if(u&&v&&u!==v){"none"===c.type?function(e){Yn(void 0,void 0,void 0,(function(){return Kn(this,(function(r){switch(r.label){case 0:return[4,t.switchActiveDevice("videoinput",e)];case 1:return r.sent(),[2]}}))}))}(u):function(e){Yn(void 0,void 0,void 0,(function(){return Kn(this,(function(t){switch(t.label){case 0:return[4,N(e)];case 1:return t.sent(),[2]}}))}))}(u),x(u)}}),[u]),(0,a.useEffect)((function(){if(j&&k){var e=k.current;e&&(e.srcObject=j)}return function(){j&&j.getTracks().forEach((function(e){return e.stop()}))}}),[j]);var _=function(){var e,t,r=k.current;r&&g({htmlElement:r,width:null!==(e=r.videoWidth)&&void 0!==e?e:320,height:null!==(t=r.videoHeight)&&void 0!==t?t:180})},N=function(e){return Yn(void 0,void 0,void 0,(function(){var n,o,a,i;return Kn(this,(function(s){switch(s.label){case 0:return"none"!==c.type?[3,3]:(n=function(){var e,t=null!==(e=window.DEFAULT_WEBCAM_RESOLUTION)&&void 0!==e?e:"h720",r=Ie.OM.h720.resolution;switch(t){case"h90":r=Ie.OM.h90.resolution;break;case"h180":r=Ie.OM.h180.resolution;break;case"h216":r=Ie.OM.h216.resolution;break;case"h360":r=Ie.OM.h360.resolution;break;case"h540":r=Ie.OM.h540.resolution;break;case"h720":r=Ie.OM.h720.resolution;break;case"h1080":r=Ie.OM.h1080.resolution;break;case"h1440":r=Ie.OM.h1440.resolution;break;case"h2160":r=Ie.OM.h2160.resolution}return r}(),[4,(0,Ie.gJ)({deviceId:{exact:e,ideal:e},resolution:n})]);case 1:return o=s.sent(),[4,t.localParticipant.publishTrack(o)];case 2:return s.sent(),r(se(!0)),[3,5];case 3:return a={video:{deviceId:{exact:e,ideal:e}}},[4,navigator.mediaDevices.getUserMedia(a)];case 4:i=s.sent(),S(i),s.label=5;case 5:return[2]}}))}))},C=function(e){return Yn(void 0,void 0,void 0,(function(){return Kn(this,(function(t){switch(t.label){case 0:return x(e),[4,N(e)];case 1:return t.sent(),r(Ve(e)),[2]}}))}))},E=function(e){e.current.captureStream(25).getTracks().forEach((function(e){return Yn(void 0,void 0,void 0,(function(){return Kn(this,(function(n){switch(n.label){case 0:return e.kind!==Ie.fQ.Kind.Video?[3,2]:[4,t.localParticipant.publishTrack(e,{source:Ie.fQ.Source.Camera,name:"canvas"})];case 1:n.sent(),r(se(!0)),n.label=2;case 2:return[2]}}))}))}))},P=function(){return(0,o.jsxs)("div",Xn({className:"relative z-10"},{children:[(0,o.jsxs)("div",Xn({className:"camera footer-icon relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(n?"has-tooltip":""),onClick:function(){p||(s?s&&(t.localParticipant.videoTracks.forEach((function(e){return Yn(void 0,void 0,void 0,(function(){return Kn(this,(function(r){return e.track&&e.track.source===Ie.fQ.Source.Camera&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),r(se(!1)),r(Ve("")),r(_e({type:"none"}))):r(he(!s)))}},{children:[(0,o.jsx)("span",Xn({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:s||l?!s&&l?d("footer.icons.webcam-locked"):s?d("footer.icons.leave-webcam"):void 0:d("footer.icons.start-webcam")})),s?null:(0,o.jsx)("i",{className:"pnm-webcam primaryColor text-[10px] lg:text-[14px]"}),p?(0,o.jsx)("div",Xn({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock primaryColor"})})):null,s?(0,o.jsx)("i",{className:"pnm-webcam secondaryColor text-[10px] lg:text-[14px]"}):null]})),s?(0,o.jsx)(Jn,{currentRoom:t}):null]}))};return(0,o.jsx)(o.Fragment,{children:function(){var e,t,r=qt.getState().session,n=null===(e=r.currentRoom.metadata)||void 0===e?void 0:e.room_features,o=r.currentUser;return!!(null===n||void 0===n?void 0:n.allow_webcams)&&!((null===n||void 0===n?void 0:n.admin_only_webcams)&&!(null===(t=null===o||void 0===o?void 0:o.metadata)||void 0===t?void 0:t.is_admin))}()?(0,o.jsxs)(o.Fragment,{children:[P(),i?(0,o.jsx)(Ln,{onSelectedDevice:C}):null,b&&v&&"none"!==c.type?(0,o.jsx)("div",Xn({style:{display:"none"}},{children:(0,o.jsx)(jn,{sourcePlayback:b,id:v,backgroundConfig:c,onCanvasRef:E})})):null,j?(0,o.jsx)("div",Xn({style:{display:"none"}},{children:(0,o.jsx)("video",{ref:k,autoPlay:!0,onLoadedData:_})})):null]}):null})};var io=function(){return io=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},io.apply(this,arguments)},so=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},lo=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},co=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},uo=(0,Yt.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e}));const fo=function(e){var t,r,n=e.currentRoom,i=Jt(uo),s=co((0,a.useState)(!0),2),l=s[0],c=s[1],u=co((0,a.useState)(""),2),d=u[0],f=u[1],p=co((0,a.useState)([]),2),m=p[0],h=p[1],v=$t(),x=(0,Xt.$)().t,y=null!==(r=null===(t=qt.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.mute_on_start)&&void 0!==r&&r;(0,a.useEffect)((function(){so(void 0,void 0,void 0,(function(){var e,t,r;return lo(this,(function(n){switch(n.label){case 0:return[4,ir("audioinput")];case 1:return e=n.sent(),t=[],r=e.map((function(e){var r={id:e.deviceId,label:e.label};return t.push(r),(0,o.jsx)("option",io({value:e.deviceId},{children:e.label}),e.deviceId)})),h(r),f(e[0].deviceId),t.length&&v(Le(t)),[2]}}))}))}),[v]),(0,a.useEffect)((function(){i&&c(!0)}),[i]);return(0,o.jsx)(o.Fragment,{children:i?(0,o.jsx)(rr.u,io({show:l,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(nr.V,io({open:l,onClose:function(){return!1},className:"share-microphone-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",io({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",io({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",io({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return c(!1),void v(me(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,io({className:"mb-6"},{children:x("footer.modal.select-microphone")})),(0,o.jsx)("div",io({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",io({value:d,onChange:function(e){return f(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:m}))})),(0,o.jsx)("div",io({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",io({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none",onClick:function(){return so(void 0,void 0,void 0,(function(){return lo(this,(function(e){switch(e.label){case 0:return c(!1),v(me(!1)),d?[4,(0,Ie.Ai)({audio:{deviceId:d},video:!1})]:[2];case 1:return e.sent().forEach((function(e){return so(void 0,void 0,void 0,(function(){return lo(this,(function(t){switch(t.label){case 0:return e.kind!==Ie.fQ.Kind.Audio?[3,2]:[4,null===n||void 0===n?void 0:n.localParticipant.publishTrack(e)];case 1:t.sent(),v(ae(!0)),t.label=2;case 2:return[2]}}))}))})),y&&setTimeout((function(){return so(void 0,void 0,void 0,(function(){return lo(this,(function(e){return null===n||void 0===n||n.localParticipant.audioTracks.forEach((function(e){return so(void 0,void 0,void 0,(function(){return lo(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Ie.fQ.Source.Microphone?e.isMuted?[3,2]:[4,e.track.mute()]:[3,2];case 1:t.sent(),v(ie(!0)),v(J(!1)),t.label=2;case 2:return[2]}}))}))})),[2]}))}))}),500),v(We(d)),[2]}}))}))}},{children:x("join")}))}))]}))]}))}))})):null})};var po=function(){return po=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},po.apply(this,arguments)},mo=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},ho=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},vo=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},xo=(0,Yt.P1)((function(e){return e.roomSettings.audioDevices}),(function(e){return e})),yo=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e})),bo=(0,Yt.P1)((function(e){return e.roomSettings.selectedAudioDevice}),(function(e){return e}));const go=function(e){var t=e.currentRoom,r=$t(),n=(0,Xt.$)().t,i=Jt(xo),s=Jt(yo),l=Jt(bo),c=vo((0,a.useState)(),2),u=c[0],d=c[1],f=vo((0,a.useState)(),2),p=f[0],m=f[1];(0,a.useEffect)((function(){var e=i.map((function(e){return(0,o.jsx)("div",po({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("p",po({className:"".concat(l===e.id?"secondaryColor":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-primaryColor hover:text-white"),onClick:function(){return m(e.id)}},{children:e.label}))}})}),e.id)}));d(e)}),[i,l]),(0,a.useEffect)((function(){var e;p&&(e=p,mo(void 0,void 0,void 0,(function(){return ho(this,(function(r){switch(r.label){case 0:return[4,t.switchActiveDevice("audioinput",e)];case 1:return r.sent(),[2]}}))})),r(We(p)))}),[p,t,r]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(Bn.v.Items,po({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[u,(0,o.jsx)("div",po({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("p",po({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center px-3 py-[0.4rem] text-xs transition ease-in hover:bg-primaryColor hover:text-white border-t border-solid border-red-100",onClick:function(){null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return mo(void 0,void 0,void 0,(function(){return ho(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Ie.fQ.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return t.sent(),r(ie(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:t.sent(),r(ie(!0)),t.label=4;case 4:return[2]}}))}))}))}},{children:n(s?"footer.menus.unmute-microphone":"footer.menus.mute-microphone")}))}})})),(0,o.jsx)("div",po({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("p",po({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return mo(void 0,void 0,void 0,(function(){return ho(this,(function(r){return e.track&&e.kind===Ie.fQ.Kind.Audio&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),r(ae(!1)),r(ie(!1)),void r(We(""))}},{children:n("footer.menus.leave-microphone")}))}})}))]}))})};var wo=function(){return wo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wo.apply(this,arguments)};const jo=function(e){var t=e.currentRoom;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",wo({className:"absolute bottom-0 right-3 lg:right-6"},{children:(0,o.jsx)(Bn.v,{children:function(e){var r=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bn.v.Button,{children:(0,o.jsx)("div",wo({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[10px] sm:text-[12px]"})}))}),(0,o.jsx)(rr.u,wo({show:r,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(go,{currentRoom:t})}))]})}})}))})};var So=function(){return So=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},So.apply(this,arguments)},ko=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},_o=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},No=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Co=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveMicrophone}),(function(e){return e})),Eo=(0,Yt.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e})),To=(0,Yt.P1)((function(e){var t,r;return null===(r=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.lock_settings.lock_microphone}),(function(e){return e})),Po=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e}));const Oo=function(e){var t=e.currentRoom,r=$t(),n="desktop"===qt.getState().session.userDeviceType,i=(0,Xt.$)().t,s=Jt(Eo),l=Jt(Co),c=Jt(To),u=Jt(Po),d=No((0,a.useState)(!1),2),f=d[0],p=d[1];(0,a.useEffect)((function(){if(c){p(!0);var e=T.selectById(qt.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.audioTracks)&&(null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){e.track&&e.source===Ie.fQ.Source.Microphone&&t.localParticipant.unpublishTrack(e.track)})),r(ae(!1)),r(ie(!1)))}else p(!1)}),[c,t,r]),(0,a.useEffect)((function(){var e,t,r,n,o=null===(t=null===(e=qt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_microphone,a=null===(n=null===(r=qt.getState().session.currentUser)||void 0===r?void 0:r.metadata)||void 0===n?void 0:n.is_admin;o&&!a&&!1!==c&&p(!0)}),[]);var m=function(){l||f||r(me(!0)),l&&(null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return ko(void 0,void 0,void 0,(function(){return _o(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Ie.fQ.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return t.sent(),r(ie(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:t.sent(),r(ie(!0)),t.label=4;case 4:return[2]}}))}))})))};return(0,o.jsxs)("div",So({className:"relative z-10"},{children:[s?(0,o.jsx)(fo,{currentRoom:t}):null,(0,o.jsxs)("div",So({className:"microphone footer-icon relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(n?"has-tooltip":""),onClick:function(){return m()}},{children:[(0,o.jsx)("span",So({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:l||f?!l&&f?i("footer.icons.microphone-locked"):l&&!u?i("footer.menus.mute-microphone"):l&&u?i("footer.menus.unmute-microphone"):void 0:i("footer.icons.start-microphone-sharing")})),l?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute primaryColor text-[10px] lg:text-[14px]"}),f?(0,o.jsx)("div",So({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock primaryColor"})})):null]}),!u&&l?(0,o.jsx)("i",{className:"pnm-mic-unmute secondaryColor text-[10px] lg:text-[14px]"}):null,u&&l?(0,o.jsx)("i",{className:"pnm-mic-mute secondaryColor text-[10px] lg:text-[14px]"}):null]})),l?(0,o.jsx)(jo,{currentRoom:t}):null]}))};var Ao=function(){return Ao=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ao.apply(this,arguments)},Ro=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Io=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),Fo=(0,Yt.P1)((function(e){return e.bottomIconsActivity.totalUnreadChatMsgs}),(function(e){return e}));const Mo=function(){var e=$t(),t="desktop"===qt.getState().session.userDeviceType,r=(0,Xt.$)().t,n=Jt(Io),i=Jt(Fo),s=Ro((0,a.useState)("primaryColor"),2),l=s[0],c=s[1],u=Ro((0,a.useState)(!0),2),d=u[0],f=u[1];(0,a.useEffect)((function(){c(n?"secondaryColor":"primaryColor")}),[n]),(0,a.useEffect)((function(){var t;(null===(t=qt.getState().session.currentRoom.metadata.room_features)||void 0===t?void 0:t.chat_features.allow_chat)||(f(!1),e(le(!1)))}),[e]);return(0,o.jsx)(o.Fragment,{children:d?(0,o.jsxs)("div",Ao({className:"message footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(le(!n))}},{children:[(0,o.jsx)("span",Ao({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(n?"footer.icons.hide-chat-panel":"footer.icons.show-chat-panel")})),(0,o.jsx)("i",{className:"pnm-chat ".concat(l," text-[12px] lg:text-[16px]")}),!n&&i>0?(0,o.jsx)("div",Ao({className:"unseen-message-count bg-brandRed w-5 h-5 rounded-full text-xs text-white absolute -top-2 -right-1 flex justify-center items-center"},{children:i})):null]})):null})};var Do=function(){return Do=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Do.apply(this,arguments)},Uo=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Lo=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),Bo=(0,Yt.P1)((function(e){return e.participants}),(function(e){return e}));const Wo=function(){var e=$t(),t="desktop"===qt.getState().session.userDeviceType,r=(0,Xt.$)().t,n=Jt(Lo),i=Jt(Bo),s=Uo((0,a.useState)("primaryColor"),2),l=s[0],c=s[1];(0,a.useEffect)((function(){c(n?"secondaryColor":"primaryColor")}),[n]);return(0,o.jsxs)("div",Do({className:"participants footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] mr-3 lg:mr-6 relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(ce(!n))}},{children:[(0,o.jsx)("span",Do({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(n?"footer.icons.hide-users-list":"footer.icons.show-users-list")})),(0,o.jsx)("i",{className:"pnm-participant ".concat(l," text-[12px] lg:text-[16px]")}),n?null:(0,o.jsx)("div",Do({className:"unseen-message-count bg-secondaryColor w-5 h-5 rounded-full text-xs text-white absolute -top-2 -right-1 flex justify-center items-center"},{children:i.ids.length}))]}))};var Vo=r(9669),Go=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Ho=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},zo=r.n(Vo)().create({baseURL:window.PLUG_N_MEET_SERVER_URL+"/api"}),Qo=function(){var e;return qt.getState().session.token?qt.getState().session.token:null!==(e=new URLSearchParams(window.location.search).get("access_token"))&&void 0!==e?e:""};const qo=function(e,t){return Go(void 0,void 0,void 0,(function(){return Ho(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,zo.post(e,JSON.stringify(t),{headers:{Authorization:Qo(),"Content-Type":"application/json"}})];case 1:return[2,r.sent().data];case 2:throw r.sent().response;case 3:return[2]}}))}))};var $o,Jo,Xo;!function(e){e.USER="USER",e.SYSTEM="SYSTEM",e.WHITEBOARD="WHITEBOARD"}($o||($o={})),function(e){e.RAISE_HAND="RAISE_HAND",e.LOWER_HAND="LOWER_HAND",e.OTHER_USER_LOWER_HAND="OTHER_USER_LOWER_HAND",e.FILE_UPLOAD="FILE_UPLOAD",e.INFO="INFO",e.ALERT="ALERT",e.SEND_CHAT_MSGS="SEND_CHAT_MSGS",e.RENEW_TOKEN="RENEW_TOKEN",e.UPDATE_LOCK_SETTINGS="UPDATE_LOCK_SETTINGS",e.INIT_WHITEBOARD="INIT_WHITEBOARD",e.USER_VISIBILITY_CHANGE="USER_VISIBILITY_CHANGE",e.EXTERNAL_MEDIA_PLAYER_EVENTS="EXTERNAL_MEDIA_PLAYER_EVENTS",e.POLL_CREATED="POLL_CREATED",e.NEW_POLL_RESPONSE="NEW_POLL_RESPONSE",e.POLL_CLOSED="POLL_CLOSED",e.JOIN_BREAKOUT_ROOM="JOIN_BREAKOUT_ROOM"}(Jo||(Jo={})),function(e){e.SCENE_UPDATE="SCENE_UPDATE",e.POINTER_UPDATE="POINTER_UPDATE",e.ADD_WHITEBOARD_FILE="ADD_WHITEBOARD_FILE",e.ADD_WHITEBOARD_OFFICE_FILE="ADD_WHITEBOARD_OFFICE_FILE",e.PAGE_CHANGE="PAGE_CHANGE"}(Xo||(Xo={}));var Yo=function(){return Yo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yo.apply(this,arguments)},Ko=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Zo=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ea=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},ta=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveRaisehand}),(function(e){return e}));const ra=function(e){var t=e.currentRoom,r="desktop"===qt.getState().session.userDeviceType,n=(0,Xt.$)().t,i=$t(),s=Jt(ta),c=ea((0,a.useState)("primaryColor"),2),u=c[0],d=c[1];(0,a.useEffect)((function(){d(s?"secondaryColor":"primaryColor")}),[s]);return(0,o.jsxs)("div",Yo({className:"hands footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(r?"has-tooltip":""),onClick:function(){return Ko(void 0,void 0,void 0,(function(){var e,r;return Zo(this,(function(o){switch(o.label){case 0:return s?[3,2]:(e={sid:t.sid,room_id:t.name,msg_type:Jo.RAISE_HAND,msg:n("footer.notice.has-raised-hand",{user:t.localParticipant.name})},[4,qo("dataMessage",e)]);case 1:return(r=o.sent()).status?(i(ue(!0)),(0,l.Am)(n("footer.notice.you-raised-hand"),{type:"info"})):(0,l.Am)(r.msg,{type:"error"}),[3,4];case 2:return e={sid:t.sid,room_id:t.name,msg_type:Jo.LOWER_HAND,msg:Jo.LOWER_HAND},[4,qo("dataMessage",e)];case 3:(r=o.sent()).status?i(ue(!1)):(0,l.Am)(r.msg,{type:"error"}),o.label=4;case 4:return[2]}}))}))}},{children:[(0,o.jsx)("span",Yo({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(s?"footer.icons.lower-hand":"footer.icons.raise-hand")})),(0,o.jsx)("i",{className:"pnm-raise-hand ".concat(u," text-[12px] lg:text-[16px]")})]}))};var na=function(){return na=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},na.apply(this,arguments)},oa=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},aa=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ia=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},sa=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveScreenshare}),(function(e){return e})),la=(0,Yt.P1)((function(e){return e.session.screenSharing}),(function(e){return e})),ca=(0,Yt.P1)((function(e){var t,r;return null===(r=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.lock_settings.lock_screen_sharing}),(function(e){return e}));const ua=function(e){var t,r,n=e.currentRoom,i="desktop"===qt.getState().session.userDeviceType,s=$t(),c=(0,Xt.$)().t,u=Jt(sa),d=Jt(la),f=Jt(ca),p=ia((0,a.useState)("primaryColor"),2),m=p[0],h=p[1],v=ia((0,a.useState)(!1),2),x=v[0],y=v[1],b=null===(r=null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.is_admin;(0,a.useEffect)((function(){d.isActive&&d.sharedBy===n.localParticipant.identity?h("secondaryColor"):h("primaryColor")}),[d]);var g=(0,a.useCallback)((function(){u&&(n.localParticipant.tracks.forEach((function(e){e.source!==Ie.fQ.Source.ScreenShare&&e.source!==Ie.fQ.Source.ScreenShareAudio||!e.track||n.localParticipant.unpublishTrack(e.track)})),s(de(!1)),s(V({isActive:!1,sharedBy:""})))}),[u,s,n]);(0,a.useEffect)((function(){b||(f?(y(!0),g()):f||y(!1))}),[g,f]),(0,a.useEffect)((function(){!d.isActive&&u&&s(de(!1))}),[d]);return(0,o.jsx)(o.Fragment,{children:function(){var e;return null===(e=qt.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_screen_share}()?(0,o.jsxs)("div",na({className:"share-screen footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 hidden md:flex items-center justify-center cursor-pointer ".concat(i?"has-tooltip":""),onClick:function(){return oa(void 0,void 0,void 0,(function(){return aa(this,(function(e){switch(e.label){case 0:return x?[2]:u?[3,2]:d.isActive?((0,l.Am)(c("footer.notice.already-active-screen-sharing"),{toastId:"dup-screen-share",type:"warning"}),[2]):[4,(0,Ie.QK)({audio:!0,resolution:dr()})];case 1:return e.sent().forEach((function(e){return oa(void 0,void 0,void 0,(function(){return aa(this,(function(t){switch(t.label){case 0:return[4,n.localParticipant.publishTrack(e)];case 1:return t.sent(),[2]}}))}))})),s(de(!0)),s(V({isActive:!0,sharedBy:n.localParticipant.identity})),[3,3];case 2:g(),e.label=3;case 3:return[2]}}))}))}},{children:[(0,o.jsx)("span",na({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:u?c("footer.icons.stop-screen-sharing"):u||x?x?c("footer.icons.screen-sharing-locked"):void 0:c("footer.icons.start-screen-sharing")})),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-screen-share ".concat(m," text-[12px] lg:text-[16px]")}),x?(0,o.jsx)("div",na({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock primaryColor"})})):null]})]})):null})};var da=function(){return da=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},da.apply(this,arguments)},fa=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},pa=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ma=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},ha=(0,Yt.P1)((function(e){return e.session.isActiveRecording}),(function(e){return e}));const va=function(){var e,t,r="desktop"===qt.getState().session.userDeviceType,n=(0,Xt.$)().t,i=Jt(ha),s=ma((0,a.useState)(!1),2),c=s[0],u=s[1],d=ma((0,a.useState)(!1),2),f=d[0],p=d[1],m=ma((0,a.useState)(!0),2),h=m[0],v=m[1],x=null===(t=null===(e=qt.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,y=0;(0,a.useEffect)((function(){return i?(p(!0),clearTimeout(y),u(!1)):!i&&f&&(p(!1),clearTimeout(y),u(!1)),function(){clearTimeout(y)}}),[i,f,y]),(0,a.useEffect)((function(){var e;(null===(e=qt.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_recording)||v(!1)}),[]);var b=function(){return fa(void 0,void 0,void 0,(function(){var e,t,r;return pa(this,(function(o){switch(o.label){case 0:return e={task:"start-recording",sid:qt.getState().session.currentRoom.sid},"undefined"!==typeof window.DESIGN_CUSTOMIZATION&&(e.custom_design="".concat(window.DESIGN_CUSTOMIZATION).replace(/\s/g,"")),[4,qo("recording",e)];case 1:return t=o.sent(),r="footer.notice.start-recording-progress",t.status||(r=t.msg),(0,l.Am)(n(r),{toastId:"recording-status",type:"info"}),y=setTimeout((function(){u(!1),(0,l.Am)(n("footer.notice.recording-not-start"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))},g=function(){return fa(void 0,void 0,void 0,(function(){var e,t,r;return pa(this,(function(o){switch(o.label){case 0:return e={task:"stop-recording",sid:qt.getState().session.currentRoom.sid},[4,qo("recording",e)];case 1:return t=o.sent(),r="footer.notice.stop-recording-service-in-progress",t.status||(r=t.msg),(0,l.Am)(n(r),{toastId:"recording-status",type:"info"}),y=setTimeout((function(){u(!1),(0,l.Am)(n("footer.notice.recording-did-not-stop"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:h&&x?(0,o.jsxs)("button",da({className:"".concat(i?"record":""," footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ").concat(r?"has-tooltip":""),onClick:function(){return u(!0),void(i?g():b())},disabled:c},{children:[(0,o.jsx)("span",da({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(i?"footer.icons.stop-recording":"footer.icons.start-recording")})),(0,o.jsx)("i",{className:"pnm-rec primaryColor text-[10px] lg:text-[12px] font-['Nunito Sans'] font-bold"})]})):null})};var xa=r(12395),ya=function(){return ya=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ya.apply(this,arguments)},ba=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},ga=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},wa=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.default_lock_settings}),(function(e){return e}));const ja=function(){var e=$t(),t=(0,Xt.$)().t,r=Jt(wa),n=qt.getState().session,i=function(e,r){return ba(void 0,void 0,void 0,(function(){var o,a,i;return ga(this,(function(s){switch(s.label){case 0:return o=e?"lock":"unlock",a={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:"all",service:r,direction:o},[4,qo("updateLockSettings",a)];case 1:return(i=s.sent()).status?(0,l.Am)(t("footer.notice.applied-settings"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(i.msg,{type:"error"}),[2]}}))}))},s=function(){var e,n,a,s,l,c,u,d,f;return(0,o.jsxs)(xa.r.Group,{children:[(0,o.jsxs)("div",ya({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(xa.r.Label,ya({className:"pr-4 w-full"},{children:t("footer.modal.lock-microphone")})),(0,o.jsx)(xa.r,ya({checked:null!==(e=null===r||void 0===r?void 0:r.lock_microphone)&&void 0!==e&&e,onChange:function(e){return i(e,"mic")},className:"".concat((null===r||void 0===r?void 0:r.lock_microphone)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===r||void 0===r?void 0:r.lock_microphone)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",ya({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(xa.r.Label,ya({className:"pr-4 w-full"},{children:t("footer.modal.lock-webcams")})),(0,o.jsx)(xa.r,ya({checked:null!==(n=null===r||void 0===r?void 0:r.lock_webcam)&&void 0!==n&&n,onChange:function(e){return i(e,"webcam")},className:"".concat((null===r||void 0===r?void 0:r.lock_webcam)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===r||void 0===r?void 0:r.lock_webcam)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",ya({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(xa.r.Label,ya({className:"pr-4 w-full"},{children:t("footer.modal.lock-screen-sharing")})),(0,o.jsx)(xa.r,ya({checked:null!==(a=null===r||void 0===r?void 0:r.lock_screen_sharing)&&void 0!==a&&a,onChange:function(e){return i(e,"screenShare")},className:"".concat((null===r||void 0===r?void 0:r.lock_screen_sharing)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===r||void 0===r?void 0:r.lock_screen_sharing)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",ya({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(xa.r.Label,ya({className:"pr-4 w-full"},{children:t("footer.modal.lock-whiteboard")})),(0,o.jsx)(xa.r,ya({checked:null!==(s=null===r||void 0===r?void 0:r.lock_whiteboard)&&void 0!==s&&s,onChange:function(e){return i(e,"whiteboard")},className:"".concat((null===r||void 0===r?void 0:r.lock_whiteboard)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===r||void 0===r?void 0:r.lock_whiteboard)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",ya({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(xa.r.Label,ya({className:"pr-4 w-full"},{children:t("footer.modal.lock-shared-notepad")})),(0,o.jsx)(xa.r,ya({checked:null!==(l=null===r||void 0===r?void 0:r.lock_shared_notepad)&&void 0!==l&&l,onChange:function(e){return i(e,"sharedNotepad")},className:"".concat((null===r||void 0===r?void 0:r.lock_shared_notepad)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===r||void 0===r?void 0:r.lock_shared_notepad)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",ya({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(xa.r.Label,ya({className:"pr-4 w-full"},{children:t("footer.modal.lock-chat")})),(0,o.jsx)(xa.r,ya({checked:null!==(c=null===r||void 0===r?void 0:r.lock_chat)&&void 0!==c&&c,onChange:function(e){return i(e,"chat")},className:"".concat((null===r||void 0===r?void 0:r.lock_chat)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===r||void 0===r?void 0:r.lock_chat)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",ya({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(xa.r.Label,ya({className:"pr-4 w-full"},{children:t("footer.modal.lock-send-message")})),(0,o.jsx)(xa.r,ya({checked:null!==(u=null===r||void 0===r?void 0:r.lock_chat_send_message)&&void 0!==u&&u,onChange:function(e){return i(e,"sendChatMsg")},className:"".concat((null===r||void 0===r?void 0:r.lock_chat_send_message)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===r||void 0===r?void 0:r.lock_chat_send_message)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",ya({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(xa.r.Label,ya({className:"pr-4 w-full"},{children:t("footer.modal.lock-chat-file-share")})),(0,o.jsx)(xa.r,ya({checked:null!==(d=null===r||void 0===r?void 0:r.lock_chat_file_share)&&void 0!==d&&d,onChange:function(e){return i(e,"chatFile")},className:"".concat((null===r||void 0===r?void 0:r.lock_chat_file_share)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===r||void 0===r?void 0:r.lock_chat_file_share)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",ya({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(xa.r.Label,ya({className:"pr-4 w-full"},{children:t("footer.modal.lock-private-chat")})),(0,o.jsx)(xa.r,ya({checked:null!==(f=null===r||void 0===r?void 0:r.lock_private_chat)&&void 0!==f&&f,onChange:function(e){return i(e,"privateChat")},className:"".concat((null===r||void 0===r?void 0:r.lock_private_chat)?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===r||void 0===r?void 0:r.lock_private_chat)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))]})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,ya({appear:!0,show:!0,as:a.Fragment},{children:(0,o.jsx)(nr.V,ya({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",ya({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,ya({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",ya({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,ya({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",ya({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",ya({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){e(ve(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,ya({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("footer.modal.lock-settings-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",ya({className:"mt-6"},{children:s()}))]}))}))]}))}))}))})})};var Sa=r(48966),ka=function(){return ka=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ka.apply(this,arguments)},_a=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Na=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ca=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Ea=(0,Yt.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e}));const Ta=function(){var e=$t(),t=(0,Xt.$)().t,r=Jt(Ea),n=Ca((0,a.useState)("youtube"),2),i=n[0],s=n[1],c=Ca((0,a.useState)(!1),2),u=c[0],d=c[1],f=Ca((0,a.useState)(""),2),p=f[0],m=f[1],h=Ca((0,a.useState)(""),2),v=h[0],x=h[1],y={youtube:"rtmp://a.rtmp.youtube.com/live2/",facebook:"rtmps://live-api-s.facebook.com:443/rtmp/"};(0,a.useEffect)((function(){d("other"===i)}),[i]);var b=function(r){return void 0===r&&(r=!1),_a(void 0,void 0,void 0,(function(){var n,o,a;return Na(this,(function(i){switch(i.label){case 0:return e(ye(!1)),r?(n={task:"stop-rtmp",sid:qt.getState().session.currentRoom.sid},[4,qo("rtmp",n)]):[2];case 1:return o=i.sent(),a=t("footer.notice.rtmp-ending"),o.status||(a=o.msg),(0,l.Am)(t(a),{toastId:"rtmp-status",type:"info"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:r?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,ka({appear:!0,show:r,as:a.Fragment},{children:(0,o.jsx)(nr.V,ka({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:b},{children:(0,o.jsxs)("div",ka({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,ka({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",ka({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,ka({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",ka({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",ka({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return b()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,ka({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:t("footer.modal.rtmp-close-confirm")})),(0,o.jsx)("div",ka({className:"mt-2"},{children:(0,o.jsx)("p",ka({className:"text-sm text-gray-500"},{children:t("footer.modal.rtmp-close-msg")}))})),(0,o.jsxs)("div",ka({className:"mt-4"},{children:[(0,o.jsx)("button",ka({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return b(!0)}},{children:t("ok")})),(0,o.jsx)("button",ka({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return b(!1)}},{children:t("close")}))]}))]}))}))]}))}))}))}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,ka({appear:!0,show:!r,as:a.Fragment},{children:(0,o.jsx)(nr.V,ka({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",ka({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,ka({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",ka({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,ka({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",ka({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",ka({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){e(ye(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,ka({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:t("footer.modal.rtmp-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",ka({className:"mt-6"},{children:(0,o.jsxs)("form",ka({action:"#",method:"POST",onSubmit:function(r){return function(r){return _a(void 0,void 0,void 0,(function(){var n,o,a,s;return Na(this,(function(c){switch(c.label){case 0:return r.preventDefault(),"other"===i&&(0,Sa.isEmpty)(p)||(0,Sa.isEmpty)(v)?[2]:(n="",n="other"===i?p:y[i],(0,Sa.isURL)(n,{protocols:["rtmp","rtmps"]})?(o={task:"start-rtmp",sid:qt.getState().session.currentRoom.sid,rtmp_url:n+"/"+v},"undefined"!==typeof window.DESIGN_CUSTOMIZATION&&(o.custom_design="".concat(window.DESIGN_CUSTOMIZATION).replace(/\s/g,"")),[4,qo("rtmp",o)]):[2]);case 1:return a=c.sent(),s="footer.notice.rtmp-starting",a.status||(s=a.msg),(0,l.Am)(t(s),{toastId:"rtmp-status",type:"info"}),e(ye(!1)),[2]}}))}))}(r)}},{children:[(0,o.jsx)("div",ka({className:"s"},{children:(0,o.jsxs)("div",ka({className:"grid grid-cols-6 gap-6"},{children:[(0,o.jsxs)("div",ka({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",ka({htmlFor:"provider",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-select-provider")})),(0,o.jsxs)("select",ka({id:"provider",name:"provider",className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:function(e){return s(e.currentTarget.value)},value:i},{children:[(0,o.jsx)("option",ka({value:"youtube"},{children:"YouTube"})),(0,o.jsx)("option",ka({value:"facebook"},{children:"Facebook"})),(0,o.jsx)("option",ka({value:"other"},{children:"Other"}))]}))]})),u?(0,o.jsxs)("div",ka({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",ka({htmlFor:"stream-url",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-server-url")})),(0,o.jsx)("input",{type:"text",name:"stream-url",id:"stream-url",value:p,onChange:function(e){return m(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"})]})):null,(0,o.jsxs)("div",ka({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",ka({htmlFor:"stream-key",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-stream-key")})),(0,o.jsx)("input",{type:"text",name:"stream-key",id:"stream-key",value:v,onChange:function(e){return x(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"})]}))]}))})),(0,o.jsx)("div",ka({className:"px-4 py-3 bg-gray-50 text-right sm:px-6 mt-4"},{children:(0,o.jsx)("button",ka({type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor"},{children:t("footer.modal.rtmp-start-broadcast")}))}))]}))}))]}))}))]}))}))}))})})};var Pa=r(17969),Oa=r(96486),Aa=r(56310),Ra=function(){return Ra=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ra.apply(this,arguments)},Ia=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Fa=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ma=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Da=function(){var e=$t(),t=(0,Xt.$)().t,r=Ma((0,a.useState)(""),2),n=r[0],i=r[1],s=Ma((0,a.useState)(),2),c=s[0],u=s[1];return(0,o.jsxs)("form",Ra({method:"POST",onSubmit:function(r){return function(r){return Ia(void 0,void 0,void 0,(function(){var o,a;return Fa(this,(function(i){switch(i.label){case 0:return r.preventDefault(),(0,Oa.isEmpty)(n)?(u(t("footer.notice.external-media-player-url-required")),[2]):Aa.Z.canPlay(n)?(u(void 0),e(be(!1)),o=l.Am.loading(t("footer.notice.external-media-player-starting"),{type:"info"}),[4,qo("externalMediaPlayer",{task:"start-playback",url:n})]):(u(t("footer.notice.external-media-player-url-invalid")),[2]);case 1:return(a=i.sent()).status||l.Am.update(o,{render:t(a.msg),type:"error",isLoading:!1,autoClose:1e3}),l.Am.dismiss(o),e(be(!1)),[2]}}))}))}(r)}},{children:[(0,o.jsx)("div",Ra({className:"s"},{children:(0,o.jsx)("div",Ra({className:""},{children:(0,o.jsxs)("div",Ra({className:""},{children:[(0,o.jsx)("label",Ra({htmlFor:"stream-key",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.external-media-player-url")})),(0,o.jsx)("input",{type:"text",name:"stream-key",id:"stream-key",value:n,onChange:function(e){c&&u(void 0),i(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"}),c?(0,o.jsx)("div",Ra({className:"error-msg absolute text-xs text-red-600 py-2"},{children:c})):null]}))}))})),(0,o.jsx)("div",Ra({className:"pb-3 pt-4 bg-gray-50 text-right mt-4"},{children:(0,o.jsx)("button",Ra({type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor"},{children:t("footer.modal.external-media-player-play")}))}))]}))};var Ua=function(){return Ua=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ua.apply(this,arguments)},La=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Ba=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Wa=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Va=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};const Ga=function(){var e=(0,Xt.$)().t,t=$t(),r=Wa((0,a.useState)(),2),n=r[0],i=r[1],s=Wa((0,a.useState)(),2),c=s[0],u=s[1],d=["mp4","mp3","webm"],f=Nn({allowedFileTypes:d,maxFileSize:void 0,files:n}),p=f.isUploading,m=f.result;(0,a.useEffect)((function(){var r;if(m&&m.filePath){var n=window.PLUG_N_MEET_SERVER_URL+"/download/uploadedFile/"+m.filePath;r=n,La(void 0,void 0,void 0,(function(){var n,o;return Ba(this,(function(a){switch(a.label){case 0:return n=l.Am.loading(e("footer.notice.external-media-player-starting"),{type:"info"}),[4,qo("externalMediaPlayer",{task:"start-playback",url:r})];case 1:return(o=a.sent()).status||l.Am.update(n,{render:e(o.msg),type:"error",isLoading:!1,autoClose:1e3}),l.Am.dismiss(n),t(be(!1)),[2]}}))}))}}),[m]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",Ua({className:"ex-m-p-file-upload relative h-[80px] mt-[10px] mb-[50px]"},{children:[(0,o.jsx)("div",Ua({className:"absolute -bottom-[30px]"},{children:e("footer.modal.external-media-player-upload-supported-files",{files:d.map((function(e){return"."+e})).join(", ")})})),(0,o.jsx)("input",{type:"file",id:"chat-file",accept:d.map((function(e){return"."+e})).join(","),onChange:function(e){return function(e){var t=e.target.files;t.length&&u(Va([],Wa(t),!1))}(e)},className:"absolute w-full h-full top-0 py-[28px] px-5 border border-dashed border-primaryColor cursor-pointer rounded"})]})),(0,o.jsx)("div",Ua({className:"pb-3 pt-4 bg-gray-50 text-right mt-4"},{children:(0,o.jsx)("button",Ua({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor",disabled:p,onClick:function(){!p&&c&&i(Va([],Wa(c),!1))}},{children:e("footer.modal.external-media-player-upload-file-play")}))}))]})};var Ha=function(){return Ha=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ha.apply(this,arguments)};const za=function(e){var t=e.isActive,r=$t(),n=(0,Xt.$)().t,i=[{id:1,title:(0,o.jsx)(o.Fragment,{children:n("footer.modal.external-media-player-direct-link")}),elm:(0,o.jsx)(Da,{})},{id:2,title:(0,o.jsx)(o.Fragment,{children:n("footer.modal.external-media-player-upload-file")}),elm:(0,o.jsx)(Ga,{})}];return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,Ha({appear:!0,show:!t,as:a.Fragment},{children:(0,o.jsx)(nr.V,Ha({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",Ha({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,Ha({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Ha({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,Ha({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Ha({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Ha({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){r(be(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,Ha({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:n("footer.modal.external-media-player-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Ha({className:"mt-6"},{children:(0,o.jsxs)(Pa.O.Group,Ha({vertical:!0},{children:[(0,o.jsx)(Pa.O.List,Ha({className:"flex"},{children:i.map((function(e){return(0,o.jsx)(Pa.O,Ha({className:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}("w-full py-2 text-xs text-black font-bold leading-5 border-b-4 border-solid transition ease-in",e.selected?"border-[#004d90]":"border-[#004d90]/20")}},{children:(0,o.jsx)("div",Ha({className:"name relative inline-block"},{children:e.title}))}),e.id)}))})),(0,o.jsx)(Pa.O.Panels,Ha({className:"relative h-[calc(100%-45px)]"},{children:i.map((function(e){return(0,o.jsx)(Pa.O.Panel,Ha({className:"".concat(2===e.id||3===e.id?"polls h-full":"px-2 xl:px-4 pt-2 xl:pt-5 h-full overflow-auto scrollBar")},{children:(0,o.jsx)(o.Fragment,{children:e.elm})}),e.id)}))}))]}))}))]}))}))]}))}))}))})};var Qa=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e}));const qa=function(){var e=Jt(Qa);return(0,o.jsx)(o.Fragment,{children:e?null:(0,o.jsx)(za,{isActive:null!==e&&void 0!==e&&e})})};var $a=function(){return $a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$a.apply(this,arguments)},Ja=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Xa=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ya=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Ka=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.waiting_room_features.waiting_room_msg}),(function(e){return e}));const Za=function(){var e=(0,Xt.$)().t,t=Jt(Ka),r=Ya((0,a.useState)(null!==t&&void 0!==t?t:""),2),n=r[0],i=r[1];return(0,o.jsxs)("div",$a({className:"mb-4 text-right"},{children:[(0,o.jsx)("p",$a({className:"text-sm text-black capitalize mb-2 block text-left"},{children:e("waiting-room.update-waiting-message")})),(0,o.jsx)("textarea",{value:n,onChange:function(e){return i(e.currentTarget.value)},className:"border border-solid border-primaryColor/20 h-20 w-full block p-3 rounded-xl outline-none text-sm"}),(0,o.jsx)("button",$a({onClick:function(){return Ja(void 0,void 0,void 0,(function(){var t;return Xa(this,(function(r){switch(r.label){case 0:return(0,Oa.isEmpty)(n)?[2]:[4,qo("waitingRoom/updateMsg",{msg:n})];case 1:return(t=r.sent()).status?(0,l.Am)(e("waiting-room.updated-msg"),{type:"info"}):(0,l.Am)(e(t.msg),{type:"error"}),[2]}}))}))},className:"py-1 px-6 mt-2 rounded-xl text-white text-sm inline-block mr-0 ml-auto transition ease-in bg-primaryColor hover:bg-secondaryColor"},{children:e("waiting-room.update-msg")}))]}))};var ei=function(){return ei=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ei.apply(this,arguments)},ti=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},ri=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const ni=function(e){var t=e.waitingParticipants,r=(0,Xt.$)().t;return(0,o.jsxs)("div",ei({className:"mb-4 flex flex-wrap items-center justify-start"},{children:[(0,o.jsx)("button",ei({onClick:function(){t.forEach((function(e){return ti(void 0,void 0,void 0,(function(){var t,n;return ri(this,(function(o){switch(o.label){case 0:return t={user_id:e.userId},[4,qo("waitingRoom/approveUsers",t)];case 1:return(n=o.sent()).status||(0,l.Am)(r(n.msg),{type:"error"}),[2]}}))}))}))},className:"py-1 px-6 mr-4 rounded-xl text-white text-sm block transition ease-in bg-primaryColor hover:bg-secondaryColor"},{children:r("waiting-room.accept-all")})),(0,o.jsx)("button",ei({onClick:function(){var e=qt.getState().session,n={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id};t.forEach((function(e){return ti(void 0,void 0,void 0,(function(){var t;return ri(this,(function(o){switch(o.label){case 0:return n.user_id=e.userId,n.msg=r("notifications.you-have-reject"),n.block_user=!1,[4,qo("removeParticipant",n)];case 1:return(t=o.sent()).status||(0,l.Am)(r(t.msg),{type:"error"}),[2]}}))}))}))},className:"py-1 px-6 rounded-xl text-white text-sm block transition ease-in bg-primaryColor hover:bg-secondaryColor"},{children:r("waiting-room.reject-all")}))]}))};var oi=function(){return oi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},oi.apply(this,arguments)},ai=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},ii=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const si=function(e){var t=e.waitingParticipants,r=(0,Xt.$)().t,n=function(e,t){return ai(void 0,void 0,void 0,(function(){var n,o,a;return ii(this,(function(i){switch(i.label){case 0:return n=qt.getState().session,o={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:e,msg:r("notifications.you-have-reject"),block_user:t},[4,qo("removeParticipant",o)];case 1:return(a=i.sent()).status?(0,l.Am)(r("left-panel.menus.notice.participant-removed"),{toastId:"user-remove-status",type:"info"}):(0,l.Am)(r(a.msg),{type:"error"}),[2]}}))}))};return(0,o.jsxs)("div",oi({className:"waiting-list-wrap"},{children:[(0,o.jsx)("p",oi({className:"text-lg my-4 text-black font-bold"},{children:r("waiting-room.list-waiting-participants",{count:t.length})})),(0,o.jsx)("div",oi({className:"waiting-list scrollBar h-[130px] overflow-auto"},{children:(0,o.jsx)("div",oi({className:"waiting-list-inner"},{children:t.map((function(e){return(0,o.jsxs)("div",oi({className:"waiting-list-item mb-2 pb-2 border-b border-solid border-primaryColor w-full max-w-max"},{children:[(0,o.jsx)("p",oi({className:"text-base text-black"},{children:e.name})),(0,o.jsx)("button",oi({onClick:function(){return t=e.userId,ai(void 0,void 0,void 0,(function(){var e;return ii(this,(function(n){switch(n.label){case 0:return[4,qo("waitingRoom/approveUsers",{user_id:t})];case 1:return(e=n.sent()).status?(0,l.Am)(r("left-panel.menus.notice.user-approved",{name}),{type:"info"}):(0,l.Am)(r(e.msg),{type:"error"}),[2]}}))}));var t},className:"text-xs text-white py-[1px] px-2 rounded-lg transition ease-in bg-primaryColor hover:bg-secondaryColor"},{children:r("left-panel.approve")})),(0,o.jsx)("button",oi({onClick:function(){return n(e.userId,!1)},className:"text-xs text-white py-[1px] px-2 rounded-lg transition ease-in bg-red-600 hover:bg-red-800 ml-2"},{children:r("left-panel.reject")})),(0,o.jsx)("button",oi({onClick:function(){return n(e.userId,!0)},className:"text-xs text-white py-[1px] px-2 rounded-lg transition ease-in bg-red-600 hover:bg-red-800 ml-2"},{children:r("waiting-room.reject-and-block-user")}))]}),e.userId)}))}))}))]}))};var li=function(){return li=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},li.apply(this,arguments)},ci=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const ui=function(){var e=(0,Xt.$)().t,t=$t(),r=Jt(T.selectAll),n=ci((0,a.useState)(!0),2),i=n[0],s=n[1],l=ci((0,a.useState)(),2),c=l[0],u=l[1];(0,a.useEffect)((function(){if(r.length){var e=r.filter((function(e){return e.metadata.wait_for_approval}));u(e)}}),[r]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,li({appear:!0,show:i,as:a.Fragment},{children:(0,o.jsx)(nr.V,li({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",li({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,li({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",li({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,li({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",li({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",li({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return s(!1),void t(xe(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,li({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:e("waiting-room.modal-title")})),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",li({className:"mt-6"},{children:[(0,o.jsx)(Za,{}),(0,o.jsx)(ni,{waitingParticipants:null!==c&&void 0!==c?c:[]}),(0,o.jsx)(si,{waitingParticipants:null!==c&&void 0!==c?c:[]})]}))]}))}))]}))}))}))})};const di=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e})),t.current};var fi=r(60994),pi=r(86487),mi="user",hi=function(){return hi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hi.apply(this,arguments)},vi=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const xi=function(e){var t=e.name,r=e.id,n=vi((0,pi.c)((function(){return{type:mi,item:{name:t,id:r},collect:function(e){return{isDragging:e.isDragging(),handlerId:e.getHandlerId()}}}})),2),a=n[0].isDragging,i=n[1],s=a?.4:1;return(0,o.jsx)("div",hi({ref:i,style:{opacity:s},className:"userBox text-sm sm:text-base text-black bg-white border-b border-solid border-black/80 w-full px-2 py-1 cursor-move"},{children:t}))};var yi=function(){return yi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yi.apply(this,arguments)},bi=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},gi=function(e){var t=e.roomId,r=e.name,n=e.users,a=$t(),i=bi((0,fi.L)((function(){return{accept:mi,drop:function(e){a(It({id:e.id,roomId:t}))},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}})),2),s=i[0],l=s.canDrop,c=s.isOver,u=i[1],d=l&&c,f="#fff";return d?f="#004D90":l&&(f="#24AEF7"),(0,o.jsxs)("div",yi({ref:u,style:{backgroundColor:f},className:"roomBox scrollBar scrollBar2 overflow-hidden overflow-y-auto h-60 w-full sm:w-[13rem] lg:w-[13.2rem] xl:w-[13.75rem] mr-4 lg:mr-6 mb-2 sm:mb-6  border border-solid border-black"},{children:[(0,o.jsx)("p",yi({className:"text-sm sm:text-base  px-2 py-1 border-b-2 border-solid\n        ".concat(d||l?"text-white border-white":"text-black border-black")},{children:r})),n.map((function(e){return(0,o.jsx)("div",{children:(0,o.jsx)(xi,{name:e.name,id:e.id})},e.id)}))]}))},wi=function(){return wi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wi.apply(this,arguments)},ji=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Si=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},ki=(0,Yt.P1)((function(e){return e.breakoutRoom.droppedUser}),(function(e){return e}));const _i=function(){var e,t,r=(0,Xt.$)().t,n=$t(),i=Jt(T.selectAll),s=Jt(ki),c=ji((0,a.useState)(1),2),u=c[0],d=c[1],f=di(u),p=ji((0,a.useState)(15),2),m=p[0],h=p[1],v=ji((0,a.useState)(null!==(t=null===(e=qt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.welcome_message)&&void 0!==t?t:""),2),x=v[0],y=v[1],b=ji((0,a.useState)(),2),g=b[0],w=b[1],j=ji((0,a.useState)([]),2),S=j[0],k=j[1],_=ji(Bt(),2),N=_[0],C=_[1],E=C.isLoading,P=C.data;(0,a.useEffect)((function(){return function(){n(It({id:"",roomId:0}))}}),[n]),(0,a.useEffect)((function(){if(S.length!==i.length){var e=[];i.forEach((function(t){var r=S.filter((function(e){return e.id===t.userId}));r.length?e.push(r[0]):e.push({id:t.userId,name:t.name,roomId:0,joined:!1})})),k(e)}}),[i,S]),(0,a.useEffect)((function(){if(!(u===f||u>f)){var e=[];i.forEach((function(t){e.push({id:t.userId,name:t.name,roomId:0,joined:!1})})),k(e)}}),[i,u,f]),(0,a.useEffect)((function(){for(var e=[{id:0,name:r("breakout-room.main-room")}],t=0;t<u;t++)e.push({id:t+1,name:r("breakout-room.new-room",{num:t+1})});w(e)}),[u]),(0,a.useEffect)((function(){if(""!==s.id){var e=S.map((function(e){return e.id===s.id&&(e.roomId=s.roomId),e}));k(e)}}),[s]),(0,a.useEffect)((function(){!E&&P&&(P.status?((0,l.Am)(r("breakout-room.rooms-created"),{type:"info"}),n(ge(!1))):(0,l.Am)(r(P.msg),{type:"error"}))}),[E,P]);return(0,o.jsxs)("div",wi({className:"break-out-room-main-area"},{children:[(0,o.jsxs)("div",wi({className:"row flex flex-wrap justify-start items-end"},{children:[function(){for(var e,t,n,a,i=null!==(a=null===(n=null===(t=null===(e=qt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.room_features)||void 0===t?void 0:t.breakout_room_features)||void 0===n?void 0:n.allowed_number_rooms)&&void 0!==a?a:6,s=[],l=0;l<i;l++)s.push((0,o.jsx)("option",wi({value:l+1},{children:l+1}),l));return(0,o.jsxs)("div",wi({className:"numbers-of-room w-full sm:w-56 mb-4 sm:mr-10"},{children:[(0,o.jsx)("label",wi({className:"block text-base text-black mb-1",htmlFor:"breakout-room-number"},{children:r("breakout-room.num-rooms")})),(0,o.jsx)("select",wi({className:"w-full block outline-none border border-solid rounded p-1 h-9",id:"breakout-room-number",onChange:function(e){return d(Number(e.currentTarget.value))}},{children:s}))]}))}(),(0,o.jsxs)("div",wi({className:"room-durations w-full sm:w-56 mb-4"},{children:[(0,o.jsx)("label",wi({className:"block text-base text-black mb-1",htmlFor:"breakout-room-duration"},{children:r("breakout-room.duration")})),(0,o.jsx)("input",{className:"w-full block outline-none border border-solid rounded p-1 h-9",id:"breakout-room-duration",type:"number",value:m,onChange:function(e){return h(Number(e.currentTarget.value))}})]}))]})),(0,o.jsxs)("div",wi({className:"row flex flex-wrap justify-between items-end"},{children:[(0,o.jsxs)("div",wi({className:"room-welcome-messages w-full sm:max-w-[30.5rem] mb-4 sm:mr-10"},{children:[(0,o.jsx)("label",wi({className:"block text-base text-black mb-1",htmlFor:"breakout-room-welcome"},{children:r("breakout-room.welcome-msg")})),(0,o.jsx)("textarea",{className:"w-full block outline-none border border-solid rounded p-2 min-h-[60px]",id:"breakout-room-welcome",onChange:function(e){return y(e.currentTarget.value)},value:x})]})),(0,o.jsx)("div",wi({className:"random-room-select mb-4 mr-6"},{children:(0,o.jsx)("button",wi({className:"text-base text-primaryColor",onClick:function(){if(S&&g){var e=Si([],ji(S),!1),t=Si([],ji(g),!1);t.shift();for(var r=0;r<e.length;r++){var n=Math.floor(Math.random()*t.length);e[r].roomId=t[n].id}k(e)}}},{children:r("breakout-room.random-selection")}))}))]})),(0,o.jsx)("div",wi({className:"draggable-room-area overflow-hidden clear-both flex flex-wrap"},{children:null===g||void 0===g?void 0:g.map((function(e){return(0,o.jsx)("div",wi({className:"room-box-wrap w-[calc(50%-6px)] m-[3px] sm:m-0 sm:w-auto"},{children:(0,o.jsx)(gi,{roomId:e.id,name:e.name,users:S.filter((function(t){return t.roomId===e.id}))})}),e.id)}))})),(0,o.jsx)("div",wi({className:"pb-3 pt-4 bg-gray-50 text-right mt-4"},{children:(0,o.jsx)("button",wi({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor",onClick:function(){var e=[];(null===g||void 0===g||g.forEach((function(t){if(0!==t.id){var r=S.filter((function(e){return e.roomId===t.id}));if(r.length){var n={id:"".concat(t.id),title:t.name,users:r,duration:m,started:!1,created:Date.now()};e.push(n)}}})),e.length)?N({duration:m,welcome_msg:x,rooms:e}):(0,l.Am)(r("breakout-room.need-one-user"),{type:"error"})}},{children:r("breakout-room.start")}))}))]}))};var Ni=function(){return Ni=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ni.apply(this,arguments)},Ci=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Ei=function(){var e=(0,Xt.$)().t,t=Ci((0,a.useState)(""),2),r=t[0],n=t[1],i=Ci((0,a.useState)(!1),2),s=i[0],c=i[1],u=Ci(zt(),2),d=u[0],f=u[1],p=f.isLoading,m=f.data;(0,a.useEffect)((function(){c(!!p)}),[p]),(0,a.useEffect)((function(){m&&(m.status?((0,l.Am)(e("breakout-room.broadcast-msg-success"),{type:"info"}),n("")):(0,l.Am)(e(m.msg),{type:"error"}))}),[m]);return(0,o.jsxs)("div",Ni({className:"broadcasting-message pb-4 mb-4 border-b border-solid border-primaryColor/50 flex flex-wrap items-end"},{children:[(0,o.jsx)("textarea",{value:r,onChange:function(e){return n(e.currentTarget.value)},className:"w-full sm:w-[calc(100%-12rem)] block outline-none border border-solid border-primaryColor rounded p-2 min-h-[60px]"}),(0,o.jsx)("button",Ni({onClick:function(){""!==r&&d({msg:r})},disabled:s,className:"inline-flex w-44 sm:ml-4 mt-2 justify-center px-3 py-1 text-sm font-medium text-white bg-primaryColor rounded-md hover:bg-secondaryColor focus:outline-none"},{children:e("breakout-room.broadcast-msg")}))]}))};var Ti=r(6512),Pi=function(){return Pi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pi.apply(this,arguments)},Oi=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Ai=function(e){var t=e.breakoutRoomId,r=(0,Xt.$)().t,n=Oi(Gt(),2),i=n[0],s=n[1],c=s.isLoading,u=s.data,d=Oi((0,a.useState)(!1),2),f=d[0],p=d[1];(0,a.useEffect)((function(){p(!!c)}),[c]),(0,a.useEffect)((function(){u&&(u.status?(0,l.Am)(r("breakout-room.room-ended"),{type:"info"}):(0,l.Am)(r(u.msg),{type:"error"}))}),[u]);return(0,o.jsx)("div",Pi({className:"end-room-btn"},{children:(0,o.jsx)("button",Pi({className:"text-center py-1 px-3 mt-1 text-xs transition ease-in bg-brandRed hover:bg-brandRed/90 text-white font-semibold rounded-lg",onClick:function(){i(t)},disabled:f},{children:r("breakout-room.end-room")}))}))};var Ri=function(){return Ri=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ri.apply(this,arguments)};const Ii=function(e){var t=e.users,r=(0,Xt.$)().t;return(0,o.jsx)("div",Ri({className:""},{children:t.map((function(e){return(0,o.jsxs)("p",Ri({className:"inline-block pr-2 mr-2 border-r border-solid border-black leading-4 last:border-none last:mr-0 last:pr-0"},{children:[e.name," (",e.joined?r("breakout-room.user-joined"):r("breakout-room.not-joined"),")"]}),e.id)}))}))};var Fi=function(){return Fi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fi.apply(this,arguments)},Mi=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Di=function(e){var t=e.duration,r=e.created,n=Mi((0,a.useState)("00:00"),2),i=n[0],s=n[1];return(0,a.useEffect)((function(){var e,n,o,a=1e3*r,i=setInterval((function(){e=60*t-((Date.now()-a)/1e3|0),s((n=(n=e/60|0)<10?"0"+n:n)+":"+(o=(o=e%60|0)<10?"0"+o:o)),e<=0&&s("00:00")}),1e3);return function(){i&&clearInterval(i)}}),[t,r]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",Fi({className:"timer text-xs md:text-sm border border-solid border-primaryColor sm:py-[2px] px-3 rounded-br-lg -mt-[1px] -ml-[1px]"},{children:i}))})};var Ui=function(){return Ui=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ui.apply(this,arguments)},Li=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Bi=function(e){var t=e.breakoutRoomId,r=(0,Xt.$)().t,n=Li((0,a.useState)(!1),2),i=n[0],s=n[1],c=Li((0,a.useState)(""),2),u=c[0],d=c[1],f=Li(Vt(),2),p=f[0],m=f[1],h=m.isLoading,v=m.data;(0,a.useEffect)((function(){s(!!h)}),[h]),(0,a.useEffect)((function(){var e;if(!h&&v){if(!v.status)return void(0,l.Am)(r(v.msg),{type:"error"});d(null!==(e=v.token)&&void 0!==e?e:"")}}),[v,h]),(0,a.useEffect)((function(){if(""!==u){var e=new URLSearchParams(window.location.search);e.set("access_token",u);var t=location.protocol+"//"+location.host+window.location.pathname+"?"+e.toString();window.open(t,"_blank")||(0,l.Am)(r("breakout-room.open-tab-error"),{type:"error"})}}),[u]);return(0,o.jsx)("div",Ui({className:"join-btn mr-4"},{children:(0,o.jsx)("button",Ui({className:"text-center py-1 px-3 mt-1 text-xs transition ease-in bg-primaryColor hover:bg-secondaryColor text-white font-semibold rounded-lg",onClick:function(){var e,r;p({breakout_room_id:t,user_id:null!==(r=null===(e=qt.getState().session.currentUser)||void 0===e?void 0:e.userId)&&void 0!==r?r:""})},disabled:i},{children:r("breakout-room.join")}))}))};var Wi=function(){return Wi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wi.apply(this,arguments)},Vi=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Gi=function(e){var t=e.breakoutRoomId,r=(0,Xt.$)().t,n=Vi((0,a.useState)(5),2),i=n[0],s=n[1],c=Vi((0,a.useState)(!1),2),u=c[0],d=c[1],f=Vi(Wt(),2),p=f[0],m=f[1],h=m.isLoading,v=m.data;(0,a.useEffect)((function(){d(!!h)}),[h]),(0,a.useEffect)((function(){v&&(v.status?(0,l.Am)(r("breakout-room.duration-extended"),{type:"info"}):(0,l.Am)(r(v.msg),{type:"error"}))}),[v]);return(0,o.jsxs)("div",Wi({className:"extend-time-wrapper flex items-center mr-2 mb-2"},{children:[(0,o.jsx)("input",{value:i,onChange:function(e){return s(Number(e.currentTarget.value))},placeholder:r("breakout-room.extend-duration"),className:"w-full max-w-[100px] sm:max-w-[140px] block outline-none border border-solid border-secondaryColor rounded py-1 px-2 h-9"}),(0,o.jsx)("button",Wi({onClick:function(){p({breakout_room_id:t,duration:i})},disabled:u,className:"ml-2 sm:ml-4 w-[180px] text-center py-1 px-3 h-8 text-xs transition ease-in bg-primaryColor hover:bg-secondaryColor text-white font-semibold rounded-lg"},{children:r("breakout-room.extend-duration")}))]}))};var Hi=function(){return Hi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hi.apply(this,arguments)};const zi=function(){var e=(0,Xt.$)().t,t=Lt(void 0,{pollingInterval:1e4}),r=t.data,n=t.isLoading,i=(0,a.useMemo)((function(){if(r&&r.rooms){var e=r.rooms.slice();return e.sort((function(e,t){return t.title.localeCompare(e.title)})),e}}),[r]),s=function(t){return(0,o.jsx)(Ti.p,{children:function(r){var n=r.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Ti.p.Button,Hi({className:"flex w-full justify-between rounded-lg transition ease-in bg-secondaryColor px-4 py-2 text-left text-sm font-medium text-white hover:bg-primaryColor outline-none"},{children:[(0,o.jsx)("p",{children:t.title}),(0,o.jsxs)("div",Hi({className:"flex items-center"},{children:[t.started?(0,o.jsx)(Di,{duration:t.duration,created:t.created}):e("breakout-room.not-started"),(0,o.jsx)("svg",Hi({xmlns:"http://www.w3.org/2000/svg",className:"".concat(n?"rotate-180 transform":""," h-5 w-5 ml-6 text-white"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2"},{children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}))]}))]})),(0,o.jsxs)(Ti.p.Panel,Hi({className:"sm:px-4 py-6 text-sm text-gray-500"},{children:[(0,o.jsxs)("div",Hi({className:"row flex flex-wrap items-center justify-between mb-4"},{children:[(0,o.jsx)(Gi,{breakoutRoomId:t.id}),(0,o.jsxs)("div",Hi({className:"row flex mb-2"},{children:[(0,o.jsx)(Bi,{breakoutRoomId:t.id}),(0,o.jsx)(Ai,{breakoutRoomId:t.id})]}))]})),(0,o.jsx)(Ii,{users:t.users})]}))]})}})};return(0,o.jsxs)("div",Hi({className:"breakout-room-list-wrapper min-h-[90px] relative"},{children:[n?(0,o.jsx)("div",Hi({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Hi({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null,null===i||void 0===i?void 0:i.map((function(e){return(0,o.jsx)("div",Hi({className:"breakout-room-list-item my-1"},{children:s(e)}),e.id)}))]}))};var Qi=function(){return Qi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qi.apply(this,arguments)},qi=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const $i=function(){var e=(0,Xt.$)().t,t=$t(),r=qi((0,a.useState)(!1),2),n=r[0],i=r[1],s=qi(Ht(),2),c=s[0],u=s[1],d=u.isLoading,f=u.data;(0,a.useEffect)((function(){i(!!d)}),[d]),(0,a.useEffect)((function(){f&&(f.status?((0,l.Am)(e("breakout-room.end-all-success"),{type:"info"}),t(ge(!1))):(0,l.Am)(e(f.msg),{type:"error"}))}),[f]);return(0,o.jsxs)("div",Qi({className:"manage-breakout-room-wrap"},{children:[(0,o.jsx)(Ei,{}),(0,o.jsx)(zi,{}),(0,o.jsx)("div",Qi({className:"btn pb-3 pt-4 bg-gray-50 flex items-end justify-end"},{children:(0,o.jsx)("button",Qi({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor",onClick:function(){c()},disabled:n},{children:e("breakout-room.end-all")}))}))]}))};var Ji=function(){return Ji=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ji.apply(this,arguments)},Xi=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Yi=function(){var e,t=(0,Xt.$)().t,r=$t(),n=null===(e=qt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.room_features.breakout_room_features.is_active,i=Xi((0,a.useState)(!0),2),s=i[0],l=i[1];return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,Ji({appear:!0,show:s,as:a.Fragment},{children:(0,o.jsx)(nr.V,Ji({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1},static:!1},{children:(0,o.jsxs)("div",Ji({className:"min-h-screen px-4 text-center flex items-center justify-center"},{children:[(0,o.jsx)(rr.u.Child,Ji({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Ji({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,Ji({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Ji({className:"inline-block w-full max-w-5xl h-full p-4 md:p-6 my-16 overflow-hidden text-left transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Ji({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return l(!1),void r(ge(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,Ji({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:t("breakout-room.modal-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Ji({className:"mt-2"},{children:n?(0,o.jsx)($i,{}):(0,o.jsx)(_i,{})}))]}))}))]}))}))}))})};var Ki=function(){return Ki=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ki.apply(this,arguments)},Zi=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},es=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ts=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},rs=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.display_external_link_features.is_active}),(function(e){return e}));const ns=function(){var e=$t(),t=(0,Xt.$)().t,r=Jt(rs),n=ts((0,a.useState)(""),2),i=n[0],s=n[1],c=ts((0,a.useState)(),2),u=c[0],d=c[1],f=ts((0,a.useState)({name:!1,userId:!1,role:!1,meetingId:!1}),2),p=f[0],m=f[1];return(0,o.jsx)(o.Fragment,{children:r?null:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,Ki({appear:!0,show:!r,as:a.Fragment},{children:(0,o.jsx)(nr.V,Ki({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",Ki({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,Ki({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Ki({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,Ki({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Ki({className:"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Ki({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){e(we(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,Ki({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:t("external-display-link-display.modal-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Ki({className:"mt-6"},{children:(0,o.jsxs)("form",Ki({method:"POST",onSubmit:function(r){return function(r){return Zi(void 0,void 0,void 0,(function(){var n,o,a,s,c,u,f,m,h,v,x;return es(this,(function(y){switch(y.label){case 0:r.preventDefault(),d(void 0);try{n=new URL(i)}catch(b){return d(t("external-display-link-display.link-invalid")),[2]}return o=qt.getState().session,p.name&&n.searchParams.set("name",null!==(f=null===(u=o.currentUser)||void 0===u?void 0:u.name)&&void 0!==f?f:""),p.userId&&n.searchParams.set("userId",null!==(h=null===(m=o.currentUser)||void 0===m?void 0:m.userId)&&void 0!==h?h:""),p.role&&n.searchParams.set("role",(null===(x=null===(v=o.currentUser)||void 0===v?void 0:v.metadata)||void 0===x?void 0:x.is_admin)?"admin":"participant"),p.meetingId&&n.searchParams.set("meetingId",o.currentRoom.room_id),a=l.Am.loading(t("please-wait"),{type:"info"}),s={task:"start",url:n.toString()},[4,qo("externalDisplayLink",s)];case 1:return(c=y.sent()).status||l.Am.update(a,{render:t(c.msg),type:"error",isLoading:!1,autoClose:1e3}),l.Am.dismiss(a),e(we(!1)),[2]}}))}))}(r)}},{children:[(0,o.jsxs)("div",Ki({className:""},{children:[(0,o.jsx)("label",Ki({htmlFor:"stream-key",className:"block text-sm font-medium text-gray-700"},{children:t("external-display-link-display.url")})),(0,o.jsx)("input",{type:"text",name:"stream-key",id:"stream-key",value:i,onChange:function(e){return s(e.currentTarget.value)},className:"mt-1 px-4 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"}),u?(0,o.jsx)("div",Ki({className:"error-msg text-xs text-red-600 py-2"},{children:u})):null,(0,o.jsx)("div",Ki({className:"text-xs py-2"},{children:t("external-display-link-display.note")}))]})),(0,o.jsx)("div",Ki({className:"mt-4"},{children:(0,o.jsxs)("fieldset",{children:[(0,o.jsx)("div",Ki({className:"text-base font-medium text-gray-900","aria-hidden":"true"},{children:t("external-display-link-display.send-extra-values")})),(0,o.jsxs)("div",Ki({className:"mt-4 flex flex-wrap justify-between"},{children:[(0,o.jsxs)("div",Ki({className:"w-1/2 md:w-1/4 mb-4"},{children:[(0,o.jsx)("div",Ki({className:"flex items-center w-full justify-center mb-2"},{children:(0,o.jsx)("input",{id:"name",name:"name",type:"checkbox",checked:p.name,onChange:function(){var e=Object.assign({},p);e.name=!p.name,m(e)},className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})})),(0,o.jsxs)("div",Ki({className:"text-sm w-full text-center"},{children:[(0,o.jsx)("label",Ki({htmlFor:"name",className:"font-medium text-gray-700"},{children:t("external-display-link-display.name")})),(0,o.jsx)("p",Ki({className:"text-gray-500"},{children:t("external-display-link-display.name-des")}))]}))]})),(0,o.jsxs)("div",Ki({className:"w-1/2 md:w-1/4 mb-4"},{children:[(0,o.jsx)("div",Ki({className:"flex items-center w-full justify-center mb-2"},{children:(0,o.jsx)("input",{id:"user-id",name:"user-id",type:"checkbox",checked:p.userId,onChange:function(){var e=Object.assign({},p);e.userId=!p.userId,m(e)},className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})})),(0,o.jsxs)("div",Ki({className:"text-sm w-full text-center"},{children:[(0,o.jsx)("label",Ki({htmlFor:"user-id",className:"font-medium text-gray-700"},{children:t("external-display-link-display.user-id")})),(0,o.jsx)("p",Ki({className:"text-gray-500"},{children:t("external-display-link-display.user-id-des")}))]}))]})),(0,o.jsxs)("div",Ki({className:"w-1/2 md:w-1/4 mb-4"},{children:[(0,o.jsx)("div",Ki({className:"flex items-center w-full justify-center mb-2"},{children:(0,o.jsx)("input",{id:"user-role",name:"user-role",type:"checkbox",checked:p.role,onChange:function(){var e=Object.assign({},p);e.role=!p.role,m(e)},className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})})),(0,o.jsxs)("div",Ki({className:"text-sm w-full text-center"},{children:[(0,o.jsx)("label",Ki({htmlFor:"user-role",className:"font-medium text-gray-700"},{children:t("external-display-link-display.user-role")})),(0,o.jsx)("p",Ki({className:"text-gray-500"},{children:t("external-display-link-display.user-role-des")}))]}))]})),(0,o.jsxs)("div",Ki({className:"w-1/2 md:w-1/4 mb-4"},{children:[(0,o.jsx)("div",Ki({className:"flex items-center w-full justify-center mb-2"},{children:(0,o.jsx)("input",{id:"meeting-id",name:"meeting-id",type:"checkbox",checked:p.meetingId,onChange:function(){var e=Object.assign({},p);e.meetingId=!p.meetingId,m(e)},className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})})),(0,o.jsxs)("div",Ki({className:"text-sm w-full text-center"},{children:[(0,o.jsx)("label",Ki({htmlFor:"meeting-id",className:"font-medium text-gray-700"},{children:t("external-display-link-display.meeting-id")})),(0,o.jsx)("p",Ki({className:"text-gray-500"},{children:t("external-display-link-display.meeting-id-des")}))]}))]}))]}))]})})),(0,o.jsx)("div",Ki({className:"pb-3 pt-4 bg-gray-50 text-right mt-4"},{children:(0,o.jsx)("button",Ki({type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primaryColor hover:bg-secondaryColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-secondaryColor"},{children:t("external-display-link-display.display")}))}))]}))}))]}))}))]}))}))}))})})};var os=function(){return os=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},os.apply(this,arguments)},as=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},is=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ss=(0,Yt.P1)((function(e){return e.bottomIconsActivity.showLockSettingsModal}),(function(e){return e})),ls=(0,Yt.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e})),cs=(0,Yt.P1)((function(e){return e.bottomIconsActivity.showRtmpModal}),(function(e){return e})),us=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.is_active}),(function(e){return e})),ds=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e})),fs=(0,Yt.P1)((function(e){return e.bottomIconsActivity.showExternalMediaPlayerModal}),(function(e){return e})),ps=(0,Yt.P1)((function(e){return e.bottomIconsActivity.showManageWaitingRoomModal}),(function(e){return e})),ms=(0,Yt.P1)((function(e){return e.bottomIconsActivity.showManageBreakoutRoomModal}),(function(e){return e})),hs=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.display_external_link_features.is_active}),(function(e){return e})),vs=(0,Yt.P1)((function(e){return e.bottomIconsActivity.showDisplayExternalLinkModal}),(function(e){return e}));const xs=function(){var e,t,r=qt.getState().session,n=$t(),a=(0,Xt.$)().t,i=Jt(ss),s=Jt(us),c=Jt(cs),u=Jt(ls),d=Jt(ds),f=Jt(fs),p=Jt(ps),m=Jt(ms),h=Jt(hs),v=Jt(vs),x=null===(t=null===(e=qt.getState().session.currentRoom)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.room_features;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",os({className:"menu relative z-10"},{children:(0,o.jsx)(Bn.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bn.v.Button,os({className:"footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-menu-horizontal primaryColor text-[3px] lg:text-[5px]"})})),(0,o.jsx)(rr.u,os({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)(Bn.v.Items,os({static:!0,className:"origin-bottom-left sm:-left-20 right-0 sm:right-auto z-[9999] absolute mt-2 w-60 bottom-[48px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(null===x||void 0===x?void 0:x.allow_rtmp)?(0,o.jsx)("div",os({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",os({className:"footer-podcast-button text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){n(ye(!0))}},{children:[u?(0,o.jsxs)("div",os({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]})):null,(0,o.jsx)("i",{className:"pnm-broadcasting text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a(u?"footer.icons.stop-rtmp-broadcasting":"footer.icons.start-rtmp-broadcasting")]}))})})):null,(0,o.jsx)("div",os({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",os({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){return as(void 0,void 0,void 0,(function(){var e,t;return is(this,(function(n){switch(n.label){case 0:return e={sid:r.currentRoom.sid,room_id:r.currentRoom.room_id,user_id:"all",muted:!0},[4,qo("muteUnmuteTrack",e)];case 1:return(t=n.sent()).status?(0,l.Am)(a("footer.notice.muted-all-microphone"),{toastId:"asked-status",type:"info"}):(0,l.Am)(a(t.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-mic-mute text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a("footer.menus.mute-all-users")]}))})})),(null===x||void 0===x?void 0:x.shared_note_pad_features.allowed_shared_note_pad)?(0,o.jsx)("div",os({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",os({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){return as(void 0,void 0,void 0,(function(){var e,t,r;return is(this,(function(o){switch(o.label){case 0:return(e=null===(r=qt.getState().session.currentRoom.metadata)||void 0===r?void 0:r.room_features.shared_note_pad_features.host)||s?[3,2]:[4,qo("etherpad/create",{})];case 1:return(t=o.sent()).status?n(fe(!0)):(0,l.Am)(a(t.msg),{type:"error"}),[3,6];case 2:return!e||s?[3,4]:[4,qo("etherpad/changeStatus",{room_id:qt.getState().session.currentRoom.room_id,is_active:!0})];case 3:return(t=o.sent()).status?n(fe(!0)):(0,l.Am)(a(t.msg),{type:"error"}),[3,6];case 4:return e&&s?[4,qo("etherpad/changeStatus",{room_id:qt.getState().session.currentRoom.room_id,is_active:!1})]:[3,6];case 5:(t=o.sent()).status?n(fe(!1)):(0,l.Am)(a(t.msg),{type:"error"}),o.label=6;case 6:return[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-notepad text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a(s?"footer.menus.disable-shared-notepad":"footer.menus.enable-shared-notepad")]}))})})):null,(null===x||void 0===x?void 0:x.external_media_player_features.allowed_external_media_player)?(0,o.jsx)("div",os({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",os({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){return as(void 0,void 0,void 0,(function(){var e;return is(this,(function(t){switch(t.label){case 0:return d?(e=l.Am.loading(a("please-wait"),{type:"info"}),[4,qo("externalMediaPlayer",{task:"end-playback"})]):(n(be(!0)),[2]);case 1:return t.sent().status?l.Am.dismiss(e):l.Am.update(e,{render:a("res.msg"),type:"error",isLoading:!1,autoClose:3e3}),[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-file-play text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a(d?"footer.menus.stop-external-media-player":"footer.menus.start-external-media-player")]}))})})):null,(null===x||void 0===x?void 0:x.display_external_link_features.is_allow)?(0,o.jsx)("div",os({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",os({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){return as(void 0,void 0,void 0,(function(){var e,t,r;return is(this,(function(o){switch(o.label){case 0:return h?(e={task:"end"},t=l.Am.loading(a("please-wait"),{type:"info"}),[4,qo("externalDisplayLink",e)]):(n(we(!0)),[2]);case 1:return(r=o.sent()).status?l.Am.dismiss(t):l.Am.update(t,{render:a(r.msg),type:"error",isLoading:!1,autoClose:3e3}),[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-display text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a(h?"footer.menus.stop-display-external-link":"footer.menus.start-display-external-link")]}))})})):null,(null===x||void 0===x?void 0:x.waiting_room_features.is_active)?(0,o.jsx)("div",os({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",os({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){n(xe(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-waiting-room text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a("footer.menus.manage-waiting-room")]}))})})):null,(null===x||void 0===x?void 0:x.breakout_room_features.is_allow)?(0,o.jsx)("div",os({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",os({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){n(ge(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-breakout-room text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a("footer.menus.manage-breakout-room")]}))})})):null,(0,o.jsx)("div",os({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",os({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){n(ve(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-lock text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),a("footer.menus.room-lock-settings")]}))})}))]}))}))]})}})})),i?(0,o.jsx)(ja,{}):null,c?(0,o.jsx)(Ta,{}):null,f?(0,o.jsx)(qa,{}):null,p?(0,o.jsx)(ui,{}):null,m?(0,o.jsx)(Yi,{}):null,v?(0,o.jsx)(ns,{}):null]})};var ys=function(){return ys=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ys.apply(this,arguments)},bs=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},gs=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ws=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},js=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),Ss=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.is_active}),(function(e){return e})),ks=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.visible}),(function(e){return e}));const _s=function(){var e,t,r,n=(0,Xt.$)().t,i=$t(),s="desktop"===qt.getState().session.userDeviceType,l=ws((0,a.useState)("primaryColor"),2),c=l[0],u=l[1],d=Jt(js),f=Jt(Ss),p=Jt(ks),m=ws((0,a.useState)(!1),2),h=m[0],v=m[1],x=null===(t=null===(e=qt.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,y=null===(r=qt.getState().session.currentUser)||void 0===r?void 0:r.isRecorder;(0,a.useEffect)((function(){i(fe(!!f))}),[f,i]),(0,a.useEffect)((function(){d?(u("secondaryColor"),qt.getState().bottomIconsActivity.isActiveWhiteboard&&i(pe(!1)),y||i(le(!1))):u("primaryColor")}),[d,i]),(0,a.useEffect)((function(){f&&i(fe(!!p))}),[p]),(0,a.useEffect)((function(){var e,t,r;if(x&&!y){var n=qt.getState().session.currentRoom;if(h||!(null===(e=n.metadata)||void 0===e?void 0:e.room_features.shared_note_pad_features.visible)){h||v(!0);var o=function(e){return bs(void 0,void 0,void 0,(function(){return gs(this,(function(t){switch(t.label){case 0:return[4,qo("changeVisibility",e)];case 1:return t.sent(),[2]}}))}))};if(d&&!(null===(t=n.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.visible)){var a={room_id:n.room_id,visible_white_board:!1,visible_notepad:!0};setTimeout((function(){o(a)}),500)}else if(!d&&(null===(r=n.metadata)||void 0===r?void 0:r.room_features.shared_note_pad_features.visible)){var i={room_id:n.room_id,visible_notepad:!1};o(i)}}else v(!0)}}),[d]);return(0,o.jsx)(o.Fragment,{children:f?(0,o.jsxs)("div",ys({className:"shared-notepad h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(s?"has-tooltip":""),onClick:function(){return bs(void 0,void 0,void 0,(function(){return gs(this,(function(e){return qt.getState().bottomIconsActivity.isActiveScreenshare||i(fe(!d)),[2]}))}))}},{children:[(0,o.jsx)("span",ys({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(d?"footer.icons.hide-shared-notepad":"footer.icons.show-shared-notepad")})),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"pnm-notepad ".concat(c," text-[12px] lg:text-[16px]")})})]})):null})};var Ns=function(){return Ns=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ns.apply(this,arguments)},Cs=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Es=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ts=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Ps=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e})),Os=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.whiteboard_features.visible}),(function(e){return e}));const As=function(){var e,t,r,n,i=(0,Xt.$)().t,s=$t(),l="desktop"===qt.getState().session.userDeviceType,c=Ts((0,a.useState)("primaryColor"),2),u=c[0],d=c[1],f=Ts((0,a.useState)(!1),2),p=f[0],m=f[1],h=Jt(Ps),v=Jt(Os),x=null===(e=qt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.room_features.whiteboard_features.allowed_whiteboard,y=null===(r=null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.is_admin,b=null===(n=qt.getState().session.currentUser)||void 0===n?void 0:n.isRecorder;(0,a.useEffect)((function(){h?(d("secondaryColor"),qt.getState().bottomIconsActivity.isActiveSharedNotePad&&s(fe(!1)),b||s(le(!1))):d("primaryColor")}),[s,h]),(0,a.useEffect)((function(){x&&(v?s(pe(!0)):v||s(pe(!1)))}),[v]),(0,a.useEffect)((function(){var e,t,r;if(y&&!b){var n=qt.getState().session.currentRoom;if(p||!(null===(e=n.metadata)||void 0===e?void 0:e.room_features.whiteboard_features.visible)){p||m(!0);var o=function(e){return Cs(void 0,void 0,void 0,(function(){return Es(this,(function(t){switch(t.label){case 0:return[4,qo("changeVisibility",e)];case 1:return t.sent(),[2]}}))}))};if(h&&!(null===(t=n.metadata)||void 0===t?void 0:t.room_features.whiteboard_features.visible)){var a={room_id:n.room_id,visible_white_board:!0,visible_notepad:!1};setTimeout((function(){o(a)}),500)}else if(!h&&(null===(r=n.metadata)||void 0===r?void 0:r.room_features.whiteboard_features.visible)){var i={room_id:n.room_id,visible_white_board:!1};o(i)}}else m(!0)}}),[h]);return(0,o.jsx)(o.Fragment,{children:x?(0,o.jsxs)("div",Ns({className:"whiteboard h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(l?"has-tooltip":""),onClick:function(){return Cs(void 0,void 0,void 0,(function(){return Es(this,(function(e){return qt.getState().bottomIconsActivity.isActiveScreenshare||s(pe(!h)),[2]}))}))}},{children:[(0,o.jsx)("span",Ns({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:i(h?"footer.icons.hide-whiteboard":"footer.icons.show-whiteboard")})),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"pnm-whiteboard ".concat(u," text-[12px] lg:text-[16px]")})})]})):null})};var Rs=r(58206),Is=function(){return Is=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Is.apply(this,arguments)},Fs=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Ms=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ds=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Us=(0,Yt.P1)((function(e){return e.breakoutRoom.receivedInvitationFor}),(function(e){return e}));const Ls=a.memo((function(e){var t=e.currentRoom,r=(0,Xt.$)().t,n=$t(),i=Jt(Us),s=Ds(Vt(),2),c=s[0],u=s[1],d=u.isLoading,f=u.data,p=Ds((0,a.useState)(""),2),m=p[0],h=p[1],v=Ds((0,a.useState)(r("breakout-room.copy").toString()),2),x=v[0],y=v[1],b=Ds((0,a.useState)(""),2),g=b[0],w=b[1],j=(0,a.useCallback)((function(){t.localParticipant.tracks.forEach((function(e){return Fs(void 0,void 0,void 0,(function(){return Ms(this,(function(r){switch(r.label){case 0:return e.track?e.track.source!==Ie.fQ.Source.Camera?[3,1]:(t.localParticipant.unpublishTrack(e.track),n(se(!1)),n(Ve("")),n(_e({type:"none"})),[3,3]):[2];case 1:return e.track.source!==Ie.fQ.Source.Microphone||e.isMuted?[3,3]:[4,e.track.unmute()];case 2:r.sent(),n(ie(!0)),r.label=3;case 3:return[2]}}))}))}))}),[t.localParticipant,n]);(0,a.useEffect)((function(){var e;if(!d&&f){if(!f.status)return void(0,l.Am)(r(f.msg),{type:"error"});w(null!==(e=f.token)&&void 0!==e?e:"")}}),[d,f]),(0,a.useEffect)((function(){if(""!==g){var e=new URLSearchParams(window.location.search);e.set("access_token",g);var t=location.protocol+"//"+location.host+window.location.pathname+"?"+e.toString(),r=window.open(t,"_blank");if(h(t),!r)return void h(t);n(Ft("")),j()}}),[g]);var S=function(){c({breakout_room_id:i,user_id:t.localParticipant.identity})},k=function(){(0,Rs.Z)(m),y(r("breakout-room.copied").toString())};return""!==i?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,Is({appear:!0,show:""!==i,as:a.Fragment},{children:(0,o.jsx)(nr.V,Is({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1},static:!1},{children:(0,o.jsxs)("div",Is({className:"min-h-screen px-4 text-center flex items-end justify-end"},{children:[(0,o.jsx)(rr.u.Child,Is({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Is({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,Is({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Is({className:"inline-block w-max h-full p-6 my-4 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg"},{children:[(0,o.jsxs)("button",Is({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return n(Ft("")),void j()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,Is({as:"h3",className:"text-base font-medium leading-6 text-gray-900 text-left mb-2"},{children:r("breakout-room.invitation-title")})),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",Is({className:"mt-2"},{children:[(0,o.jsx)("span",Is({className:"text-black text-sm"},{children:r("breakout-room.invitation-msg")})),""!==m?(0,o.jsxs)("div",Is({className:"invite-link"},{children:[(0,o.jsx)("label",Is({className:"text-black text-sm"},{children:r("breakout-room.join-text-label")})),(0,o.jsx)("input",{type:"text",readOnly:!0,value:m,className:"inline-block outline-none border border-solid rounded p-1 h-7 text-sm mx-1"}),(0,o.jsx)("button",Is({onClick:k,className:"text-center py-1 px-3 text-xs transition ease-in bg-primaryColor hover:bg-secondaryColor text-white font-semibold rounded-lg"},{children:x}))]})):null,(0,o.jsx)("div",Is({className:"button-section flex items-center justify-start"},{children:(0,o.jsx)("button",Is({className:"text-center py-1 px-3 mt-1 text-xs transition ease-in bg-primaryColor hover:bg-secondaryColor text-white font-semibold rounded-lg",onClick:S},{children:r("breakout-room.join")}))}))]}))]}))}))]}))}))}))}):null}));var Bs=function(){return Bs=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bs.apply(this,arguments)};const Ws=a.memo((function(e){var t,r,n=e.currentRoom,a=e.isRecorder,i=null===(r=null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.is_admin;return(0,o.jsx)("footer",Bs({id:"main-footer",className:"h-[55px] lg:h-[60px] px-4 shadow-footer flex items-center justify-between",style:{display:a?"none":""}},{children:(0,o.jsxs)("div",Bs({className:"footer-inner flex items-center justify-between w-full"},{children:[(0,o.jsxs)("div",Bs({className:"footer-left w-52 flex items-center"},{children:[(0,o.jsx)(ao,{currentRoom:n}),(0,o.jsx)(Oo,{currentRoom:n})]})),(0,o.jsxs)("div",Bs({className:"footer-middle flex items-center"},{children:[(0,o.jsx)(Wo,{}),(0,o.jsx)(Mo,{}),(0,o.jsx)(ua,{currentRoom:n}),(0,o.jsx)(ra,{currentRoom:n}),(0,o.jsx)(As,{}),(0,o.jsx)(_s,{}),(0,o.jsx)(va,{}),i?(0,o.jsx)(xs,{}):null]})),(0,o.jsx)("div",{className:"footer-right w-52 hidden sm:flex items-center"}),(0,o.jsx)(Ls,{currentRoom:n})]}))}))}));var Vs=function(){return Vs=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vs.apply(this,arguments)};const Gs=a.memo((function(e){var t,r,n=e.onOpenAlert,a=null===(r=null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.is_admin,i=$t(),s=(0,Xt.$)().t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(Bn.v.Items,Vs({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)("div",Vs({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",Vs({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){i(He(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-settings text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),s("header.menus.settings")]}))})})),(0,o.jsx)("div",Vs({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",Vs({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){i($e(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-keyboard text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),s("header.menus.keyboard-shortcuts")]}))})})),(0,o.jsx)("div",Vs({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",Vs({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-secondaryColor",onClick:function(){n("logout")}},{children:[(0,o.jsx)("i",{className:"pnm-logout text-primaryColor mr-2 transition ease-in group-hover:text-secondaryColor"}),s("header.menus.logout")]}))})})),a?(0,o.jsx)("div",Vs({className:"py-1",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",Vs({className:"text-red-900 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in",onClick:function(){n("end Room")}},{children:[(0,o.jsx)("i",{className:"pnm-call text-red-900 mr-2 transition ease-in "}),s("header.menus.end")]}))})})):null]}))})}));var Hs=function(){return Hs=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hs.apply(this,arguments)},zs=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Qs=(0,Yt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),qs=(0,Yt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e}));const $s=function(){var e=$t(),t=(0,Xt.$)().t,r=zs((0,a.useState)(qt.getState().roomSettings.roomVideoQuality),2),n=r[0],i=r[1];(0,a.useEffect)((function(){e(Xe(n))}),[e,n]);var s=Jt(Qs),l=Jt(qs),c=function(){e(ze(!s))},u=function(){e(Qe(!l))};return(0,o.jsx)("div",Hs({className:"mt-2"},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",Hs({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)("label",Hs({htmlFor:"quality",className:"pr-4 w-full"},{children:t("header.room-settings.video-quality")})),(0,o.jsxs)("select",Hs({id:"quality",name:"quality",className:"mt-1 block py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n,onChange:function(e){return i(Number(e.target.value))}},{children:[(0,o.jsx)("option",Hs({value:Ie.SF.LOW},{children:t("header.room-settings.low")})),(0,o.jsx)("option",Hs({value:Ie.SF.MEDIUM},{children:t("header.room-settings.medium")})),(0,o.jsx)("option",Hs({value:Ie.SF.HIGH},{children:t("header.room-settings.high")}))]}))]})),(0,o.jsxs)(xa.r.Group,{children:[(0,o.jsxs)("div",Hs({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)(xa.r.Label,Hs({className:"pr-4 w-full"},{children:t("header.room-settings.show-webcams")})),(0,o.jsx)(xa.r,Hs({checked:s,onChange:c,className:"".concat(s?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(s?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",Hs({className:"flex items-center justify-between"},{children:[(0,o.jsx)(xa.r.Label,Hs({className:"pr-4 w-full"},{children:t("header.room-settings.show-screen-share")})),(0,o.jsx)(xa.r,Hs({checked:l,onChange:u,className:"".concat(l?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(l?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))]})]})}))};var Js=function(){return Js=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Js.apply(this,arguments)},Xs=(0,Yt.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const Ys=function(){var e=$t(),t=(0,Xt.$)().t,r=Jt(Xs),n=function(){e(qe(!r))};return(0,o.jsx)("div",Js({className:"mt-2"},{children:(0,o.jsx)(xa.r.Group,{children:(0,o.jsxs)("div",Js({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)(xa.r.Label,Js({className:"pr-4 w-full"},{children:t("header.room-settings.allow-audio-notification")})),(0,o.jsx)(xa.r,Js({checked:r,onChange:n,className:"".concat(r?"bg-primaryColor":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(r?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))})}))};const Ks=[{code:"en",text:"English"},{code:"es-ES",text:"Espa\xf1ol"},{code:"fr-FR",text:"Fran\xe7ais"},{code:"pt-PT",text:"Portugu\xeas"},{code:"zh-CN",text:"\u7b80\u4f53\u4e2d\u6587"},{code:"zh-HK",text:"\u7e41\u9ad4\u4e2d\u6587"}];var Zs=function(){return Zs=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zs.apply(this,arguments)};const el=function(){var e=(0,Xt.$)(),t=e.t,r=e.i18n;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",Zs({className:"s"},{children:(0,o.jsx)("div",Zs({className:"grid"},{children:(0,o.jsxs)("div",Zs({className:"flex items-center justify-start"},{children:[(0,o.jsx)("label",Zs({htmlFor:"language",className:"w-2/5 block text-sm font-medium text-gray-700 mr-5"},{children:t("header.room-settings.language")})),(0,o.jsx)("select",Zs({id:"language",name:"language",value:r.languages[0],onChange:function(e){return r.changeLanguage(e.target.value)},className:"mt-1 block w-3/5 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:Ks.map((function(e){var t=e.code,r=e.text;return(0,o.jsx)("option",Zs({value:t},{children:r}),t)}))}))]}))}))}))})};var tl=function(){return tl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tl.apply(this,arguments)},rl=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},nl=(0,Yt.P1)((function(e){return e.roomSettings.isShowRoomSettingsModal}),(function(e){return e}));const ol=function(){var e=$t(),t=(0,Xt.$)().t,r=Jt(nl),n=rl((0,a.useState)({"header.room-settings.application":[{id:1,elm:(0,o.jsx)(el,{})}],"header.room-settings.data-savings":[{id:1,elm:(0,o.jsx)($s,{})}],"header.room-settings.notifications":[{id:1,elm:(0,o.jsx)(Ys,{})}]}),1)[0];var i=function(){return(0,o.jsx)("div",tl({className:"max-w-full"},{children:(0,o.jsxs)(Pa.O.Group,tl({vertical:!0},{children:[(0,o.jsx)(Pa.O.List,tl({className:"flex p-1 space-x-1 bg-primaryColor rounded-xl"},{children:Object.keys(n).map((function(e){return(0,o.jsx)(Pa.O,tl({className:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}("w-full py-1 text-xs sm:text-sm leading-5 font-medium text-secondaryColor rounded-lg outline-none","ring-white ring-opacity-60",e.selected?"bg-white shadow text-primaryColor":"hover:bg-white/[0.12] hover:text-white")}},{children:t(e)}),e)}))})),(0,o.jsx)(Pa.O.Panels,tl({className:"mt-2"},{children:Object.values(n).map((function(e,t){return(0,o.jsx)(Pa.O.Panel,tl({className:"bg-white rounded-xl p-3"},{children:(0,o.jsx)("ul",{children:e.map((function(e){return(0,o.jsx)("li",{children:e.elm},e.id)}))})}),t)}))}))]}))}))};return(0,o.jsx)(o.Fragment,{children:r?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,tl({appear:!0,show:r,as:a.Fragment},{children:(0,o.jsx)(nr.V,tl({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",tl({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,tl({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",tl({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,tl({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",tl({className:"inline-block w-full h-96 max-w-xl py-6 px-4 lg:px-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",tl({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){e(He(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,tl({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("header.room-settings.title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",tl({className:"mt-2"},{children:i()})),(0,o.jsx)("div",tl({className:"absolute inset-x-0 bottom-0 text-center text-xs"},{children:t("version",{pnm_version:"1.1.5",build:1657607048})}))]}))}))]}))}))}))}):null})};var al=function(){return al=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},al.apply(this,arguments)},il=(0,Yt.P1)((function(e){return e.roomSettings.isShowKeyboardShortcuts}),(function(e){return e}));const sl=function(){var e=$t(),t=(0,Xt.$)().t,r=Jt(il);return(0,o.jsx)(o.Fragment,{children:r?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,al({appear:!0,show:r,as:a.Fragment},{children:(0,o.jsx)(nr.V,al({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",al({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,al({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",al({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,al({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",al({className:"inline-block w-full max-w-xl py-6 px-4 lg:px-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",al({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){e($e(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,al({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("header.keyboard-shortcuts.title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",al({className:"mt-2"},{children:(0,o.jsxs)("table",al({className:"border-collapse border border-slate-500 w-full"},{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",al({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:(0,o.jsx)("strong",{children:t("header.keyboard-shortcuts.key-comb")})})),(0,o.jsx)("th",al({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:(0,o.jsx)("strong",{children:t("header.keyboard-shortcuts.actions")})}))]})}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",al({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + m"})),(0,o.jsx)("td",al({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base "},{children:t("header.keyboard-shortcuts.mute-unmute")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",al({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + a"})),(0,o.jsx)("td",al({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.start-audio")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",al({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + o"})),(0,o.jsx)("td",al({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.leave-audio")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",al({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + v"})),(0,o.jsx)("td",al({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.start-webcam")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",al({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + x"})),(0,o.jsx)("td",al({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.leave-webcam")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",al({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + u"})),(0,o.jsx)("td",al({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-user-list")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",al({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + c"})),(0,o.jsx)("td",al({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-chat")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",al({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + l"})),(0,o.jsx)("td",al({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-lock-settings")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",al({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + s"})),(0,o.jsx)("td",al({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-settings")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",al({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + w"})),(0,o.jsx)("td",al({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-whiteboard")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",al({className:"pl-2 border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + r"})),(0,o.jsx)("td",al({className:"pl-2 border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-hand")}))]})]})]}))}))]}))}))]}))}))}))}):null})};var ll=function(){return ll=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ll.apply(this,arguments)},cl=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},ul=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e}));const dl=function(e){var t=e.currentRoom,r=$t(),n=cl((0,a.useState)(qt.getState().roomSettings.roomAudioVolume),2),i=n[0],s=n[1],l=di(i),c=Jt(ul);(0,a.useEffect)((function(){l&&i!==l&&(c?r(Je(i)):t.participants.forEach((function(e){e.audioTracks.size>0&&e.setVolume(i)})))}),[i,l,r,c]);return(0,o.jsx)(Bn.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bn.v.Button,ll({className:"relative flex-shrink-0 p-2"},{children:(0,o.jsx)("div",ll({className:"h-4 w-4 -mt-[2px]"},{children:i>0?(0,o.jsx)("i",{className:"pnm-speaker primaryColor"}):(0,o.jsx)("i",{className:"pnm-speaker-muted primaryColor"})}))})),(0,o.jsx)(rr.u,ll({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Bn.v.Items,ll({static:!0,className:"volume-popup-wrapper origin-top-right z-10 absolute right-0 top-4 mt-2 w-64 py-5 px-2 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:(0,o.jsxs)("section",ll({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"range",min:0,max:1,step:.05,value:i,onChange:function(e){s(e.target.valueAsNumber)},className:"range flex-1"}),(0,o.jsx)("p",ll({className:"w-10 text-center text-sm"},{children:Math.round(100*i)})),(0,o.jsx)("button",ll({className:"w-5 h-5"},{children:i>0?(0,o.jsx)("i",{className:"pnm-speaker primaryColor"}):(0,o.jsx)("i",{className:"pnm-speaker-muted primaryColor"})}))]}))}))}))]})}})};var fl=function(){return fl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fl.apply(this,arguments)},pl=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const ml=function(e){var t=e.duration,r=pl((0,a.useState)("00:00"),2),n=r[0],i=r[1];return(0,a.useEffect)((function(){var e,r,n,o,a=null===(e=qt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.started_at,s=a?1e3*a:Date.now();i("00:00");var l=setInterval((function(){r=60*t-((Date.now()-s)/1e3|0),i((n=(n=r/60|0)<10?"0"+n:n)+":"+(o=(o=r%60|0)<10?"0"+o:o)),r<=0&&i("00:00")}),1e3);return function(){l&&clearInterval(l)}}),[t]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",fl({className:"timer text-xs md:text-sm border border-solid border-primaryColor sm:py-[2px] px-3 rounded-lg mt-[2px] mr-[6px]"},{children:n}))})};var hl=function(){return hl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hl.apply(this,arguments)},vl=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},xl=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},yl=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},bl=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_title}),(function(e){return e})),gl=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.room_duration}),(function(e){return e}));const wl=a.memo((function(e){var t,r,n=e.currentRoom,i=Jt(bl),s=Jt(gl),c=(0,Xt.$)().t,u=yl((0,a.useState)(""),2),d=u[0],f=u[1],p=yl((0,a.useState)(!1),2),m=p[0],h=p[1],v=yl((0,a.useState)(""),2),x=v[0],y=v[1],b=yl((0,a.useState)(""),2),g=b[0],w=b[1],j=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets",S=null!==(r=window.CUSTOM_LOGO)&&void 0!==r?r:"".concat(j,"/imgs/main-logo.png");(0,a.useEffect)((function(){i&&f(i)}),[i]);var k=function(e){return void 0===e&&(e=!1),vl(void 0,void 0,void 0,(function(){var t,r,o;return xl(this,(function(a){switch(a.label){case 0:return h(!1),e?"logout"!==g?[3,1]:(n.disconnect(),[3,3]):[2];case 1:return"end Room"!==g?[3,3]:(t=qt.getState().session,r={room_id:t.currentRoom.room_id},[4,qo("endRoom",r)]);case 2:(o=a.sent()).status||(0,l.Am)(o.msg,{type:"error"}),a.label=3;case 3:return[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("header",hl({id:"main-header",className:"relative z-[99999] h-[50px] px-4 shadow-header flex items-center justify-between bg-white"},{children:[(0,o.jsx)("div",{className:"header-before-start absolute top-0 left-[-35px] w-[300px] pointer-events-none bg-cover bg-center h-full",style:{backgroundImage:'url("'.concat(j,'/imgs/header-before2.png")')}}),(0,o.jsx)("div",hl({className:"logo w-28 relative z-20"},{children:(0,o.jsx)("div",{className:"".concat((window.CUSTOM_LOGO,"h-[45px]")," header-logo h-full bg-contain bg-no-repeat"),style:{backgroundImage:'url("'.concat(S,'")')}})})),(0,o.jsx)("div",hl({className:"middle flex-auto relative z-20"},{children:(0,o.jsx)("h2",hl({className:"header-title text-base text-black leading-[1] text-center"},{children:d}))})),(0,o.jsxs)("div",hl({className:"dark w-28 flex items-center justify-end relative z-20 -right-3"},{children:[s&&s>0?(0,o.jsx)(ml,{duration:s}):null,(0,o.jsx)(dl,{currentRoom:n}),(0,o.jsx)(Bn.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bn.v.Button,hl({className:"relative flex-shrink-0 p-2"},{children:(0,o.jsx)("div",hl({className:"h-5 w-5 rotate-90 "},{children:(0,o.jsx)("i",{className:"pnm-menu-small"})}))})),(0,o.jsx)(rr.u,hl({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Gs,{onOpenAlert:function(e){return function(e){w(e),"logout"===e?y(c("header.menus.alert.logout")):"end Room"===e&&y(c("header.menus.alert.end")),h(!0)}(e)}})}))]})}})]})),(0,o.jsx)("div",{className:"header-before-end absolute top-0 right-[-100px] w-[350px] lg:w-[380px] rotate-[156deg] pointer-events-none bg-cover bg-center h-full",style:{backgroundImage:'url("'.concat(j,'/imgs/header-before2.png")')}}),m?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,hl({appear:!0,show:m,as:a.Fragment},{children:(0,o.jsx)(nr.V,hl({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",hl({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,hl({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",hl({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,hl({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",hl({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",hl({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return k()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,hl({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:c("header.menus.alert.confirm")})),(0,o.jsx)("div",hl({className:"mt-2"},{children:(0,o.jsx)("p",hl({className:"text-sm text-gray-500"},{children:x}))})),(0,o.jsxs)("div",hl({className:"mt-4"},{children:[(0,o.jsx)("button",hl({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return k(!0)}},{children:c("ok")})),(0,o.jsx)("button",hl({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium bg-primaryColor hover:bg-secondaryColor text-white border border-transparent rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return k(!1)}},{children:c("close")}))]}))]}))}))]}))}))}))}):null]})),(0,o.jsx)(ol,{}),(0,o.jsx)(sl,{})]})}));var jl=function(){return jl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jl.apply(this,arguments)};const Sl=function(e){var t=e.participant;return(0,o.jsx)("div",jl({className:"thumb h-[22px] xl:h-[30px] w-[22px] xl:w-[30px] mr-2 rounded-full overflow-hidden bg-primaryColor flex items-center justify-center text-white text-xs xl:text-sm"},{children:t.metadata.profile_pic?(0,o.jsx)("img",{src:t.metadata.profile_pic,alt:t.name}):(0,o.jsx)(o.Fragment,{children:t.name.slice(0,2).toUpperCase()})}))};var kl=function(){return kl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kl.apply(this,arguments)};const _l=function(e){var t=e.name,r=e.isCurrentUser;return(0,o.jsxs)("p",kl({className:"text-[11px] xl:text-[13px] primaryColor"},{children:[t," ",r?" (me)":null]}))};var Nl=function(){return Nl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Nl.apply(this,arguments)};const Cl=function(e){var t=e.userId,r=Jt((function(e){return T.selectById(e,t)}));return(0,o.jsx)(o.Fragment,{children:(null===r||void 0===r?void 0:r.metadata.raised_hand)?(0,o.jsx)("div",Nl({className:"hand mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-raise-hand text-[#ffbd40] text-[10px]"})})):null})};var El=function(){return El=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},El.apply(this,arguments)},Tl=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Pl=(0,Yt.P1)((function(e){return e.roomSettings.roomAudioVolume}),(function(e){return e}));const Ol=function(e){var t=e.userId,r=e.remoteParticipant,n=Tl((0,a.useState)(1),2),i=n[0],s=n[1],l=di(i),c=Jt((function(e){return T.selectById(e,t)})),u=Jt(Pl);(0,a.useEffect)((function(){(null===r||void 0===r?void 0:r.audioTracks.size)&&s(u)}),[u,r]),(0,a.useEffect)((function(){if(l&&i!==l&&r)try{r.getVolume()!==i&&r.audioTracks.size>0&&r.setVolume(i)}catch(e){}}),[i,l,r]);return(null===c||void 0===c?void 0:c.audioTracks)?c.isMuted?(0,o.jsx)("div",El({className:"mic muted mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute secondaryColor text-[10px]"})})):r?(0,o.jsx)("div",El({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)(Bn.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bn.v.Button,{children:(0,o.jsx)("i",{className:"pnm-mic-unmute secondaryColor text-[10px]"})}),(0,o.jsx)(rr.u,El({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100 relative z-10",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Bn.v.Items,El({static:!0,className:"volume-popup-wrapper origin-top-right z-10 absolute -right-6 -top-2 mt-2 w-48 xl:w-60 py-5 px-2 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:(0,o.jsxs)("section",El({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"range",min:0,max:1,step:.05,value:i,onChange:function(e){s(e.target.valueAsNumber)},className:"range flex-1"}),(0,o.jsx)("p",El({className:"w-10 text-center text-sm"},{children:Math.round(100*i)})),(0,o.jsx)("button",El({className:"w-5 h-5"},{children:(0,o.jsx)("i",{className:"pnm-speaker primaryColor"})}))]}))}))}))]})}})})):(0,o.jsx)("div",El({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute secondaryColor text-[10px]"})})):null};var Al=function(){return Al=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Al.apply(this,arguments)};const Rl=function(e){var t=e.userId,r=Jt((function(e){return T.selectById(e,t)}));return(0,o.jsx)(o.Fragment,{children:(null===r||void 0===r?void 0:r.videoTracks)?(0,o.jsx)("div",Al({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-webcam secondaryColor text-[10px]"})})):null})};var Il=function(){return Il=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Il.apply(this,arguments)};const Fl=function(e){var t=e.closeToast,r=(0,Xt.$)().t,n=$t();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",Il({className:"text-black"},{children:r("polls.new-poll")})),(0,o.jsx)("div",Il({className:"button-section flex items-center justify-start"},{children:(0,o.jsx)("button",Il({className:"text-center py-1 px-3 mt-1 text-xs transition ease-in bg-primaryColor hover:bg-secondaryColor text-white font-semibold rounded-lg",onClick:function(){n(ce(!0)),n(Ye(1)),t&&t()}},{children:r("open")}))}))]})};var Ml,Dl,Ul=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Ll=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Bl=function(e){var t=Te.selectAll(qt.getState()),r=qt.getState().session;t.filter((function(e){return"system"!==e.from.sid})).slice(-30).map((function(t){return Ul(void 0,void 0,void 0,(function(){var n,o;return Ll(this,(function(a){return n=t,o={type:$o.USER,body:n,to:e.body.from.userId,room_sid:r.currentRoom.sid,message_id:""},rc(JSON.stringify(o)),[2]}))}))}))},Wl=function(e){qt.getState().whiteboard.requestedWhiteboardData.requested||qt.dispatch(ct({requested:!0,sendTo:e.body.from.sid}))},Vl=function(e){qt.dispatch(U(e.body.msg))},Gl=function(e){switch(e.body.type){case Jo.INFO:(0,l.Am)(e.body.msg,{toastId:"info-status",type:"info"});break;case Jo.ALERT:(0,l.Am)(e.body.msg,{toastId:"alert-status",type:"warning"})}},Hl=function(e){qt.dispatch(R({id:e.body.from.userId,changes:{visibility:e.body.msg}}))},zl=function(e){var t=JSON.parse(e.body.msg);qt.dispatch(xt(t.action)),"undefined"!==typeof t.seekTo&&qt.dispatch(yt(t.seekTo))},Ql=function(e){e.body.type===Jo.POLL_CREATED?((0,l.Am)((0,o.jsx)(Fl,{}),{toastId:"info-status",type:"info",autoClose:!1}),qt.dispatch(St.util.invalidateTags(["List","PollsStats"]))):e.body.type===Jo.NEW_POLL_RESPONSE?qt.dispatch(St.util.invalidateTags([{type:"Count",id:e.body.msg},{type:"PollDetails",id:e.body.msg}])):e.body.type===Jo.POLL_CLOSED&&qt.dispatch(St.util.invalidateTags(["List","PollsStats"]))},ql=function(e){qt.dispatch(Ft(e.body.msg)),qt.dispatch(Ut.util.invalidateTags(["My_Rooms"]))},$l=function(e){var t=JSON.parse(e);qt.dispatch(pt(t))},Jl=!1,Xl=0,Yl=!1,Kl=function(){var e=ec();(Ml=new WebSocket(e)).onopen=function(){Jl=!0,function(){var e,t,r,n,o,a,i,s,l=qt.getState().session,c=T.selectAll(qt.getState()).filter((function(e){var t;return e.sid!==(null===(t=l.currentUser)||void 0===t?void 0:t.sid)}));if(c.length){c.sort((function(e,t){return e.joinedAt-t.joinedAt}));var u=c[0],d={type:$o.SYSTEM,room_sid:l.currentRoom.sid,message_id:"",to:u.sid,body:{type:Jo.SEND_CHAT_MSGS,from:{sid:null!==(t=null===(e=l.currentUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(n=null===(r=l.currentUser)||void 0===r?void 0:r.userId)&&void 0!==n?n:""},msg:""}};rc(JSON.stringify(d));var f={type:$o.SYSTEM,room_sid:l.currentRoom.sid,message_id:"",to:u.sid,body:{type:Jo.INIT_WHITEBOARD,from:{sid:null!==(a=null===(o=l.currentUser)||void 0===o?void 0:o.sid)&&void 0!==a?a:"",userId:null!==(s=null===(i=l.currentUser)||void 0===i?void 0:i.userId)&&void 0!==s?s:""},msg:""}};rc(JSON.stringify(f))}}(),qt.dispatch(Q(!0)),Dl&&(clearInterval(Dl),Dl=0,Xl=0)},Ml.onclose=function(){Jl=!1,qt.dispatch(Q(!1)),Dl||Yl||(Dl=setInterval((function(){Xl>10&&(clearInterval(Dl),Xl=0),Ml=void 0,Kl(),Xl++}),2e3))},Ml.onerror=function(){console.log("Error in websocket")},Ml.onmessage=function(e){Zl(e)}},Zl=function(e){if(e.data){var t=void 0;try{t=JSON.parse(e.data)}catch(r){return void console.log(e.data)}"USER"===t.type?function(e,t,r){var n;if("CHAT"===e.type){e.message_id||(e.message_id=t),e.to=r,qt.dispatch(Oe(e));var o=qt.getState().bottomIconsActivity.isActiveChatPanel,a=qt.getState().roomSettings.selectedChatOption,i=qt.getState().session.currentUser,s=null!==(n="RECORDER_BOT"===(null===i||void 0===i?void 0:i.userId)||"RTMP_BOT"===(null===i||void 0===i?void 0:i.userId))&&void 0!==n&&n;o||(s?qt.dispatch(le(!0)):qt.dispatch(ke())),e.isPrivate||"public"===a?e.isPrivate&&a!==e.from.userId&&e.from.userId!==(null===i||void 0===i?void 0:i.userId)&&qt.dispatch(et({task:"ADD",id:e.from.userId})):qt.dispatch(et({task:"ADD",id:"public"}))}}(t.body,t.message_id,t.to):"SYSTEM"===t.type?function(e){switch(e.body.type){case Jo.SEND_CHAT_MSGS:Bl(e);break;case Jo.INIT_WHITEBOARD:Wl(e);break;case Jo.RENEW_TOKEN:Vl(e);break;case Jo.INFO:case Jo.ALERT:Gl(e);break;case Jo.USER_VISIBILITY_CHANGE:Hl(e);break;case Jo.EXTERNAL_MEDIA_PLAYER_EVENTS:zl(e);break;case Jo.POLL_CREATED:case Jo.POLL_CLOSED:case Jo.NEW_POLL_RESPONSE:Ql(e);break;case Jo.JOIN_BREAKOUT_ROOM:ql(e)}}(t):"WHITEBOARD"===t.type&&function(e){var t,r,n=null===(r=null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.is_presenter;"SCENE_UPDATE"===e.type?qt.dispatch(it(e.msg)):"POINTER_UPDATE"===e.type?qt.dispatch(st(e.msg)):"ADD_WHITEBOARD_FILE"===e.type?qt.dispatch(dt(e.msg)):"PAGE_CHANGE"===e.type?n||qt.dispatch(ut(Number(e.msg))):"ADD_WHITEBOARD_OFFICE_FILE"===e.type&&$l(e.msg)}(t.body)}},ec=function(){var e,t=new URL(window.PLUG_N_MEET_SERVER_URL),r=qt.getState().session,n="ws://";"https:"===t.protocol&&(n="wss://"),e=n+t.host,"/"!==t.pathname&&(e+=t.pathname);var o=r.token,a=r.currentUser,i=r.currentRoom;return e=e+"/ws?token="+o+"&roomSid="+i.sid+"&userSid="+(null===a||void 0===a?void 0:a.sid)+"&roomId="+i.room_id+"&userId="+(null===a||void 0===a?void 0:a.userId)},tc=function(){return Jl},rc=function(e){Jl&&(null===Ml||void 0===Ml||Ml.send(e))},nc=function(){return nc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nc.apply(this,arguments)},oc=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},ac=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ic=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const sc=function(e){var t,r=e.userId,n=Jt((function(e){return T.selectById(e,r)})),i=qt.getState().session,s=ic((0,a.useState)("Ask to share Microphone"),2),c=s[0],u=s[1],d=ic((0,a.useState)(""),2),f=d[0],p=d[1],m=(0,Xt.$)().t;(0,a.useEffect)((function(){0===(null===n||void 0===n?void 0:n.audioTracks)?(u(m("left-panel.menus.items.ask-to-share-microphone")),p("left-panel.menus.items.share-microphone")):(null===n||void 0===n?void 0:n.isMuted)?(u(m("left-panel.menus.items.ask-to-unmute-mic")),p("left-panel.menus.items.unmute-mic")):(null===n||void 0===n?void 0:n.audioTracks)&&(u(m("left-panel.menus.items.mute-mic")),p("mute"))}),[m,null===n||void 0===n?void 0:n.isMuted,null===n||void 0===n?void 0:n.audioTracks]);var h=function(){return oc(void 0,void 0,void 0,(function(){var e,t,r;return ac(this,(function(o){switch(o.label){case 0:return e=qt.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,user_id:null===n||void 0===n?void 0:n.userId,muted:!0},[4,qo("muteUnmuteTrack",t)];case 1:return(r=o.sent()).status?(0,l.Am)(m("left-panel.menus.notice.you-have-muted-to",{name:null===n||void 0===n?void 0:n.name}),{toastId:"asked-status",type:"info"}):(0,l.Am)(m(r.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:(null===(t=i.currentUser)||void 0===t?void 0:t.userId)!==(null===n||void 0===n?void 0:n.userId)?(0,o.jsx)("div",nc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",nc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return function(){var e,t,r,o,a;if("mute"!==f){var s={type:$o.SYSTEM,room_sid:i.currentRoom.sid,message_id:"",to:null===n||void 0===n?void 0:n.sid,body:{type:Jo.INFO,from:{sid:null!==(t=null===(e=i.currentUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(o=null===(r=i.currentUser)||void 0===r?void 0:r.userId)&&void 0!==o?o:""},msg:m("left-panel.menus.notice.asked-you-to",{name:null===(a=i.currentUser)||void 0===a?void 0:a.name})+m(f)}};rc(JSON.stringify(s)),(0,l.Am)(m("left-panel.menus.notice.you-have-asked",{name:null===n||void 0===n?void 0:n.name})+m(f),{toastId:"asked-status",type:"info"})}else h()}()}},{children:c}))}})})):null})};var lc=function(){return lc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lc.apply(this,arguments)},cc=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const uc=function(e){var t,r,n=e.userId,i=(0,Xt.$)().t,s=Jt((function(e){return T.selectById(e,n)})),c=null===(t=qt.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,u=qt.getState().session,d=cc((0,a.useState)("Ask to share Webcam"),2),f=d[0],p=d[1],m=cc((0,a.useState)(""),2),h=m[0],v=m[1];(0,a.useEffect)((function(){0===(null===s||void 0===s?void 0:s.videoTracks)?(p(i("left-panel.menus.items.ask-to-share-webcam")),v("left-panel.menus.items.share-webcam")):(p(i("left-panel.menus.items.ask-to-stop-webcam")),v("left-panel.menus.items.stop-webcam"))}),[i,null===s||void 0===s?void 0:s.videoTracks]);return(0,o.jsx)(o.Fragment,{children:(null===(r=u.currentUser)||void 0===r?void 0:r.userId)!==(null===s||void 0===s?void 0:s.userId)&&(null===c||void 0===c?void 0:c.allow_webcams)&&!c.admin_only_webcams?(0,o.jsx)("div",lc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",lc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return function(){var e,t,r,n,o,a={type:$o.SYSTEM,room_sid:u.currentRoom.sid,message_id:"",to:null===s||void 0===s?void 0:s.sid,body:{type:Jo.INFO,from:{sid:null!==(t=null===(e=u.currentUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(n=null===(r=u.currentUser)||void 0===r?void 0:r.userId)&&void 0!==n?n:""},msg:i("left-panel.menus.notice.asked-you-to",{name:null===(o=u.currentUser)||void 0===o?void 0:o.name})+i(h)}};rc(JSON.stringify(a)),(0,l.Am)(i("left-panel.menus.notice.you-have-asked",{name:null===s||void 0===s?void 0:s.name})+i(h),{toastId:"asked-status",type:"info"})}()}},{children:f}))}})})):null})};var dc=function(){return dc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dc.apply(this,arguments)},fc=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},pc=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const mc=function(e){var t=e.userId,r=Jt((function(e){return T.selectById(e,t)})),n=(0,Xt.$)().t;return(0,o.jsx)("div",dc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",dc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return fc(void 0,void 0,void 0,(function(){var e,t;return pc(this,(function(o){switch(o.label){case 0:return e={user_id:null===r||void 0===r?void 0:r.userId,task:(null===r||void 0===r?void 0:r.metadata.is_presenter)?"demote":"promote"},[4,qo("switchPresenter",e)];case 1:return(t=o.sent()).status?(0,l.Am)(n("left-panel.menus.notice.presenter-changed"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(n(t.msg),{toastId:"lock-setting-status",type:"error"}),[2]}}))}))}},{children:(null===r||void 0===r?void 0:r.metadata.is_presenter)?n("footer.icons.demote-presenter"):n("footer.icons.promote-presenter")}))}})}))};var hc=function(){return hc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hc.apply(this,arguments)},vc=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},xc=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const yc=function(e){var t=e.userId,r=Jt((function(e){return T.selectById(e,t)})),n=$t(),a=(0,Xt.$)().t;return(0,o.jsx)(o.Fragment,{children:(null===r||void 0===r?void 0:r.metadata.raised_hand)?(0,o.jsx)("div",hc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",hc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return vc(void 0,void 0,void 0,(function(){var e,t,o;return xc(this,(function(i){switch(i.label){case 0:return e=qt.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,msg_type:Jo.OTHER_USER_LOWER_HAND,msg:null===r||void 0===r?void 0:r.userId},[4,qo("dataMessage",t)];case 1:return(o=i.sent()).status?n(ue(!1)):(0,l.Am)(a(o.msg),{type:"error"}),[2]}}))}))}},{children:a("footer.icons.lower-hand")}))}})})):null})};var bc=function(){return bc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bc.apply(this,arguments)},gc=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},wc=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const jc=function(e){var t,r=e.userId,n=null===(t=qt.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,a=(0,Xt.$)().t,i=Jt((function(e){return T.selectById(e,r)})),s=function(e){return gc(void 0,void 0,void 0,(function(){var t,r,n,o,s,c;return wc(this,(function(u){switch(u.label){case 0:switch(t=i.metadata,r=qt.getState().session,n=e,o="lock",e){case"mic":o=(null===t||void 0===t?void 0:t.lock_settings.lock_microphone)?"unlock":"lock";break;case"webcam":o=(null===t||void 0===t?void 0:t.lock_settings.lock_webcam)?"unlock":"lock";break;case"screenShare":o=(null===t||void 0===t?void 0:t.lock_settings.lock_screen_sharing)?"unlock":"lock";break;case"whiteboard":o=(null===t||void 0===t?void 0:t.lock_settings.lock_whiteboard)?"unlock":"lock";break;case"sharedNotepad":o=(null===t||void 0===t?void 0:t.lock_settings.lock_shared_notepad)?"unlock":"lock";break;case"chat":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat)?"unlock":"lock";break;case"sendChatMsg":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_send_message)?"unlock":"lock";break;case"chatFile":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_file_share)?"unlock":"lock"}return s={sid:r.currentRoom.sid,room_id:r.currentRoom.room_id,user_id:null===i||void 0===i?void 0:i.userId,service:n,direction:o},[4,qo("updateLockSettings",s)];case 1:return(c=u.sent()).status?(0,l.Am)(a("left-panel.menus.notice.applied-new-setting"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(a(c.msg),{type:"error"}),[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",bc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",bc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("mic")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_microphone)?a("left-panel.menus.items.unlock-microphone"):a("left-panel.menus.items.lock-microphone")}))}})})),(null===n||void 0===n?void 0:n.allow_webcams)&&!(null===n||void 0===n?void 0:n.admin_only_webcams)?(0,o.jsx)("div",bc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",bc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("webcam")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_webcam)?a("left-panel.menus.items.unlock-webcam"):a("left-panel.menus.items.lock-webcam")}))}})})):null,(null===n||void 0===n?void 0:n.allow_screen_share)?(0,o.jsx)("div",bc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",bc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("screenShare")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_screen_sharing)?a("left-panel.menus.items.unlock-screen-sharing"):a("left-panel.menus.items.lock-screen-sharing")}))}})})):null,(null===n||void 0===n?void 0:n.whiteboard_features.allowed_whiteboard)?(0,o.jsx)("div",bc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",bc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("whiteboard")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_whiteboard)?a("left-panel.menus.items.unlock-whiteboard"):a("left-panel.menus.items.lock-whiteboard")}))}})})):null,(null===n||void 0===n?void 0:n.shared_note_pad_features.allowed_shared_note_pad)?(0,o.jsx)("div",bc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",bc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("sharedNotepad")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_shared_notepad)?a("left-panel.menus.items.unlock-shared-notepad"):a("left-panel.menus.items.lock-shared-notepad")}))}})})):null,(null===n||void 0===n?void 0:n.chat_features.allow_chat)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",bc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",bc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("chat")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_chat)?a("left-panel.menus.items.unlock-chat"):a("left-panel.menus.items.lock-chat")}))}})})),(0,o.jsx)("div",bc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",bc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("sendChatMsg")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_chat_send_message)?a("left-panel.menus.items.unlock-send-chat-message"):a("left-panel.menus.items.lock-send-chat-message")}))}})})),n.chat_features.allow_file_upload?(0,o.jsx)("div",bc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",bc({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return s("chatFile")}},{children:(null===i||void 0===i?void 0:i.metadata.lock_settings.lock_chat_file_share)?a("left-panel.menus.items.unlock-send-file"):a("left-panel.menus.items.lock-send-file")}))}})})):null]}):null]})};var Sc=function(){return Sc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sc.apply(this,arguments)};const kc=function(e){var t=e.userId,r=e.onOpenAlert,n=(0,Xt.$)().t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",Sc({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",Sc({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){r(t,"remove")}},{children:n("left-panel.menus.items.remove-participant")}))}})}))})})};var _c=function(){return _c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_c.apply(this,arguments)};const Nc=function(e){var t=e.name,r=e.userId,n=$t(),a=(0,Xt.$)().t;return(0,o.jsx)("div",_c({className:"",role:"none"},{children:(0,o.jsx)(Bn.v.Item,{children:function(){return(0,o.jsx)("button",_c({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-primaryColor hover:text-white",onClick:function(){return n(le(!0)),n(Ze({name:t,userId:r})),void n(Ke(r))}},{children:a("left-panel.menus.items.private-chat")}))}})}))};var Cc=function(){return Cc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cc.apply(this,arguments)},Ec=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.default_lock_settings}),(function(e){return e}));const Tc=function(e){var t=e.userId,r=e.name,n=e.isAdmin,a=e.openRemoveParticipantAlert,i=Jt(Ec),s=qt.getState().session.currentUser,l=function(){var e,l;return(null===(e=null===s||void 0===s?void 0:s.metadata)||void 0===e?void 0:e.is_admin)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(sc,{userId:t}),(0,o.jsx)(uc,{userId:t}),(0,o.jsx)(Nc,{userId:t,name:r}),(0,o.jsx)(mc,{userId:t}),(0,o.jsx)(yc,{userId:t}),(0,o.jsx)(jc,{userId:t}),(0,o.jsx)(kc,{onOpenAlert:a,userId:t})]}):(null===(l=null===s||void 0===s?void 0:s.metadata)||void 0===l?void 0:l.is_admin)||(null===i||void 0===i?void 0:i.lock_chat)||(null===i||void 0===i?void 0:i.lock_private_chat)?!(null===i||void 0===i?void 0:i.lock_chat)&&(null===i||void 0===i?void 0:i.lock_private_chat)&&n?(0,o.jsx)(Nc,{userId:t,name:r}):null:(0,o.jsx)(Nc,{userId:t,name:r})};return(0,o.jsx)(o.Fragment,{children:null!==l()?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Bn.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bn.v.Button,Cc({className:"relative flex-shrink-0 mt-2"},{children:(0,o.jsx)("i",{className:"pnm-menu-small primaryColor opacity-50"})})),(0,o.jsx)(rr.u,Cc({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100 z-10",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Bn.v.Items,Cc({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-44 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:l()}))}))]})}})}):null})};var Pc=function(){return Pc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pc.apply(this,arguments)};const Oc=function(e){var t=e.userId,r=Jt((function(e){return T.selectById(e,t)}));return"hidden"===(null===r||void 0===r?void 0:r.visibility)?(0,o.jsx)("div",Pc({className:"visibility mr-2 cursor-pointer mt-[2px]"},{children:(0,o.jsx)("i",{className:"pnm-eye-slash secondaryColor text-xs"})})):null};var Ac=function(){return Ac=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ac.apply(this,arguments)};const Rc=function(e){var t=e.userId,r=Jt((function(e){return T.selectById(e,t)}));return(null===r||void 0===r?void 0:r.metadata.is_presenter)?(0,o.jsx)("div",Ac({className:"presenter mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-presenter secondaryColor text-[10px]"})})):null};var Ic=function(){return Ic=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ic.apply(this,arguments)},Fc=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Mc=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const Dc=function(e){var t=e.userId,r=e.name,n=e.openRemoveParticipantAlert,a=Jt((function(e){return T.selectById(e,t)})),i=(0,Xt.$)().t,s=function(){return Fc(void 0,void 0,void 0,(function(){var e;return Mc(this,(function(n){switch(n.label){case 0:return[4,qo("waitingRoom/approveUsers",{user_id:t})];case 1:return(e=n.sent()).status?(0,l.Am)(i("left-panel.menus.notice.user-approved",{name:r}),{type:"info"}):(0,l.Am)(i(e.msg),{type:"error"}),[2]}}))}))},c=function(){n(t,"reject")};return(null===a||void 0===a?void 0:a.metadata.wait_for_approval)?(0,o.jsxs)("div",Ic({className:"approve-btn-wrap"},{children:[(0,o.jsx)("button",Ic({className:"text-xs text-white py-[1px] px-2 rounded-lg transition ease-in bg-primaryColor hover:bg-secondaryColor",onClick:s},{children:i("left-panel.approve")})),(0,o.jsx)("button",Ic({className:"text-xs text-white py-[1px] px-2 rounded-lg transition ease-in bg-red-600 hover:bg-red-800 ml-2",onClick:c},{children:i("left-panel.reject")}))]})):null};var Uc=function(){return Uc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Uc.apply(this,arguments)},Lc=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Bc=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Wc=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Vc=function(e){var t,r=e.participant,n=e.remoteParticipant,i=Wc((0,a.useState)(!1),2),s=i[0],c=i[1],u=Wc((0,a.useState)(0),2),d=u[0],f=u[1],p=Wc((0,a.useState)("remove"),2),m=p[0],h=p[1],v=qt.getState().session.currentUser,x=(0,Xt.$)().t,y=function(e,t){e===r.userId&&(h(t),c(!0))},b=function(e){return void 0===e&&(e=!1),Lc(void 0,void 0,void 0,(function(){var t,n,o;return Bc(this,(function(a){switch(a.label){case 0:return c(!1),e?(t=qt.getState().session,n={sid:t.currentRoom.sid,room_id:t.currentRoom.room_id,user_id:r.userId,msg:x("remove"===m?"notifications.you-have-removed":"notifications.you-have-reject"),block_user:1===d},[4,qo("removeParticipant",n)]):[2];case 1:return(o=a.sent()).status?(0,l.Am)(x("left-panel.menus.notice.participant-removed"),{toastId:"user-remove-status",type:"info"}):(0,l.Am)(x(o.msg),{type:"error"}),[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("li",Uc({className:"mb-3 w-full list-none"},{children:(0,o.jsxs)("div",Uc({className:"flex items-center justify-between relative"},{children:[(0,o.jsxs)("div",Uc({className:"left flex items-center "},{children:[(0,o.jsx)(Sl,{participant:r}),(0,o.jsx)(_l,{name:r.name,isCurrentUser:(null===v||void 0===v?void 0:v.userId)===r.userId})]})),(0,o.jsxs)("div",Uc({className:"right ml-2 flex-auto flex items-center justify-end"},{children:[(0,o.jsx)(Cl,{userId:r.userId}),(0,o.jsx)(Oc,{userId:r.userId}),(0,o.jsx)(Rc,{userId:r.userId}),(0,o.jsx)(Rl,{userId:r.userId}),(0,o.jsx)(Ol,{userId:r.userId,remoteParticipant:n}),(null===v||void 0===v?void 0:v.userId)!==r.userId?(0,o.jsx)(Tc,{userId:r.userId,name:r.name,isAdmin:r.metadata.is_admin,openRemoveParticipantAlert:y}):null]})),(null===(t=null===v||void 0===v?void 0:v.metadata)||void 0===t?void 0:t.is_admin)?(0,o.jsx)("div",Uc({className:"approve-wrap absolute right-0 top-5"},{children:(0,o.jsx)(Dc,{userId:r.userId,name:r.name,openRemoveParticipantAlert:y})})):null]}))})),(0,o.jsx)(rr.u,Uc({show:s,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(nr.V,Uc({open:s,onClose:function(){return b()},className:"remove-participants-popup fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",Uc({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",Uc({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-4 lg:px-6 py-12 lg:py-14"},{children:[(0,o.jsxs)("button",Uc({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return b()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,Uc({className:"mb-4 md:mb-6 text-sm"},{children:(0,o.jsx)("legend",Uc({className:"text-base font-medium text-gray-900"},{children:x("left-panel.menus.notice.confirm",{name})}))})),(0,o.jsxs)("div",Uc({className:"mb-10 pl-3"},{children:[(0,o.jsx)("p",Uc({className:"text-sm text-gray-500"},{children:x("left-panel.menus.notice.want-to-block")})),(0,o.jsxs)("div",Uc({className:"mt-4 pl-2 space-y-4"},{children:[(0,o.jsxs)("div",Uc({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"radio",value:"1",name:"block",id:"yes",checked:1===d,onChange:function(e){return f(Number(e.currentTarget.value))}}),(0,o.jsx)("label",Uc({htmlFor:"yes",className:"ml-3 block text-sm font-medium text-gray-700"},{children:x("yes")}))]})),(0,o.jsxs)("div",Uc({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"radio",value:"0",name:"block",id:"no",checked:0===d,onChange:function(e){return f(Number(e.currentTarget.value))}}),(0,o.jsx)("label",Uc({htmlFor:"no",className:"ml-3 block text-sm font-medium text-gray-700"},{children:x("no")}))]}))]}))]})),(0,o.jsx)("button",Uc({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return b(!0)}},{children:x("left-panel.menus.notice.remove")})),(0,o.jsx)("button",Uc({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium bg-primaryColor hover:bg-secondaryColor text-white border border-transparent rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return b(!1)}},{children:x("cancel")}))]}))]}))}))}))]})};var Gc=function(){return Gc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gc.apply(this,arguments)},Hc=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const zc=function(e){var t,r,n,i,s,l,c,u=e.currentRoom,d=Jt(T.selectAll),f=(0,Xt.$)().t,p=Hc((0,a.useState)([]),2),m=p[0],h=p[1],v=qt.getState().session,x=null===(t=v.currentUser)||void 0===t?void 0:t.userId,y=null!==(i=null===(n=null===(r=v.currentRoom.metadata)||void 0===r?void 0:r.room_features)||void 0===n?void 0:n.allow_view_other_users_list)&&void 0!==i&&i,b=null!==(c=null===(l=null===(s=v.currentUser)||void 0===s?void 0:s.metadata)||void 0===l?void 0:l.is_admin)&&void 0!==c&&c;(0,a.useEffect)((function(){var e=d.filter((function(e){return""!==e.name&&"RECORDER_BOT"!==e.userId&&"RTMP_BOT"!==e.userId}));if(e.length){var t=[];e.forEach((function(e){var r=u.participants.get(e.sid);(b||y||e.metadata.is_admin||x===e.userId)&&t.push((0,o.jsx)(Vc,{participant:e,remoteParticipant:r},e.sid))})),t.length&&h(t)}}),[d]);return m.length?(0,o.jsxs)("div",Gc({className:"inner-wrapper relative z-20"},{children:[(0,o.jsx)("div",Gc({className:"top flex items-center justify-between font-medium mb-3 xl:mb-5"},{children:(0,o.jsx)("p",Gc({className:"text-sm text-black"},{children:f("left-panel.participants",{total:m.length})}))})),(0,o.jsx)("div",Gc({className:"all-participants-wrap"},{children:m}))]})):null};var Qc=function(){return Qc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qc.apply(this,arguments)},qc=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},$c=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};const Jc=function(){var e=(0,Xt.$)().t,t=qc((0,a.useState)(!1),2),r=t[0],n=t[1],i=qc((0,a.useState)(""),2),s=i[0],c=i[1],u=qc(Et(),2),d=u[0],f=u[1],p=f.isLoading,m=f.data,h=qc((0,a.useState)([{id:1,text:""},{id:2,text:""}]),2),v=h[0],x=h[1];(0,a.useEffect)((function(){!p&&m&&(m.status?(0,l.Am)(e("polls.created-successfully"),{type:"info"}):(0,l.Am)(e(m.msg),{type:"error"}),y())}),[p,m]);var y=function(){n(!1),c(""),x([{id:1,text:""},{id:2,text:""}])},b=function(e){e.preventDefault(),d({question:s,options:v})},g=function(){return(0,o.jsxs)("form",Qc({onSubmit:b},{children:[(0,o.jsx)("label",Qc({className:"text-base text-black block mb-1"},{children:e("polls.enter-question")})),(0,o.jsx)("input",{type:"text",name:"question",value:s,required:!0,onChange:function(e){return c(e.currentTarget.value)},placeholder:"Ask a question",className:"text-black placeholder:text-black/50 py-2 px-4 text-base w-full border border-solid border-primaryColor outline-none rounded-lg mb-4"}),(0,o.jsxs)("div",Qc({className:"flex items-start justify-between pb-2 pt-4 border-t border-solid border-primaryColor/20"},{children:[(0,o.jsx)("p",Qc({className:"text-lg text-black block leading-4"},{children:e("polls.options")})),(0,o.jsx)("button",Qc({className:"h-7 px-3 leading-[28px] text-center transition ease-in bg-primaryColor hover:bg-secondaryColor text-white text-sm font-semibold rounded-lg",type:"button",onClick:function(){return e=$c([],qc(v),!1),t={id:e[e.length-1].id+1,text:""},e.push(t),void x($c([],qc(e),!1));var e,t}},{children:e("polls.add-new-option")}))]})),(0,o.jsx)("div",Qc({className:"option-field-wrapper overflow-auto h-full max-h-[345px] scrollBar scrollBar2"},{children:(0,o.jsxs)("div",Qc({className:"option-field-inner"},{children:[v.map((function(t,r){return(0,o.jsx)("div",Qc({className:"form-inline mb-4"},{children:(0,o.jsxs)("div",Qc({className:"input-wrapper w-full flex items-center"},{children:[(0,o.jsx)("input",{type:"text",required:!0,name:"opt_".concat(t.id),value:t.text,onChange:function(e){return function(e,t){var r=$c([],qc(v),!1);r[e].text=t.currentTarget.value,x($c([],qc(r),!1))}(r,e)},placeholder:e("polls.option",{count:r+1}),className:"text-black placeholder:text-black/50 py-2 px-4 text-base w-[calc(100%-36px)] border border-solid border-primaryColor outline-none rounded-lg"}),r?(0,o.jsx)("button",Qc({type:"button",className:"ml-2 p-1",onClick:function(){return function(e){var t=$c([],qc(v),!1);t.splice(e,1),x($c([],qc(t),!1))}(r)}},{children:(0,o.jsx)("i",{className:"pnm-delete w-5 h-5"})})):null]}))}),t.id)})),p?(0,o.jsx)("div",Qc({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Qc({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))})),(0,o.jsx)("div",Qc({className:"button-section flex items-center justify-end"},{children:(0,o.jsx)("button",Qc({className:"h-8 px-6 leading-[32px] text-center transition ease-in bg-primaryColor hover:bg-secondaryColor text-white text-base font-semibold rounded-lg",type:"submit"},{children:e("polls.create-poll")}))}))]}))};return(0,o.jsxs)(o.Fragment,{children:[r?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,Qc({appear:!0,show:r,as:a.Fragment},{children:(0,o.jsx)(nr.V,Qc({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",Qc({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,Qc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Qc({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,Qc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Qc({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Qc({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return y()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,Qc({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:e("polls.create")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Qc({className:"mt-6"},{children:g()}))]}))}))]}))}))}))}):null,(0,o.jsx)("button",Qc({onClick:function(){return n(!0)},className:"w-[calc(100%-20px)] ml-[10px] h-10 leading-[40px] text-center transition ease-in bg-primaryColor hover:bg-secondaryColor text-white text-base font-semibold rounded-lg mb-2"},{children:e("polls.create")}))]})};var Xc=function(){return Xc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xc.apply(this,arguments)},Yc=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Kc=function(e){var t=e.pollId,r=_t(t),n=r.data,i=r.isLoading,s=Yc((0,a.useState)(0),2),l=s[0],c=s[1],u=(0,Xt.$)().t;return(0,a.useEffect)((function(){var e;!i&&n&&n.status&&c(null!==(e=n.total_responses)&&void 0!==e?e:0)}),[n,i]),(0,o.jsxs)("div",Xc({className:"total-vote rounded-bl-lg bg-secondaryColor absolute top-0 right-0 text-white text-[10px] py-1 px-3 uppercase"},{children:[(0,o.jsxs)("strong",{children:[u("polls.total"),": "]})," ",l]}))};var Zc=function(){return Zc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zc.apply(this,arguments)},eu=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const tu=function(e){var t=e.onCloseForm,r=e.pollId,n=(0,Xt.$)().t,i=eu((0,a.useState)(!0),2),s=i[0],c=i[1],u=eu((0,a.useState)(0),2),d=u[0],f=u[1],p=eu(Tt(),2),m=p[0],h=p[1],v=h.isLoading,x=h.data,y=kt(void 0,{selectFromResult:function(e){var t=e.data;return{post:null===t||void 0===t?void 0:t.polls.find((function(e){return e.id===r}))}}}).post;(0,a.useEffect)((function(){!v&&x&&(x.status?(0,l.Am)(n("polls.response-added"),{type:"info"}):(0,l.Am)(n(x.msg),{type:"error"}),b())}),[v,x]);var b=function(){c(!1),t()},g=function(e){var t,n,o,a;e.preventDefault(),0!==d&&m({poll_id:r,user_id:null!==(n=null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.userId)&&void 0!==n?n:"",name:null!==(a=null===(o=qt.getState().session.currentUser)||void 0===o?void 0:o.name)&&void 0!==a?a:"",selected_option:d})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,Zc({appear:!0,show:s,as:a.Fragment},{children:(0,o.jsx)(nr.V,Zc({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",Zc({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,Zc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",Zc({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,Zc({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Zc({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Zc({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return b()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,Zc({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:n("polls.submit-vote-form-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",Zc({className:"mt-2"},{children:(0,o.jsxs)("form",Zc({onSubmit:g},{children:[(0,o.jsxs)("label",Zc({className:"text-base text-black block mb-2 pb-1 border-b border-solid border-primaryColor/20"},{children:[(0,o.jsx)("span",Zc({className:"text-primaryColor"},{children:"Q:"}))," ",null===y||void 0===y?void 0:y.question]})),(0,o.jsxs)("div",Zc({className:""},{children:[(0,o.jsx)("p",Zc({className:"text-base text-black block mb-2 pb-1 border-b border-solid border-primaryColor/20"},{children:n("polls.select-option")})),(0,o.jsxs)("div",Zc({className:"mb-2 relative min-h-[75px]"},{children:[null===y||void 0===y?void 0:y.options.map((function(e){return(0,o.jsxs)("div",Zc({className:"flex items-center"},{children:[(0,o.jsx)("input",{type:"radio",id:"option-".concat(e.id),value:e.id,name:"option-".concat(e.id),checked:d===e.id,onChange:function(e){return f(Number(e.currentTarget.value))}}),(0,o.jsx)("label",Zc({className:"ml-2",htmlFor:"option-".concat(e.id)},{children:e.text}))]}),e.id)})),v?(0,o.jsx)("div",Zc({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Zc({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))]})),(0,o.jsx)("div",Zc({className:"button-section flex items-center justify-end"},{children:(0,o.jsx)("button",Zc({className:"h-7 px-6 leading-[28px] text-center transition ease-in bg-primaryColor hover:bg-secondaryColor text-white text-base font-semibold rounded-lg",type:"submit"},{children:n("polls.submit")}))}))]}))}))]}))}))]}))}))}))})};var ru=function(){return ru=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ru.apply(this,arguments)},nu=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const ou=function(e){var t,r=e.pollId,n=(0,Xt.$)().t,i=Nt({pollId:r,userId:(null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.userId)||""}),s=i.data,l=i.isLoading,c=nu((0,a.useState)(!1),2),u=c[0],d=c[1],f=nu((0,a.useState)(!1),2),p=f[0],m=f[1];(0,a.useEffect)((function(){!l&&s&&s.status&&d(!!(s.voted&&s.voted>0))}),[s,l]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",ru({className:"has-voted"},{children:u?(0,o.jsx)("p",ru({className:"absolute left-2 bottom-2 text-xs"},{children:n("polls.you-voted")})):(0,o.jsx)("button",ru({className:"absolute left-0 bottom-0 transition ease-in bg-primaryColor hover:bg-secondaryColor text-[10px] text-white pt-1 pb-[2px] px-3 uppercase rounded-tr-lg",onClick:function(){m(!0)}},{children:n("polls.vote")}))})),p?(0,o.jsx)(tu,{onCloseForm:function(){m(!1)},pollId:r}):null]})};var au=r(97762),iu=function(){return iu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},iu.apply(this,arguments)},su=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const lu=function(e){var t=e.pollId,r=e.onCloseViewDetails,n=su((0,a.useState)(!0),2),i=n[0],s=n[1],c=(0,Xt.$)().t,u=kt(void 0,{selectFromResult:function(e){var r=e.data;return{post:null===r||void 0===r?void 0:r.polls.find((function(e){return e.id===t}))}}}).post,d=Ct(t).data,f=su(Pt(),2),p=f[0],m=f[1],h=m.isLoading,v=m.data,x=(0,a.useMemo)((function(){var e={};(null===d||void 0===d?void 0:d.responses.all_respondents)&&""!==(null===d||void 0===d?void 0:d.responses.all_respondents)&&JSON.parse(null===d||void 0===d?void 0:d.responses.all_respondents).forEach((function(t){var r=t.split(":");"undefined"===typeof e[r[1]]&&(e[r[1]]=[]),e[r[1]].push(r[2])}));return e}),[d]);(0,a.useEffect)((function(){!h&&v&&(v.status?(0,l.Am)(c("polls.end-poll-success"),{type:"info"}):(0,l.Am)(c(v.msg),{type:"error"}))}),[h,v]);var y=function(){s(!1),r()},b=function(){p({poll_id:t})},g=function(e){return"undefined"!==typeof(null===d||void 0===d?void 0:d.responses[e+"_count"])?null===d||void 0===d?void 0:d.responses[e+"_count"]:0};return(0,o.jsx)(o.Fragment,{children:i?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,iu({appear:!0,show:i,as:a.Fragment},{children:(0,o.jsx)(nr.V,iu({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",iu({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,iu({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",iu({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,iu({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",iu({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",iu({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return y()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,iu({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:c("polls.view-details-title")})),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",iu({className:"mt-2"},{children:[(0,o.jsxs)("div",iu({className:"headline flex flex-wrap pb-5"},{children:[(0,o.jsxs)("p",iu({className:"w-full text-lg font-bold text-black capitalize mb-2 pb-1 border-b border-solid border-primaryColor/20"},{children:[(0,o.jsx)("span",iu({className:"text-primaryColor"},{children:"Q: "})),null===u||void 0===u?void 0:u.question]})),(0,o.jsx)("p",iu({className:"w-full text-base"},{children:c("polls.total-responses",{count:null===d||void 0===d?void 0:d.responses.total_resp})}))]})),(0,o.jsxs)("div",iu({className:""},{children:[(0,o.jsx)("p",iu({className:"text-base text-black block mb-2 pb-1 border-b border-solid border-primaryColor/20"},{children:c("polls.options")})),(0,o.jsxs)("div",iu({className:"relative min-h-[75px]"},{children:[null===u||void 0===u?void 0:u.options.map((function(e){return(0,o.jsx)("div",iu({className:"mb-1"},{children:(0,o.jsx)(Ti.p,{children:function(t){var r,n=t.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Ti.p.Button,iu({className:"flex w-full justify-between rounded-lg transition ease-in bg-secondaryColor px-4 py-2 text-left text-sm font-medium text-white hover:bg-primaryColor outline-none"},{children:[(0,o.jsxs)("span",{children:[e.text," (",g(e.id),")"]}),(0,o.jsx)("svg",iu({xmlns:"http://www.w3.org/2000/svg",className:"".concat(n?"rotate-180 transform":""," h-5 w-5 text-white"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2"},{children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}))]})),(0,o.jsx)(Ti.p.Panel,iu({className:"px-4 py-2 text-sm text-gray-500"},{children:(r=e.id,"undefined"!==typeof x[r]?x[r].map((function(e,t){return(0,o.jsx)("p",iu({className:"inline-block pr-2 mr-2 border-r border-solid border-black leading-4 last:border-none last:mr-0 last:pr-0"},{children:e}),t)})):null)}))]})}})}),e.id)})),h?(0,o.jsx)("div",iu({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",iu({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))]})),(0,o.jsx)("div",iu({className:"pt-10 text-right"},{children:(null===u||void 0===u?void 0:u.is_running)?(0,o.jsx)("button",iu({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none",onClick:b},{children:c("polls.end-poll")})):(0,o.jsx)("button",iu({className:"inline-flex justify-center px-3 py-1 text-sm font-medium text-white bg-primaryColor rounded-md hover:bg-secondaryColor focus:outline-none",onClick:function(){return function(){var e,t,r,n,a;if(!h){var i=qt.getState().session,s=au.renderToString((0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{children:null===u||void 0===u?void 0:u.question}),(0,o.jsx)("p",{children:c("polls.total-responses",{count:null===d||void 0===d?void 0:d.responses.total_resp})}),null===u||void 0===u?void 0:u.options.map((function(e){return(0,o.jsx)("p",{children:"".concat(e.text," (").concat(g(e.id),")")},e.id)}))]})),l={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:null!==(t=null===(e=i.currentUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(n=null===(r=i.currentUser)||void 0===r?void 0:r.userId)&&void 0!==n?n:"",name:null===(a=i.currentUser)||void 0===a?void 0:a.name},msg:s},f={type:$o.USER,room_sid:i.currentRoom.sid,message_id:"",body:l};tc()&&rc(JSON.stringify(f)),y()}}()}},{children:c("polls.publish-result")}))}))]}))]}))}))]}))}))}))}):null})};var cu=function(){return cu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},cu.apply(this,arguments)},uu=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const du=function(e){var t=e.pollId,r=e.onCloseViewResult,n=uu((0,a.useState)(!0),2),i=n[0],s=n[1],l=(0,Xt.$)().t,c=Ot(t),u=c.data,d=c.isLoading;return(0,o.jsx)(o.Fragment,{children:i?function(){var e,t,n,c;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(rr.u,cu({appear:!0,show:i,as:a.Fragment},{children:(0,o.jsx)(nr.V,cu({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:function(){return!1}},{children:(0,o.jsxs)("div",cu({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(rr.u.Child,cu({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(nr.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",cu({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(rr.u.Child,cu({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",cu({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",cu({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return s(!1),void r()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(nr.V.Title,cu({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:l("polls.view-result-title")})),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",cu({className:"mt-2"},{children:[(0,o.jsxs)("p",cu({className:"w-full text-lg font-bold text-black capitalize mb-2 pb-1 border-b border-solid border-primaryColor/20"},{children:[(0,o.jsx)("span",cu({className:"text-primaryColor"},{children:"Q: "})),null===(e=null===u||void 0===u?void 0:u.result)||void 0===e?void 0:e.question]})),(0,o.jsx)("p",cu({className:"w-full text-base"},{children:l("polls.total-responses",{count:null===(t=null===u||void 0===u?void 0:u.result)||void 0===t?void 0:t.total_responses})})),(0,o.jsxs)("div",cu({className:"pt-5"},{children:[(0,o.jsx)("p",cu({className:"text-base text-black block mb-2 pb-2 border-b border-solid border-primaryColor/20"},{children:l("polls.options")})),(0,o.jsxs)("div",cu({className:"relative min-h-[75px]"},{children:[null===(c=null===(n=null===u||void 0===u?void 0:u.result)||void 0===n?void 0:n.options)||void 0===c?void 0:c.map((function(e){return(0,o.jsxs)("p",cu({className:"relative w-full flex items-center justify-between"},{children:[(0,o.jsx)("span",cu({className:"bg-white inline-block py-1 pr-2"},{children:e.text})),(0,o.jsxs)("span",cu({className:"bg-white inline-block py-1 pl-2"},{children:["(",e.vote_count,")"]}))]}),e.id)})),d?(0,o.jsx)("div",cu({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",cu({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))]}))]}))]}))}))]}))}))}))})}():null})};var fu=function(){return fu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fu.apply(this,arguments)},pu=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const mu=function(e){var t,r,n=e.item,i=(0,Xt.$)().t,s=null===(r=null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.is_admin,l=pu((0,a.useState)(!1),2),c=l[0],u=l[1],d=pu((0,a.useState)(!1),2),f=d[0],p=d[1];return(0,o.jsxs)("div",fu({className:"poll-item relative overflow-hidden border border-solid border-primaryColor/70 px-2 py-8 rounded-lg mb-4 transition ease-in hover:shadow-md"},{children:[(0,o.jsx)("div",fu({className:"poll-title text-md text-primaryColor"},{children:n.question})),(0,o.jsx)(Kc,{pollId:n.id}),(0,o.jsx)("div",fu({className:"status absolute top-0 left-0 bg-secondaryColor text-[10px] text-white py-1 px-3 uppercase rounded-br-lg"},{children:n.is_running?i("polls.poll-running"):i("polls.poll-closed")})),(0,o.jsxs)("div",fu({className:"btn"},{children:[n.is_running?(0,o.jsx)(ou,{pollId:n.id}):null,s?(0,o.jsx)("button",fu({onClick:function(){return u(!0)},className:"absolute right-0 bottom-0 transition ease-in bg-primaryColor hover:bg-secondaryColor text-[10px] text-white pt-1 pb-[2px] px-3 uppercase rounded-tl-lg"},{children:i("polls.view-details")})):null,s||n.is_running?null:(0,o.jsx)("button",fu({onClick:function(){return p(!0)},className:"absolute right-0 bottom-0 transition ease-in bg-primaryColor hover:bg-secondaryColor text-[10px] text-white pt-1 pb-[2px] px-3 uppercase rounded-tl-lg"},{children:i("polls.view-result")}))]})),(0,o.jsxs)(o.Fragment,{children:[s&&c?(0,o.jsx)(lu,{onCloseViewDetails:function(){return u(!1)},pollId:n.id}):null,s||n.is_running||!f?null:(0,o.jsx)(du,{onCloseViewResult:function(){return p(!1)},pollId:n.id})]})]}))};var hu=function(){return hu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hu.apply(this,arguments)};const vu=function(){var e,t,r=kt(),n=r.data,i=r.isLoading,s=null===(t=null===(e=qt.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,l=(0,a.useMemo)((function(){if(n&&null!==n.polls){var e=n.polls.slice();return e.sort((function(e,t){return t.created-e.created})),e}}),[n]);return(0,o.jsx)("div",hu({className:"polls-list-wrapper relative overflow-auto scrollBar px-2 pt-2 xl:pt-3\n      ".concat(s?"h-[calc(100%-48px)]":"h-full")},{children:(0,o.jsxs)("div",hu({className:"polls-list-wrap-inner"},{children:[null===l||void 0===l?void 0:l.map((function(e){return(0,o.jsx)(mu,{item:e},e.id)})),i?(0,o.jsx)("div",hu({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",hu({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))}))};const xu=function(){var e,t,r=null===(t=null===(e=qt.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(vu,{}),r?(0,o.jsx)(Jc,{}):null]})};var yu=function(){return yu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yu.apply(this,arguments)},bu=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const gu=function(){var e,t,r=(0,Xt.$)().t,n=Qt(void 0,{pollingInterval:1e4}),i=n.data,s=n.isLoading,c=bu(Vt(),2),u=c[0],d=c[1],f=d.isLoading,p=d.data,m=bu((0,a.useState)(""),2),h=m[0],v=m[1],x=null!==(t=null===(e=qt.getState().session.currentUser)||void 0===e?void 0:e.userId)&&void 0!==t?t:"";(0,a.useEffect)((function(){var e;if(!f&&p){if(!p.status)return void(0,l.Am)(r(p.msg),{type:"error"});v(null!==(e=p.token)&&void 0!==e?e:"")}}),[f,p]),(0,a.useEffect)((function(){if(""!==h){var e=new URLSearchParams(window.location.search);e.set("access_token",h);var t=location.protocol+"//"+location.host+window.location.pathname+"?"+e.toString();window.open(t,"_blank")}}),[h]);var y=function(){var e,t,r,n;u({breakout_room_id:null!==(t=null===(e=null===i||void 0===i?void 0:i.room)||void 0===e?void 0:e.id)&&void 0!==t?t:"",user_id:null!==(n=null===(r=qt.getState().session.currentUser)||void 0===r?void 0:r.userId)&&void 0!==n?n:""})};return(0,o.jsx)("div",yu({className:"polls-list-wrapper relative overflow-auto scrollBar px-2 pt-2 xl:pt-3 h-full"},{children:(0,o.jsxs)("div",yu({className:"polls-list-wrap-inner"},{children:[function(){var e,t,n,a,s,l,c,u;return i?(0,o.jsxs)("div",yu({className:"poll-item relative overflow-hidden border border-solid border-primaryColor/70 px-2 py-8 rounded-lg mb-4 transition ease-in hover:shadow-md"},{children:[(0,o.jsx)("div",yu({className:"poll-title text-md text-primaryColor"},{children:null===(e=i.room)||void 0===e?void 0:e.title})),(0,o.jsxs)("div",yu({className:"total-vote rounded-bl-lg bg-secondaryColor absolute top-0 right-0 text-white text-[10px] py-1 px-3 uppercase"},{children:[(0,o.jsxs)("strong",{children:[r("polls.total"),": "]})," ",null===(t=i.room)||void 0===t?void 0:t.users.length]})),(null===(n=i.room)||void 0===n?void 0:n.started)?(0,o.jsx)("div",yu({className:"status absolute top-0 left-0 text-[10px] text-white"},{children:(0,o.jsx)(Di,{duration:null!==(s=null===(a=i.room)||void 0===a?void 0:a.duration)&&void 0!==s?s:5,created:null!==(c=null===(l=i.room)||void 0===l?void 0:l.created)&&void 0!==c?c:Date.now()})})):(0,o.jsx)("div",yu({className:"status absolute top-0 left-0 bg-secondaryColor text-[10px] text-white py-1 px-3 uppercase rounded-br-lg"},{children:r("breakout-room.not-started")})),(0,o.jsxs)("div",yu({className:"btn"},{children:[(0,o.jsx)("p",yu({className:"absolute left-2 bottom-2 text-xs"},{children:(null===(u=i.room)||void 0===u?void 0:u.users.filter((function(e){return!0===e.joined&&e.id===x})).length)?r("breakout-room.user-joined"):r("breakout-room.not-joined")})),(0,o.jsx)("button",yu({onClick:y,className:"absolute right-0 bottom-0 transition ease-in bg-primaryColor hover:bg-secondaryColor text-[10px] text-white pt-1 pb-[2px] px-3 uppercase rounded-tl-lg",disabled:!!f},{children:r("breakout-room.join")}))]}))]})):null}(),s?(0,o.jsx)("div",yu({className:"loading absolute text-center top-1/2 -translate-y-1/2 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",yu({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})):null]}))}))};var wu=function(){return wu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wu.apply(this,arguments)},ju=(0,Yt.P1)((function(e){return e.roomSettings.selectedTabLeftPanel}),(function(e){return e}));const Su=a.memo((function(e){var t,r=e.currentRoom,n=At().data,i=Qt().data,s=(0,Xt.$)().t,l=$t(),c=null===(t=qt.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.allow_polls,u=Jt(ju),d=(0,a.useMemo)((function(){var e,t,a=null!==(t=null===(e=null===n||void 0===n?void 0:n.stats)||void 0===e?void 0:e.total_running)&&void 0!==t?t:0,l=[{id:1,title:(0,o.jsx)(o.Fragment,{children:s("left-panel.participants-tab")}),elm:(0,o.jsx)(zc,{currentRoom:r})}];return c&&l.push({id:2,title:(0,o.jsxs)(o.Fragment,{children:[s("left-panel.polls-tab"),a>0?(0,o.jsx)("span",wu({className:"absolute -right-[20px] -top-[7px] w-5 h-5 bg-primaryColor rounded-full text-white text-[10px]"},{children:null!==a&&void 0!==a?a:0})):null]}),elm:(0,o.jsx)(xu,{})}),(null===i||void 0===i?void 0:i.status)&&l.push({id:3,title:(0,o.jsx)(o.Fragment,{children:s("left-panel.breakout-room-tab")}),elm:(0,o.jsx)(gu,{})}),l}),[n,i]);return(0,o.jsxs)("div",wu({id:"main-left-panel",className:"participants-wrapper relative z-10 left-0 top-0 h-full w-[330px] multi-gradient"},{children:[(0,o.jsxs)("div",wu({className:"hidden md:inline-block close absolute z-10 -right-[14px] top-1 w-6 h-6 rounded-full border border-solid border-primaryColor bg-white cursor-pointer",onClick:function(){l(ce(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block w-[18px] h-[1px] bg-primaryColor absolute rotate-45 top-[11px] left-[2px]"}),(0,o.jsx)("span",{className:"inline-block w-[18px] h-[1px] bg-primaryColor absolute -rotate-45 top-[11px] right-[2px]"})]})),(0,o.jsxs)(Pa.O.Group,wu({vertical:!0,selectedIndex:u,onChange:function(e){l(Ye(e))}},{children:[(0,o.jsx)(Pa.O.List,wu({className:"flex"},{children:d.map((function(e){return(0,o.jsx)(Pa.O,wu({className:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}("w-full py-2 text-xs text-black font-bold leading-5 border-b-4 border-solid transition ease-in",e.selected?"border-[#004d90]":"border-[#004d90]/20")}},{children:(0,o.jsx)("div",wu({className:"name relative inline-block"},{children:e.title}))}),e.id)}))})),(0,o.jsx)(Pa.O.Panels,wu({className:"relative h-[calc(100%-45px)]"},{children:d.map((function(e){return(0,o.jsx)(Pa.O.Panel,wu({className:"".concat(2===e.id||3===e.id?"polls h-full":"px-2 xl:px-4 pt-2 xl:pt-5 h-full overflow-auto scrollBar")},{children:(0,o.jsx)(o.Fragment,{children:e.elm})}),e.id)}))}))]}))]}))}));var ku=r(91036),_u=r.n(ku),Nu=function(){return Nu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Nu.apply(this,arguments)},Cu=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Eu=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Tu=(0,Yt.P1)((function(e){return e.roomSettings.selectedChatOption}),(function(e){return e}));const Pu=function(e){var t,r,n,i,s=e.isChatServiceReady,c=e.lockSendFile,u=e.currentRoom,d=(0,a.useRef)(null),f=(0,Xt.$)().t,p=Cu((0,a.useState)(),2),m=p[0],h=p[1],v=Jt(Tu),x=null===(t=qt.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.chat_features,y=null!==(n=null===(r=null===x||void 0===x?void 0:x.allowed_file_types)||void 0===r?void 0:r.map((function(e){return"."+e})).join(","))&&void 0!==n?n:"*",b=(null===x||void 0===x?void 0:x.max_file_size)?null===x||void 0===x?void 0:x.max_file_size:void 0,g=Nn({allowedFileTypes:null!==(i=null===x||void 0===x?void 0:x.allowed_file_types)&&void 0!==i?i:[],maxFileSize:b,files:m}),w=g.isUploading,j=g.result;(0,a.useEffect)((function(){j&&j.filePath&&j.fileName&&(S(j.filePath,j.fileName),(0,l.Am)(f("right-panel.file-upload-success"),{type:l.Am.TYPE.SUCCESS}))}),[j]);var S=function(e,t){if(tc()){var r='<span class="download"> <i class="pnm-download"></i> <a href="'.concat(window.PLUG_N_MEET_SERVER_URL+"/download/uploadedFile/"+e,'" target="_blank">').concat(t,"</a></span>"),n={type:"CHAT",isPrivate:"public"!==v,time:"",message_id:"",from:{sid:u.localParticipant.sid,userId:u.localParticipant.identity,name:u.localParticipant.name},msg:r},o={type:$o.USER,room_sid:u.sid,to:"public"!==v?v:"",message_id:"",body:n};rc(JSON.stringify(o))}};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"file",id:"chat-file",ref:d,accept:y,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;t.length&&h(Eu([],Cu(t),!1))}(e)}}),(0,o.jsx)("button",Nu({disabled:!s||c||w,onClick:function(){return function(){var e;w||null===(e=d.current)||void 0===e||e.click()}()},className:"w-4 h-6 px-2"},{children:(0,o.jsx)("i",{className:"pnm-attachment primaryColor text-[20px] opacity-50"})}))]})})};var Ou=function(){return Ou=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ou.apply(this,arguments)},Au=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Ru=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Iu=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Fu=(0,Yt.P1)((function(e){return e.session.isChatServiceReady}),(function(e){return e})),Mu=(0,Yt.P1)((function(e){var t,r;return null===(r=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.lock_settings.lock_chat_send_message}),(function(e){return e})),Du=(0,Yt.P1)((function(e){var t,r;return null===(r=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.lock_settings.lock_chat_file_share}),(function(e){return e})),Uu=(0,Yt.P1)((function(e){return e.roomSettings.selectedChatOption}),(function(e){return e}));const Lu=function(e){var t=e.currentRoom,r=Jt(Fu),n=Jt(Mu),i=Jt(Du),s=Jt(Uu),l=(0,Xt.$)().t,c=Iu((0,a.useState)(!1),2),u=c[0],d=c[1],f=Iu((0,a.useState)(!1),2),p=f[0],m=f[1],h=Iu((0,a.useState)(!0),2),v=h[0],x=h[1],y=Iu((0,a.useState)(""),2),b=y[0],g=y[1];(0,a.useEffect)((function(){qt.getState().session.currentRoom.metadata.room_features.chat_features.allow_file_upload||x(!1)}),[]),(0,a.useEffect)((function(){d(!!n),m(!!i)}),[n,i]),(0,a.useEffect)((function(){var e,t,r,o,a,i,s=null===(t=null===(e=qt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat_send_message,l=null===(o=null===(r=qt.getState().session.currentRoom.metadata)||void 0===r?void 0:r.default_lock_settings)||void 0===o?void 0:o.lock_chat_file_share,c=null===(i=null===(a=qt.getState().session.currentUser)||void 0===a?void 0:a.metadata)||void 0===i?void 0:i.is_admin;s&&!c&&!1!==n&&d(!0),l&&!c&&!1!==n&&m(!0)}),[]);var w=function(){return Au(void 0,void 0,void 0,(function(){var e,r,n;return Ru(this,(function(o){var a;return a=b,e=_u()(a,{allowedTags:["b","i","strong","br"],allowedSchemes:["mailto","tel"]}),(0,Sa.isEmpty)(e)||(r={type:"CHAT",isPrivate:"public"!==s,time:"",message_id:"",from:{sid:t.localParticipant.sid,userId:t.localParticipant.identity,name:t.localParticipant.name},msg:e.replace(/\r?\n/g,"<br />")},n={type:$o.USER,room_sid:t.sid,to:"public"!==s?s:"",message_id:"",body:r},tc()&&(rc(JSON.stringify(n)),g(""))),[2]}))}))};return(0,o.jsxs)("div",Ou({className:"flex items-start justify-between h-[4.5rem] p-2"},{children:[(0,o.jsx)("textarea",{name:"message-textarea",id:"message-textarea",className:"w-full bg-white h-14 max-h-14 mt-1 leading-[1.2] rounded-xl py-2 px-4 outline-none text-xs lg:text-sm primaryColor placeholder:text-primaryColor/70",value:b,onChange:function(e){return g(e.currentTarget.value)},disabled:!r||u,placeholder:l("right-panel.chat-box-placeholder"),onKeyDown:function(e){return function(e){13==e.keyCode&&0==e.shiftKey&&(e.preventDefault(),w())}(e)}}),(0,o.jsxs)("div",Ou({className:"btns"},{children:[(0,o.jsx)("button",Ou({disabled:!r||u,onClick:function(){return w()},className:"w-4 h-6 p-2"},{children:(0,o.jsx)("i",{className:"pnm-send primaryColor text-[20px]"})})),v?(0,o.jsx)(Pu,{isChatServiceReady:r,lockSendFile:p,currentRoom:t}):null]}))]}))};var Bu=r(74730),Wu=function(){return Wu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wu.apply(this,arguments)};const Vu=function(e){var t=e.participant,r=e.from;return(0,o.jsx)("div",Wu({className:"avatar flex items-center justify-center text-white h-8 w-8 overflow-hidden rounded-full shadow-header bg-primaryColor"},{children:function(){var e;if(null===(e=null===t||void 0===t?void 0:t.metadata)||void 0===e?void 0:e.profile_pic)return(0,o.jsx)("img",{src:null===t||void 0===t?void 0:t.metadata.profile_pic,alt:t.name});var n=r.name;return(null===t||void 0===t?void 0:t.name)&&(n=null===t||void 0===t?void 0:t.name),(0,o.jsx)(o.Fragment,{children:null===n||void 0===n?void 0:n.slice(0,2).toUpperCase()})}()}))};var Gu=function(){return Gu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gu.apply(this,arguments)};const Hu=a.memo((function(e){var t=e.body,r=e.currentUser,n=Jt((function(e){return T.selectById(e,t.from.userId)})),a=(0,Xt.$)().t;return(0,o.jsx)("div",Gu({className:"message-item mb-2 xl:mb-3"},{children:(0,o.jsx)("div",Gu({className:"wrapper flex "},{children:"system"===t.from.userId?(0,o.jsx)("div",Gu({className:"content w-[calc(100%)] pt-2 system mb-2"},{children:(0,o.jsx)("p",{className:"message-content max-w-fit shadow-footer text-xs bg-primaryColor text-white",dangerouslySetInnerHTML:{__html:t.msg}})})):(null===r||void 0===r?void 0:r.userId)===t.from.userId?(0,o.jsxs)("div",Gu({className:"content me w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsx)("p",Gu({className:"name pl-2 text-sm pb-1 primaryColor"},{children:a("right-panel.you")})),(0,o.jsx)("p",{className:"message-content max-w-fit shadow-footer text-xs bg-secondaryColor text-white",dangerouslySetInnerHTML:{__html:t.msg}})]})):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Vu,{participant:n,from:t.from}),(0,o.jsxs)("div",Gu({className:"content w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsxs)("p",Gu({className:"name pl-2 text-sm pb-1"},{children:[t.from.name?t.from.name:null===n||void 0===n?void 0:n.name,(0,o.jsx)("span",Gu({style:{fontSize:"10px"}},{children:n?null:" (offline)"}))]})),(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}})]}))]})}))}))}));var zu=function(){return zu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zu.apply(this,arguments)},Qu=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const qu=function(e){var t=e.userId,r=Jt(Te.selectAll),n=(0,a.useRef)(null),i=qt.getState().session.currentUser,s=Qu((0,a.useState)([]),2),l=s[0],c=s[1];(0,a.useEffect)((function(){var e=[];e="public"===t?r.filter((function(e){return!e.isPrivate})):r.filter((function(e){return e.isPrivate&&(e.from.userId===t||e.to===t)})),c(e)}),[r,t]),(0,a.useEffect)((function(){n.current&&n.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}),[l]);return(0,o.jsx)("div",zu({className:"relative h-full px-2 xl:px-4 pt-2 xl:pt-4 overflow-auto scrollBar scrollBar4 messages-item-wrap"},{children:(0,o.jsx)("div",zu({className:"inner",ref:n},{children:l.map((function(e){var t=e;return(0,o.jsx)(Hu,{body:t,currentUser:i},t.message_id)}))}))}))};var $u=function(){return $u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$u.apply(this,arguments)},Ju=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Xu=(0,Yt.P1)((function(e){return e.roomSettings.selectedChatOption}),(function(e){return e})),Yu=(0,Yt.P1)((function(e){return e.roomSettings.initiatePrivateChat}),(function(e){return e})),Ku=(0,Yt.P1)((function(e){return e.roomSettings.unreadMsgFrom}),(function(e){return e}));const Zu=a.memo((function(){var e=(0,Xt.$)().t,t=$t(),r=Jt(Yu),n=Jt(Te.selectAll),i=Ju((0,a.useState)(new Map),2),s=i[0],l=i[1],c=qt.getState().session.currentUser,u=Jt(Ku),d=Jt(Xu),f=Ju((0,a.useState)([{id:"public",title:e("left-panel.public-chat")}]),2),p=f[0],m=f[1],h=Ju((0,a.useState)(e("left-panel.public-chat")),2),v=h[0],x=h[1];(0,a.useEffect)((function(){""!==r.userId&&(s.set(r.userId,r.name),l(new Map(s))),n.forEach((function(e){var t;if(e.isPrivate)if(e.from.userId!==(null===c||void 0===c?void 0:c.userId))s.has(e.from.userId)||(s.set(e.from.userId,null!==(t=e.from.name)&&void 0!==t?t:""),l(new Map(s)));else if(e.from.userId===(null===c||void 0===c?void 0:c.userId)&&e.to&&!s.has(e.to)){var r=T.selectById(qt.getState(),e.to);r&&(s.set(r.userId,r.name),l(new Map(s)))}}))}),[r,n]),(0,a.useEffect)((function(){var t=[{id:"public",title:e("left-panel.public-chat")}];s.forEach((function(e,r){t.push({id:r,title:e})})),m(t)}),[s,e]),(0,a.useEffect)((function(){var e=p.filter((function(e){return e.id===d}));e.length&&x(e[0].title)}),[d,p]);return(0,o.jsxs)("div",$u({className:"h-full"},{children:[(0,o.jsx)(Bu.R,$u({value:d,onChange:function(e){t(Ke(e)),t(et({task:"DEL",id:e}))}},{children:(0,o.jsxs)("div",$u({className:"relative h-10 z-10"},{children:[(0,o.jsxs)(Bu.R.Button,$u({className:"flex items-center justify-between py-2 text-sm text-black font-bold leading-5 border-b-4 border-solid transition ease-in shrink-0 border-primaryColor w-full"},{children:[(0,o.jsx)("span",$u({className:"block truncate pl-4 md:pl-6"},{children:v})),(0,o.jsxs)("span",$u({className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},{children:[u.length?(0,o.jsx)("span",$u({className:"shake pr-1 -mb-1"},{children:(0,o.jsx)("i",{className:"pnm-chat shake"})})):null,(0,o.jsx)("svg",$u({xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},{children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}))]}))]})),(0,o.jsx)(rr.u,$u({as:a.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100 z-90",leaveTo:"opacity-0"},{children:(0,o.jsx)(Bu.R.Options,$u({className:"absolute max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{children:p.map((function(e){return(0,o.jsx)(Bu.R.Option,$u({className:function(e){var t=e.active;return"relative cursor-pointer select-none py-2 pl-10 pr-4 ".concat(t?"bg-primaryColor text-white":"text-gray-900")},value:e.id},{children:function(t){var r=t.selected;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",$u({className:"flex truncate items-center justify-between ".concat(r?"font-medium":"font-normal")},{children:[e.title,u.filter((function(t){return t===e.id})).length?(0,o.jsx)("span",$u({className:"shake pr-1"},{children:(0,o.jsx)("i",{className:"pnm-chat shake"})})):null]})),r?(0,o.jsx)("span",$u({className:"absolute inset-y-0 left-0 flex items-center pl-3 text-secondaryColor"},{children:(0,o.jsx)("svg",$u({xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2},{children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}))})):null]})}}),e.id)}))}))}))]}))})),(0,o.jsx)("div",$u({className:"h-[calc(100%-40px)]"},{children:(0,o.jsx)(qu,{userId:d})}))]}))}));var ed=function(){return ed=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ed.apply(this,arguments)},td=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},rd=(0,Yt.P1)((function(e){var t,r;return null===(r=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.lock_settings.lock_chat}),(function(e){return e}));const nd=function(e){var t=e.currentRoom,r=e.isRecorder,n=Jt(rd),i=td((0,a.useState)(!1),2),s=i[0],l=i[1];return(0,a.useEffect)((function(){var e,t,r,o,a=null===(t=null===(e=qt.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat,i=null===(o=null===(r=qt.getState().session.currentUser)||void 0===r?void 0:r.metadata)||void 0===o?void 0:o.is_admin;a&&!i&&!1!==n&&l(!1)}),[]),(0,a.useEffect)((function(){r&&l(!1)}),[r]),(0,a.useEffect)((function(){r||l(!n)}),[n,r]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",ed({className:"h-[calc(100%)] messageModule-wrapper relative z-10 right-0 top-0 w-[250px] xl:w-[300px] multi-gradient"},{children:(0,o.jsx)("div",ed({className:"all-MessageModule-wrap h-full"},{children:(0,o.jsx)(Zu,{})}))})),r?(0,o.jsx)("div",{className:"w-[100%] h-[1px] hiddenAnimation absolute z-50 bottom-0 bg-gradient-to-r from-primaryColor to-secondaryColor"}):null,s?(0,o.jsx)("div",ed({className:"message-form fixed z-[99] xl:z-0 bottom-1 w-[230px] xl:w-[300px] bg-white"},{children:(0,o.jsx)(Lu,{currentRoom:t})})):null]})};var od=function(){return od=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},od.apply(this,arguments)};const ad=a.memo((function(e){var t=e.currentRoom,r=e.isRecorder,n=$t();return(0,o.jsxs)("div",od({id:"main-right-panel",className:"h-[calc(100%)]"},{children:[r?null:(0,o.jsxs)("div",od({className:"hidden md:inline-block close absolute -left-[14px] z-20 top-1 w-6 h-6 rounded-full border border-solid border-primaryColor bg-white cursor-pointer",onClick:function(){n(le(!1))}},{children:[(0,o.jsx)("span",{className:"inline-block w-[18px] h-[1px] bg-primaryColor absolute rotate-45 top-[11px] left-[2px]"}),(0,o.jsx)("span",{className:"inline-block w-[18px] h-[1px] bg-primaryColor absolute -rotate-45 top-[11px] right-[2px]"})]})),(0,o.jsx)(nd,{currentRoom:t,isRecorder:r})]}))}));var id=function(){return id=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},id.apply(this,arguments)};const sd=function(e){var t=e.speaker;return(0,o.jsxs)("div",id({className:"m-1 px-3 py-1 primaryColor text-[12px] rounded-2xl inline-flex items-center bg-white border border-solid border-white"},{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute text-[10px] secondaryColor mr-2"}),t.name]}))};var ld=function(){return ld=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ld.apply(this,arguments)};const cd=a.memo((function(){var e=Jt(w.selectAll);return(0,o.jsx)("div",ld({className:"active-speakers-wrap flex w-full items-center justify-center absolute top-0 left-0 z-[9999]"},{children:e.length?e.map((function(e){return(0,o.jsx)(sd,{speaker:e},e.sid)})):null}))}));var ud=function(){return ud=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ud.apply(this,arguments)},dd=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},fd=(0,Yt.P1)((function(e){return e.roomSettings.roomVideoQuality}),(function(e){return e}));const pd=function(e){var t=e.track,r=(0,a.useRef)(null),n=dd((0,a.useState)(),2),i=n[0],s=n[1],l=dd((0,a.useState)(!1),2),c=l[0],u=l[1],d=Jt(fd);(0,a.useEffect)((function(){t instanceof Ie.E8?t.setVideoQuality(d):u(!0)}),[d,t]),(0,a.useEffect)((function(){var e,n=r.current;return n&&(null===(e=t.videoTrack)||void 0===e||e.attach(n)),function(){var e;n&&(null===(e=t.videoTrack)||void 0===e||e.detach(n))}}),[t]);return(0,o.jsxs)("div",ud({className:"screen-share-video relative pb-[calc(100vh-210px)]"},{children:[i?null:(0,o.jsx)("div",ud({className:"loading flex justify-center"},{children:(0,o.jsxs)("div",ud({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})),(0,o.jsx)("button",ud({className:"absolute z-[99] bottom-0 right-0 p-1 bg-black/50",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=r.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[20px] text-white"})})),(0,o.jsx)("video",{onLoadedData:function(){s(!0)},ref:r,className:"video-player absolute ".concat(c?"self-screen-share":"remote-screen-share")})]}))};var md=function(){return md=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},md.apply(this,arguments)};const hd=function(e){var t=e.track,r=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e,n=r.current;return n&&(null===(e=t.audioTrack)||void 0===e||e.attach(n)),function(){var e;n&&(null===(e=t.audioTrack)||void 0===e||e.detach(n))}}),[t]),(0,o.jsx)("div",md({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:r})}))};var vd=function(){return vd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vd.apply(this,arguments)},xd=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},yd=(0,Yt.P1)((function(e){return e.roomSettings.roomVideoQuality}),(function(e){return e}));const bd=function(e){var t=e.track,r=(0,a.useRef)(null),n=xd((0,a.useState)(),2),i=n[0],s=n[1],l=Jt(yd);(0,a.useEffect)((function(){t instanceof Ie.E8&&t.setVideoQuality(l)}),[l,t]),(0,a.useEffect)((function(){var e,n=r.current;return n&&(null===(e=t.videoTrack)||void 0===e||e.attach(n)),function(){var e;n&&(null===(e=t.videoTrack)||void 0===e||e.detach(n))}}),[t]);return(0,o.jsxs)("div",vd({className:"camera-video-player"},{children:[i?null:(0,o.jsx)("div",vd({className:"loading absolute text-center top-3 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",vd({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})),(0,o.jsx)("button",vd({className:"absolute z-[999] top-2 right-2 p-1 bg-black/50 w-6 h-6 flex",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=r.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[14px] text-white"})})),(0,o.jsx)("video",{className:"camera-video",onLoadedData:function(){s(!0)},ref:r,height:"200px",width:"200px"})]}))};var gd=function(){return gd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gd.apply(this,arguments)},wd=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const jd=function(e){var t=e.userId,r=Jt((function(e){return T.selectById(e,t)})),n=wd((0,a.useState)("#FFFFFF"),2),i=n[0],s=n[1];(0,a.useEffect)((function(){switch(null===r||void 0===r?void 0:r.connectionQuality){case Ie.ZV.Excellent:s("#38f105");break;case Ie.ZV.Good:s("#c8f6bd");break;case Ie.ZV.Poor:s("#FF0000");break;default:s("#FFFFFF")}}),[null===r||void 0===r?void 0:r.connectionQuality]);return(0,o.jsx)("div",gd({className:"connection-status"},{children:(0,o.jsx)("i",{style:{color:i},className:"pnm-network text-[7px]"})}))};var Sd=function(){return Sd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sd.apply(this,arguments)};const kd=function(e){var t=e.userId,r=Jt((function(e){return T.selectById(e,t)}));return(0,o.jsx)(o.Fragment,{children:(null===r||void 0===r?void 0:r.audioTracks)?(0,o.jsx)("div",Sd({className:"mic-status"},{children:(null===r||void 0===r?void 0:r.isMuted)?(0,o.jsx)("p",Sd({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute text-white text-[9px]"})})):(0,o.jsx)("p",Sd({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute text-white text-[9px]"})}))})):null})};var _d=function(){return _d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_d.apply(this,arguments)};const Nd=a.memo((function(e){var t=e.userId,r=e.track;return(0,o.jsx)("div",_d({className:"camera-modules"},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(jd,{userId:t}),(0,o.jsx)(kd,{userId:t}),(0,o.jsx)(bd,{track:r})]})}))}));var Cd=function(){return Cd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cd.apply(this,arguments)};const Ed=function(e){var t,r=e.participantType,n=e.participant,a=Jt((function(e){return w.selectById(e,n.identity)}));return(0,o.jsx)("div",Cd({className:"video-camera-item relative ".concat(a?"speaking":""," ").concat(r.isAdmin?"admin":"participants")},{children:(t=[],n.tracks.forEach((function(e){if(e.source===Ie.fQ.Source.Camera){var a=(0,o.jsxs)("div",Cd({className:"video-camera-item-inner"},{children:[(0,o.jsxs)("div",Cd({className:"name"},{children:[n.name," ",r.isLocal?"(me)":null]})),(0,o.jsx)(Nd,{userId:n.identity,track:e})]}),e.trackSid);t.push(a)}})),t)}))};var Td=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Pd=function(e){var t=Td((0,a.useState)([]),2),r=t[0],n=t[1],i=Td((0,a.useState)(0),2),s=i[0],l=i[1];return(0,a.useEffect)((function(){var t=0,r=[];e.forEach((function(e){var n;if(e.metadata){var a={isAdmin:null!==(n=JSON.parse(e.metadata).is_admin)&&void 0!==n&&n,isLocal:e instanceof Ie.Ix},i=e.getTracks().filter((function(e){return e.source===Ie.fQ.Source.Camera}));if(t+=i.length,i.length){var s=(0,o.jsx)(Ed,{participantType:a,participant:e},e.sid);r.push(s)}}})),l(t),n(r)}),[e]),{allParticipants:r,totalNumWebcams:s}};var Od=function(){return Od=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Od.apply(this,arguments)},Ad=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Rd=a.memo((function(e){var t=e.videoSubscribers,r=e.perPage,n=e.isVertical,i=$t(),s=(0,Xt.$)().t,l=Pd(t),c=l.allParticipants,u=l.totalNumWebcams,d=Ad((0,a.useState)(0),2),f=d[0],p=d[1],m=Ad((0,a.useState)([]),2),h=m[0],v=m[1],x=Ad((0,a.useState)(!1),2),y=x[0],b=x[1],g=Ad((0,a.useState)(!1),2),w=g[0],j=g[1],S=Ad((0,a.useState)(null!==r&&void 0!==r?r:24),2),k=S[0],_=S[1];(0,a.useEffect)((function(){c.length<=k?v(c):(p(1),N(c,1,k))}),[c,k]),(0,a.useEffect)((function(){u>k?(b(1!==f),j(!(f>=u/k))):(b(!1),j(!1))}),[u,f,k]);var N=function(e,t,r){var n=Ad(e).slice(0).slice((t-1)*r,t*r);v(n),i(G(1!==t))};return(0,o.jsxs)(o.Fragment,{children:[u>0?(0,o.jsx)("div",Od({className:"all-webcam-wrapper total-cam-".concat(u," selected-cam-").concat(k," page-").concat(f," ").concat(n?"vertical-webcams":"")},{children:(0,o.jsx)("div",Od({className:"all-webcam-wrapper-inner"},{children:(0,o.jsxs)(o.Fragment,{children:[y?(0,o.jsx)("button",Od({type:"button",className:"previous-cam",onClick:function(){return N(c,f-1,k),void p(f-1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-up"})})):null,(0,o.jsx)(o.Fragment,{children:h}),w?(0,o.jsx)("button",Od({type:"button",className:"next-cam",onClick:function(){return N(c,f+1,k),void p(f+1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-down"})})):null]})}))})):null,u>6&&!n?(0,o.jsxs)("div",Od({className:"select-camera-number"},{children:[(0,o.jsx)("label",Od({htmlFor:"select-camera-num"},{children:s("app.webcams-per-page")})),(0,o.jsxs)("select",Od({name:"select-camera-num",id:"select-camera-num",onChange:function(e){return _(Number(e.currentTarget.value))}},{children:[(0,o.jsx)("option",Od({value:"6"},{children:"6"})),(0,o.jsx)("option",Od({value:"8"},{children:"8"})),(0,o.jsx)("option",Od({value:"12"},{children:"12"})),(0,o.jsx)("option",Od({value:"15"},{children:"15"})),(0,o.jsx)("option",Od({value:"18"},{children:"18"})),(0,o.jsx)("option",Od({selected:!0},{children:"24"}))]}))]})):null]})}));var Id=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),Fd=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),Md=(0,Yt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e}));const Dd=a.memo((function(e){var t=e.videoSubscribers,r=Jt(Id),n=Jt(Fd),a=Jt(Md);return(0,o.jsx)(o.Fragment,{children:!t||!a||n&&r?null:(0,o.jsx)(Rd,{videoSubscribers:t,perPage:3,isVertical:!0})})}));var Ud=function(){return Ud=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ud.apply(this,arguments)};const Ld=a.memo((function(e){var t=e.screenShareTracks,r=e.videoSubscribers;return(0,o.jsxs)("div",Ud({className:"share-screen-wrapper is-share-screen-running"},{children:[(0,o.jsx)(Dd,{videoSubscribers:r}),function(){if(t){var e=Array();return t.forEach((function(t){t.source===Ie.fQ.Source.ScreenShare?e.push((0,o.jsx)(pd,{track:t},t.trackSid)):t.source===Ie.fQ.Source.ScreenShareAudio&&e.push((0,o.jsx)(hd,{track:t},t.trackSid))})),e}return null}()]}))}));var Bd=function(){return Bd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bd.apply(this,arguments)};const Wd=a.memo((function(e){var t=e.track,r=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e,n=r.current;return n&&(null===(e=t.audioTrack)||void 0===e||e.attach(n)),function(){var e;n&&(null===(e=t.audioTrack)||void 0===e||e.detach(n))}}),[t]),(0,o.jsx)("div",Bd({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:r})}))}));var Vd=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Gd=a.memo((function(e){var t=e.audioSubscribers,r=Vd((0,a.useState)([]),2),n=r[0],i=r[1];return(0,a.useEffect)((function(){var e=[];t.forEach((function(t){t.tracks.forEach((function(t){e.push((0,o.jsx)(Wd,{track:t},t.trackSid))}))})),i(e)}),[t]),(0,o.jsx)(o.Fragment,{children:n.length?n:null})}));var Hd=function(){return Hd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hd.apply(this,arguments)},zd=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Qd=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features}),(function(e){return e})),qd=(0,Yt.P1)((function(e){var t,r,n;return null===(n=null===(r=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.lock_settings)||void 0===n?void 0:n.lock_shared_notepad}),(function(e){return e}));const $d=a.memo((function(e){var t=e.videoSubscribers,r=$t(),n=Jt(Qd),i=Jt(qd),s=qt.getState().session.currentUser,l=zd((0,a.useState)(),2),c=l[0],u=l[1],d=zd((0,a.useState)(),2),f=d[0],p=d[1];(0,a.useEffect)((function(){r(ce(!1))}),[r]),(0,a.useEffect)((function(){if((null===n||void 0===n?void 0:n.is_active)&&n.host){var e=n.host;if(n.host.match("host.docker.internal")&&(e="http://localhost:9001"),null===s||void 0===s?void 0:s.isRecorder)return void p("".concat(e,"/p/").concat(n.read_only_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name));e=i?"".concat(e,"/p/").concat(n.read_only_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name):"".concat(e,"/p/").concat(n.note_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name),p(e)}}),[n,i]);var m=function(){u(!0)};return(0,o.jsxs)("div",Hd({className:"middle-fullscreen-wrapper h-full flex ".concat((null===t||void 0===t?void 0:t.size)?"verticalsWebcamsActivated":"")},{children:[(0,o.jsx)(Dd,{videoSubscribers:t}),f?(0,o.jsxs)("div",Hd({className:"notepad-wrapper m-auto h-[calc(100%-50px)] w-full max-w-[1100px] flex-1 sm:px-5 mt-9"},{children:[c?null:(0,o.jsx)("div",Hd({className:"loading absolute left-[50%] top-[40%] flex justify-center"},{children:(0,o.jsxs)("div",Hd({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})),(0,o.jsx)("iframe",{height:"100%",width:"100%",src:f,onLoad:m})]})):null]}))}));var Jd,Xd,Yd,Kd,Zd,ef=r(23493),tf=r.n(ef),rf=r(74474),nf=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},of=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},af=function(e,t,r){var n,o,a;return!(!t||!(t.id===(null===(n=e.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(o=e.resizingElement)||void 0===o?void 0:o.id)||t.id===(null===(a=e.draggingElement)||void 0===a?void 0:a.id)||t.version>r.version||t.version===r.version&&t.versionNonce<r.versionNonce))},sf=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},lf=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},cf="",uf="",df="",ff=!1,pf=function(e,t,r,n,o,a){return sf(void 0,void 0,void 0,(function(){return lf(this,(function(i){return[2,new Promise((function(i,s){return sf(void 0,void 0,void 0,(function(){var l,c;return lf(this,(function(u){switch(u.label){case 0:return[4,fetch(e)];case 1:return[4,u.sent().blob()];case 2:return(l=u.sent())||s(null),cf=t,Kd=o,Zd=a,ff=n,(Yd=r)<0&&(Yd=1),(c=new FileReader).readAsDataURL(l),c.onload=function(){if(df=c.result,"image/png"===(uf=df.substring("data:".length,df.indexOf(";base64")))||"image/jpeg"===uf||"image/jpg"===uf){var e=new Image;e.src=df,e.onload=function(){return sf(this,void 0,void 0,(function(){var t;return lf(this,(function(r){switch(r.label){case 0:return[4,hf(e.height,e.width)];case 1:return r.sent(),t=mf(),i(t),[2]}}))}))},e.onerror=function(){return sf(this,void 0,void 0,(function(){return lf(this,(function(e){return console.error("can not open image file"),s(null),[2]}))}))}}else if("image/svg+xml"==uf){Jd=.8*Kd,Xd=.7*Zd;var t=mf();i(t)}else console.error("unsupported file"),s(null)},[2]}}))}))}))]}))}))},mf=function(){var e={id:cf,dataURL:df,mimeType:uf,created:Date.now()},t=.4;return Math.round(100*Xd/Zd)<50&&(t=.7),{image:e,elm:{id:cf,type:"image",x:Kd*t,y:.06*Zd,width:Xd,height:Jd,angle:0,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,groupIds:[],strokeSharpness:"round",seed:cr(),version:Yd+1,versionNonce:cr(),isDeleted:!1,boundElements:null,updated:Date.now(),link:null,status:"pending",fileId:cf,scale:[1,1],locked:ff}}},hf=function(e,t){return sf(void 0,void 0,void 0,(function(){var r,n,o;return lf(this,(function(a){for(Jd=Number("".concat(e)),Xd=Number("".concat(t)),r=Kd-40,n=Zd-180,o=.01;Jd>r;)Jd-=Jd*o,Xd-=Xd*o,o+=.01;for(o=.01;Xd>n;)Jd-=Jd*o,Xd-=Xd*o,o+=.01;return[2]}))}))},vf=function(){return vf=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vf.apply(this,arguments)},xf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yf=new Map,bf=function(e,t){var r,n,o,a,i=qt.getState().session,s={sid:null!==(n=null===(r=i.currentUser)||void 0===r?void 0:r.sid)&&void 0!==n?n:"",userId:null!==(a=null===(o=i.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},l={type:Xo.SCENE_UPDATE,from:s,msg:JSON.stringify(e)},c={type:$o.WHITEBOARD,room_sid:i.currentRoom.sid,room_id:i.currentRoom.room_id,message_id:"",body:l};""!==t&&(c.to=t),rc(JSON.stringify(c))},gf=function(e,t){var r,n,o,a,i=qt.getState().session,s={type:Xo.ADD_WHITEBOARD_OFFICE_FILE,from:{sid:null!==(n=null===(r=i.currentUser)||void 0===r?void 0:r.sid)&&void 0!==n?n:"",userId:null!==(a=null===(o=i.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},msg:JSON.stringify(e)},l={type:$o.WHITEBOARD,room_sid:i.currentRoom.sid,room_id:i.currentRoom.room_id,message_id:"",body:s};""!==t&&(l.to=t),rc(JSON.stringify(l))};const wf=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e})),t.current};var jf=function(){return jf=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jf.apply(this,arguments)},Sf=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},kf=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},_f=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Nf=(0,Yt.P1)((function(e){return e.whiteboard.totalPages}),(function(e){return e})),Cf=(0,Yt.P1)((function(e){return e.whiteboard.currentPage}),(function(e){return e}));const Ef=a.memo((function(e){var t,r=e.excalidrawAPI,n=e.isPresenter,i=Jt(Nf),s=Jt(Cf),c=_f((0,a.useState)(),2),u=c[0],d=c[1],f=_f((0,a.useState)(!0),2),p=f[0],m=f[1],h=_f((0,a.useState)(!1),2),v=h[0],x=h[1],y=wf(s),b=$t(),g=(0,Xt.$)().t,w=qt.getState().session.currentUser,j=null===(t=null===w||void 0===w?void 0:w.metadata)||void 0===t?void 0:t.is_admin,S=null===w||void 0===w?void 0:w.isRecorder;(0,a.useEffect)((function(){y&&s!==y&&r&&k()}),[s,y,r]),(0,a.useEffect)((function(){s>1&&m(!1),1===s&&m(!0),v?s!==i&&x(!1):s===i&&x(!0)}),[s,v,i]),(0,a.useEffect)((function(){for(var e=[],t=0;t<i;t++)e.push((0,o.jsx)("option",jf({value:t+1},{children:g("whiteboard.page",{count:t+1})}),t));d(e)}),[i]),(0,a.useEffect)((function(){return r&&n&&setTimeout((function(){var e=qt.getState().whiteboard.currentPage;_(e)}),100),function(){if(r&&n){var e=qt.getState().whiteboard.currentPage,t=r.getSceneElementsIncludingDeleted();t.length&&sessionStorage.setItem(String(e),JSON.stringify(t))}}}),[r]);var k=function(){if(r&&n){var e=r.getSceneElementsIncludingDeleted();e.length&&sessionStorage.setItem(String(y),JSON.stringify(e)),N(),_(s)}},_=function(e){var t=sessionStorage.getItem(e);if(t&&r){var o=JSON.parse(t);o.length&&(r.updateScene({elements:o}),n&&bf(o))}},N=function(){null===r||void 0===r||r.updateScene({elements:[]})},C=function(e){!function(e,t){var r,n,o,a,i=qt.getState().session,s={type:$o.WHITEBOARD,room_sid:i.currentRoom.sid,message_id:"",body:{type:Xo.PAGE_CHANGE,from:{sid:null!==(n=null===(r=i.currentUser)||void 0===r?void 0:r.sid)&&void 0!==n?n:"",userId:null!==(a=null===(o=i.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},msg:"".concat(e)}};""!==t&&(s.to=t),rc(JSON.stringify(s))}(e),setTimeout((function(){b(ut(e))}),500)},E=function(){C(s-1)},T=function(){C(s+1)},P=function(){return Sf(void 0,void 0,void 0,(function(){var e,t;return kf(this,(function(r){switch(r.label){case 0:return e={user_id:null===w||void 0===w?void 0:w.userId,task:"promote"},[4,qo("switchPresenter",e)];case 1:return(t=r.sent()).status?(0,l.Am)(g("left-panel.menus.notice.presenter-changed"),{toastId:"lock-setting-status",type:"info"}):(0,l.Am)(g(t.msg),{toastId:"lock-setting-status",type:"error"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsxs)("div",jf({className:"flex pt-1 wb-page-navigation"},{children:[(0,o.jsx)("button",jf({className:"pre w-8 h-8 flex items-center justify-center",onClick:E,disabled:p},{children:(0,o.jsx)("i",{className:"pnm-arrow-left-short text-black text-xl opacity-50"})})),(0,o.jsx)("select",jf({id:"pages",name:"pages",className:"pagesOpts block h-8 py-1 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:function(e){return C(Number(e.currentTarget.value))},value:s},{children:u})),(0,o.jsx)("button",jf({className:"next w-8 h-8 flex items-center justify-center",onClick:T,disabled:v},{children:(0,o.jsx)("i",{className:"pnm-arrow-right-short text-black text-xl opacity-50"})}))]})):(0,o.jsxs)("div",jf({className:"flex text-sm items-center justify-center relative pt-3"},{children:[j&&!S?(0,o.jsx)("button",jf({className:"w-10 h-8 flex items-center justify-center absolute left-0 top-[3px]",onClick:P},{children:(0,o.jsx)("i",{className:"pnm-presenter primaryColor text-[14px] opacity-50"})})):null,g("whiteboard.page",{count:s})]}))})}));const Tf=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e})),t.current};var Pf=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Of=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Af=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Rf=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};const If=function(e){var t=e.refreshFileBrowser,r=e.allowedFileTypes,n=e.currentPage,i=e.excalidrawAPI,s=(0,a.useRef)(null),c=Af((0,a.useState)(),2),u=c[0],d=c[1],f=(0,Xt.$)().t,p=$t(),m=qt.getState().session,h=di(t),v=Nn({allowedFileTypes:r,maxFileSize:30,files:u}),x=v.isUploading,y=v.result;(0,a.useEffect)((function(){y&&y.filePath&&b(y.filePath,y.fileName,y.fileExtension)}),[y]),(0,a.useEffect)((function(){var e;!x&&t>0&&h!==t&&(null===(e=s.current)||void 0===e||e.click())}),[t,x,h]);var b=function(e,t,r){switch(r){case"jpg":case"jpeg":case"png":case"svg":(0,l.Am)(f("right-panel.file-upload-success"),{type:l.Am.TYPE.SUCCESS}),w(e,t);break;default:g(m,e)}},g=function(e,t){return Pf(void 0,void 0,void 0,(function(){var r,n,o,a,s,c,u,d,p;return Of(this,(function(m){switch(m.label){case 0:return r=l.Am.loading(f("whiteboard.converting"),{type:"info"}),n={sid:e.currentRoom.sid,roomId:e.currentRoom.room_id,userId:null===(p=e.currentUser)||void 0===p?void 0:p.userId,file_path:t},[4,qo("convertWhiteboardFile",n)];case 1:if(!(o=m.sent()).status)return l.Am.update(r,{render:f(o.msg),type:"error",isLoading:!1,closeButton:!0}),[2];for(a=[],s=0;s<o.total_pages;s++)c="page_"+(s+1)+".png",u={id:lr(),currentPage:s+1,filePath:o.file_path+"/"+c,fileName:c,uploaderWhiteboardHeight:i.getAppState().height,uploaderWhiteboardWidth:i.getAppState().width,isOfficeFile:!0},a.push(u);return d={fileId:o.file_id,fileName:o.file_name,filePath:o.file_path,totalPages:o.total_pages,pageFiles:JSON.stringify(a)},qt.dispatch(pt(d)),[4,ur(500)];case 2:return m.sent(),gf(d),l.Am.update(r,{render:f("whiteboard.file-ready"),type:"success",isLoading:!1,autoClose:1e3}),[2]}}))}))},w=function(e,t){var r,o,a,s,l={id:lr(),currentPage:n,filePath:e,fileName:t,uploaderWhiteboardHeight:i.getAppState().height,uploaderWhiteboardWidth:i.getAppState().width,isOfficeFile:!1};p(lt(l));var c=qt.getState().whiteboard.whiteboardOfficeFilePagesAndOtherImages,u=qt.getState().session,d={type:Xo.ADD_WHITEBOARD_FILE,from:{sid:null!==(o=null===(r=u.currentUser)||void 0===r?void 0:r.sid)&&void 0!==o?o:"",userId:null!==(s=null===(a=u.currentUser)||void 0===a?void 0:a.userId)&&void 0!==s?s:""},msg:c},f={type:$o.WHITEBOARD,room_sid:u.currentRoom.sid,room_id:u.currentRoom.room_id,message_id:"",body:d};rc(JSON.stringify(f))};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("input",{type:"file",id:"chat-file",ref:s,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;t.length&&d(Rf([],Af(t),!1))}(e)},accept:r.map((function(e){return"."+e})).join(",")})})};var Ff=function(){return Ff=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ff.apply(this,arguments)},Mf=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Df=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Uf=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Lf=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Bf=(0,Yt.P1)((function(e){return e.whiteboard.whiteboardUploadedOfficeFiles}),(function(e){return e}));const Wf=function(e){var t=e.currentPage,r=e.excalidrawAPI,n=(0,Xt.$)().t,i=$t(),s=Jt(Bf),l=Uf((0,a.useState)(0),2),c=l[0],u=l[1],d=Uf((0,a.useState)([]),2),f=d[0],p=d[1],m=Uf((0,a.useState)([]),2),h=m[0],v=m[1];(0,a.useEffect)((function(){var e=s.map((function(e){return(0,o.jsx)("div",Ff({role:"none",className:"border-b border-solid border-primaryColor/10 last:border-none"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsx)("button",Ff({className:"!rounded !w-full flex items-center !px-3 !py-[0.4rem] !text-[10px] lg:!text-xs transition ease-in !bg-transparent hover:!bg-primaryColor hover:text-white text-gray-700",onClick:function(){return y(e)}},{children:e.fileName}))})}),e.fileId)}));p(e)}),[s]);var x=function(e){var t=["jpg","jpeg","png","svg"];"office"===e&&(t=["pdf","docx","doc","odt","txt","rtf","xml","xlsx","xls","ods","csv","pptx","ppt","odp","vsd","odg","html"]),u(c+1),v(Lf([],Uf(t),!1))},y=function(e){return Mf(void 0,void 0,void 0,(function(){return Df(this,(function(t){switch(t.label){case 0:return i(ft(e.fileId)),[4,ur(500)];case 1:return t.sent(),gf(e),[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",Ff({className:"h-[30px] lg:h-[32px] max-w text-xs !px-2 rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] !mr-2 flex items-center justify-center cursor-pointer",onClick:function(){return x("image")}},{children:[(0,o.jsx)("i",{className:"pnm-blank-img primaryColor hover:secondaryColor text-[14px] opacity-50 mr-1"}),n("whiteboard.upload-image")]})),(0,o.jsx)("div",Ff({className:"menu relative z-10"},{children:(0,o.jsx)(Bn.v,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bn.v.Button,Ff({className:"manage-icon h-[30px] lg:h-[32px] max-w text-xs !px-2 rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer"},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-attachment primaryColor hover:secondaryColor text-[14px] opacity-50 mr-1"}),n("whiteboard.manage-files")]})})),(0,o.jsx)(rr.u,Ff({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)(Bn.v.Items,Ff({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)("div",Ff({className:"item-wrapper-uploaded-file overflow-x-hidden overflow-y-auto max-h-[170px] scrollBar scrollBar2"},{children:f})),(0,o.jsx)("div",Ff({className:"py-3 !border-t-2 border-solid !border-primaryColor !mt-2"},{children:(0,o.jsx)(Bn.v.Item,{children:(0,o.jsxs)("button",Ff({onClick:function(){return x("office")},className:"w-[100px] !m-auto text-xs h-7 flex items-center justify-center !bg-primaryColor hover:!bg-secondaryColor text-white"},{children:[(0,o.jsx)("i",{className:"pnm-attachment text-white text-[14px] opacity-50 mr-1"}),n("whiteboard.upload-file")]}))})}))]}))}))]})}})})),(0,o.jsx)(If,{refreshFileBrowser:c,allowedFileTypes:h,currentPage:t,excalidrawAPI:r})]})};var Vf=function(){return Vf=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vf.apply(this,arguments)},Gf=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Hf=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},zf=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Qf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qf=(0,Yt.P1)((function(e){return e.whiteboard.excalidrawElements}),(function(e){return e})),$f=(0,Yt.P1)((function(e){return e.whiteboard.mousePointerLocation}),(function(e){return e})),Jf=(0,Yt.P1)((function(e){return e.whiteboard.whiteboardOfficeFilePagesAndOtherImages}),(function(e){return e})),Xf=(0,Yt.P1)((function(e){return e.whiteboard.requestedWhiteboardData}),(function(e){return e})),Yf=(0,Yt.P1)((function(e){var t,r,n;return null===(n=null===(r=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.lock_settings)||void 0===n?void 0:n.lock_whiteboard}),(function(e){return e})),Kf=(0,Yt.P1)((function(e){return e.whiteboard.currentPage}),(function(e){return e})),Zf=(0,Yt.P1)((function(e){return e.whiteboard.currentWhiteboardOfficeFileId}),(function(e){return e})),ep=(0,Yt.P1)((function(e){var t,r;return null===(r=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.is_presenter}),(function(e){return e}));const tp=a.memo((function(e){var t=e.videoSubscribers,r=qt.getState().session.currentUser,n=qt.getState().session.currentRoom,i=new Map,s=(0,Xt.$)().i18n,l=zf(function(){var e=nf((0,a.useState)(null),2),t=e[0],r=e[1];return[t,(0,a.useCallback)((function(e){return r(e)}),[])]}(),2),c=l[0],u=l[1],d=zf((0,a.useState)(!0),2),f=d[0],p=d[1],m=zf((0,a.useState)("light"),2),h=m[0],v=m[1],x=zf((0,a.useState)(-1),2),y=x[0],b=x[1],g=Jt(qf),w=Jt($f),j=Jt(T.selectAll),S=Jt(Jf),k=Jt(Xf),_=Jt(Yf),N=Jt(Zf),C=Tf(N),E=Jt(ep),P=Jt(Kf),O=wf(P),A=zf((0,a.useState)(!1),2),R=A[0],I=A[1];(0,a.useEffect)((function(){var e,t;c||(v("light"),(null===r||void 0===r?void 0:r.isRecorder)||(null===(t=null===(e=n.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_whiteboard)||p(!1))}),[c]),(0,a.useEffect)((function(){!R&&c&&(!function(){var e=qt.getState().session,t=T.selectAll(qt.getState()).filter((function(t){var r;return t.sid!==(null===(r=e.currentUser)||void 0===r?void 0:r.sid)}));if(t.length){t.sort((function(e,t){return e.joinedAt-t.joinedAt}));var r=t;r.length>2&&(r=t.slice(0,2)),r.forEach((function(t){var r,n,o,a,i={type:$o.SYSTEM,room_sid:e.currentRoom.sid,message_id:"",to:t.sid,body:{type:Jo.INIT_WHITEBOARD,from:{sid:null!==(n=null===(r=e.currentUser)||void 0===r?void 0:r.sid)&&void 0!==n?n:"",userId:null!==(a=null===(o=e.currentUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},msg:""}};rc(JSON.stringify(i))}))}}(),I(!0)),k.requested&&c&&function(e,t){var r=qt.getState().whiteboard,n=r.whiteboardUploadedOfficeFiles.filter((function(e){return e.fileId===r.currentWhiteboardOfficeFileId}));if(n.length){var o={fileId:n[0].fileId,fileName:n[0].fileName,filePath:n[0].filePath,totalPages:n[0].totalPages,currentPage:r.currentPage,pageFiles:r.whiteboardOfficeFilePagesAndOtherImages};gf(o,t);var a=e.getSceneElementsIncludingDeleted();a.length&&bf(a,t),qt.dispatch(ct({requested:!1,sendTo:""}))}}(c,k.sendTo)}),[k,c,R]),(0,a.useEffect)((function(){c&&N!==C&&(b(-1),c.updateScene({elements:[]}),c.addFiles([]),sessionStorage.clear())}),[N,c,C]),(0,a.useEffect)((function(){c&&(j.forEach((function(e){e.metadata.is_admin&&(i.has(e.userId)||i.set(e.userId,{}))})),c.updateScene({collaborators:i}))}),[j,c]),(0,a.useEffect)((function(){"undefined"!==typeof _&&((null===r||void 0===r?void 0:r.isRecorder)||p(_))}),[_]),(0,a.useEffect)((function(){var e,t;E?p(!1):(null===r||void 0===r?void 0:r.isRecorder)||p(null===(t=null===(e=null===r||void 0===r?void 0:r.metadata)||void 0===e?void 0:e.lock_settings.lock_whiteboard)||void 0===t||t)}),[E]),(0,a.useEffect)((function(){O&&P!==O&&b(-1),!E&&O&&P!==O&&(null===c||void 0===c||c.updateScene({elements:[]}),null===c||void 0===c||c.addFiles([]))}),[P,O,E,c]),(0,a.useEffect)((function(){if(g&&c&&R){var e=JSON.parse(g),t=function(e,t,r){var n,o,a,i,s=e.reduce((function(e,t,r){return e[t.id]=[t,r],e}),{}),l=e.slice(),c=new WeakMap,u=0,d=0,f=-1;try{for(var p=of(t),m=p.next();!m.done;m=p.next()){var h=m.value;f++;var v=s[h.id];if(af(r,null===v||void 0===v?void 0:v[0],h))h.parent&&delete h.parent;else{if(v){if(v[0]===h)continue;c.set(v[0],!0)}var x=h.parent||(null===(a=t[f-1])||void 0===a?void 0:a.id)||null;if(null!=x)if(delete h.parent,"^"===x)d++,0===u?(l.unshift(h),s[h.id]=[h,u-d]):(l.splice(u+1,0,h),s[h.id]=[h,u+1-d],u++);else{var y=s[x]?null===(i=s[x])||void 0===i?void 0:i[1]:null;null!=y&&(y+=d),null!=y&&y>=u?(l.splice(y+1,0,h),d++,s[h.id]=[h,y+1-d],u=y+1):null!=y?(l.splice(u+1,0,h),d++,s[h.id]=[h,u+1-d],u++):(l.push(h),s[h.id]=[h,l.length-1-d])}else v?(l[v[1]]=h,s[h.id]=[h,v[1]]):(l.push(h),s[h.id]=[h,l.length-1-d])}}}catch(b){n={error:b}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}return l.filter((function(e){return!c.has(e)}))}(c.getSceneElementsIncludingDeleted(),e,c.getAppState());M(t)}}),[g,c,R]),(0,a.useEffect)((function(){var e;if(w){var t=JSON.parse(w),r=t.pointer,n=t.button,o=t.name,a=t.userId,s=t.selectedElementIds,l=new Map(i),u=null!==(e=l.get(a))&&void 0!==e?e:{};u.pointer=r,u.button=n,u.selectedElementIds=s,u.username=o,u.id=a,l.set(a,u),null===c||void 0===c||c.updateScene({collaborators:l})}}),[w]),(0,a.useEffect)((function(){if(S&&c){var e=JSON.parse(S);if(e.length){var t=e.filter((function(e){return e.currentPage===P}));F(t)}}}),[S,c,P]);var F=(0,a.useCallback)((function(e){return Gf(void 0,void 0,void 0,(function(){var t,r,n,o,a,i,s,l,u;return Hf(this,(function(d){switch(d.label){case 0:if(!c)return[2];t=[],r=[],n=function(e){var n,o,a,i,s,l;return Hf(this,(function(u){switch(u.label){case 0:for(s in n=window.PLUG_N_MEET_SERVER_URL+"/download/uploadedFile/"+e.filePath,o=c.getFiles(),a=c.getSceneElementsIncludingDeleted(),i=!1,o)if(o[s].id===e.id&&a.filter((function(t){return t.id===e.id})).length){i=!0;break}return i?[3,2]:[4,pf(n,e.id,y,e.isOfficeFile,e.uploaderWhiteboardHeight,e.uploaderWhiteboardWidth)];case 1:(l=u.sent())&&c&&(t.push(l.image),r.push(l.elm)),u.label=2;case 2:return[2]}}))},d.label=1;case 1:d.trys.push([1,6,7,8]),o=Qf(e),a=o.next(),d.label=2;case 2:return a.done?[3,5]:(i=a.value,[5,n(i)]);case 3:d.sent(),d.label=4;case 4:return a=o.next(),[3,2];case 5:return[3,8];case 6:return s=d.sent(),l={error:s},[3,8];case 7:try{a&&!a.done&&(u=o.return)&&u.call(o)}finally{if(l)throw l.error}return[7];case 8:return t.length?(c.addFiles(t),r.forEach((function(e){var t=c.getSceneElementsIncludingDeleted().slice(0);t.filter((function(t){return t.id===e.id})).length||t.push(e),c.updateScene({elements:t})})),[2]):[2]}}))}))}),[c,y]),M=function(e,t){var r=(void 0===t?{}:t).init,n=void 0!==r&&r;e.length&&(null===c||void 0===c||c.updateScene({elements:e,commitToHistory:n}),b((0,rf.getSceneVersion)(e)),null===c||void 0===c||c.history.clear())},D=function(e){if(c&&r&&e.length){if(f)return;(0,rf.getSceneVersion)(e)>y&&(b((0,rf.getSceneVersion)(e)),function(e){var t,r,n=e.reduce((function(e,t,r,n){var o;return(!yf.has(t.id)||t.version>yf.get(t.id))&&e.push(vf(vf({},t),{parent:0===r?"^":null===(o=n[r-1])||void 0===o?void 0:o.id})),e}),[]);bf(n,"");try{for(var o=xf(n),a=o.next();!a.done;a=o.next()){var i=a.value;yf.set(i.id,i.version)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}(e))}},U=tf()((function(e){f||e.pointersMap.size<2&&r&&function(e){var t,r,n,o,a=qt.getState().session,i={type:Xo.POINTER_UPDATE,from:{sid:null!==(r=null===(t=a.currentUser)||void 0===t?void 0:t.sid)&&void 0!==r?r:"",userId:null!==(o=null===(n=a.currentUser)||void 0===n?void 0:n.userId)&&void 0!==o?o:""},msg:JSON.stringify(e)},s={type:$o.WHITEBOARD,room_sid:a.currentRoom.sid,room_id:a.currentRoom.room_id,message_id:"",body:i};rc(JSON.stringify(s))}({pointer:e.pointer,button:e.button||"up",selectedElementIds:null===c||void 0===c?void 0:c.getAppState().selectedElementIds,userId:r.userId,name:r.name})}),33),L=function(){return(0,o.jsx)(o.Fragment,{children:E&&c?(0,o.jsx)(Wf,{excalidrawAPI:c,currentPage:P}):null})},B=function(){return(0,o.jsx)(Ef,{excalidrawAPI:c,isPresenter:null!==E&&void 0!==E&&E})};return(0,o.jsxs)("div",Vf({className:"middle-fullscreen-wrapper h-full flex ".concat((null===t||void 0===t?void 0:t.size)?"verticalsWebcamsActivated":"")},{children:[(0,o.jsx)(Dd,{videoSubscribers:t}),(0,o.jsx)("div",Vf({className:"excalidraw-wrapper flex-1 w-full max-w-[1200px] m-auto h-[calc(100%-50px)] sm:px-5 mt-9 z-[0]"},{children:(0,o.jsx)(rf.Excalidraw,{ref:u,onChange:D,onPointerUpdate:U,viewModeEnabled:f,isCollaborating:!0,theme:h,name:"plugNmeet whiteboard",UIOptions:{canvasActions:{loadScene:!1,export:!1,saveAsImage:!(null===r||void 0===r?void 0:r.isRecorder)}},autoFocus:!0,detectScroll:!0,langCode:s.languages[0],renderTopRightUI:L,renderFooter:B})}))]}))}));var rp=r(58525),np=function(){return np=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},np.apply(this,arguments)},op=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const ap=function(e){var t=e.options,r=e.onReady,n=a.useRef(null),i=op((0,a.useState)(),2),s=i[0],l=i[1];return(0,a.useEffect)((function(){var e=n.current;if(e&&!s){var o=(0,rp.Z)(e,t,(function(){r&&r(o)}));l(o)}}),[n]),(0,a.useEffect)((function(){return function(){s&&(s.dispose(),l(void 0))}}),[s]),(0,o.jsx)("div",np({className:"react-js-player-wrap"},{children:(0,o.jsx)("div",np({"data-vjs-player":!0},{children:(0,o.jsx)("video",{ref:n,className:"video-js"})}))}))};var ip=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const sp=function(e){var t=e.src,r=e.action,n=e.seekTo,i=e.isPresenter,s=ip((0,a.useState)(),2),l=s[0],c=s[1],u=qt.getState().session,d=ip((0,a.useState)({controls:i,responsive:!0,fluid:!0,sources:[{src:t}]}),1)[0];(0,a.useEffect)((function(){!i&&l&&("play"===r?l.play():"pause"===r&&l.pause())}),[r,i,l]),(0,a.useEffect)((function(){!i&&l&&n>1&&l.currentTime(n)}),[n,l,i]),(0,a.useEffect)((function(){var e=function(e){var t,r,n,o,a={type:$o.SYSTEM,room_sid:u.currentRoom.sid,message_id:"",body:{type:Jo.EXTERNAL_MEDIA_PLAYER_EVENTS,from:{sid:null!==(r=null===(t=u.currentUser)||void 0===t?void 0:t.sid)&&void 0!==r?r:"",userId:null!==(o=null===(n=u.currentUser)||void 0===n?void 0:n.userId)&&void 0!==o?o:""},msg:e}};rc(JSON.stringify(a))};l&&(l.on("pause",(function(){e(JSON.stringify({action:"pause"}))})),l.on("play",(function(){var t={action:"play",seekTo:l.currentTime()};e(JSON.stringify(t))})),l.on("seeked",(function(){var t={action:"seeked",seekTo:l.currentTime()};e(JSON.stringify(t))})))}),[l]);return(0,o.jsx)(ap,{options:d,onReady:function(e){c(e)}})};var lp=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},cp=(0,Yt.P1)((function(e){return e.bottomIconsActivity.screenHeight}),(function(e){return e})),up=(0,Yt.P1)((function(e){return e.bottomIconsActivity.screenWidth}),(function(e){return e}));const dp=function(e){var t=e.src,r=e.action,n=e.seekTo,i=e.isPresenter,s=lp((0,a.useState)(!0),2),l=s[0],c=s[1],u=lp((0,a.useState)(!1),2),d=u[0],f=u[1],p=lp((0,a.useState)(!1),2),m=p[0],h=p[1],v=(0,a.useRef)(),x=qt.getState().session,y=Jt(cp),b=Jt(up);(0,a.useEffect)((function(){i||("play"===r?h(!0):"pause"===r&&h(!1))}),[r,i]),(0,a.useEffect)((function(){var e;d&&!i&&n>1&&v&&(null===(e=v.current)||void 0===e||e.seekTo(n))}),[n,v,d,i]),(0,a.useEffect)((function(){var e;if(i&&d&&v){var t=function(e){var t,r,n,o,a={type:$o.SYSTEM,room_sid:x.currentRoom.sid,message_id:"",body:{type:Jo.EXTERNAL_MEDIA_PLAYER_EVENTS,from:{sid:null!==(r=null===(t=x.currentUser)||void 0===t?void 0:t.sid)&&void 0!==r?r:"",userId:null!==(o=null===(n=x.currentUser)||void 0===n?void 0:n.userId)&&void 0!==o?o:""},msg:e}};rc(JSON.stringify(a))};if(l){var r={action:"pause"};t(JSON.stringify(r))}else{r={action:"play",seekTo:null===(e=v.current)||void 0===e?void 0:e.getCurrentTime()};t(JSON.stringify(r))}}}),[d,l,v,i]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Aa.Z,{ref:function(e){v.current=e},url:t,width:.7*b,height:.7*y,playing:m,controls:i,onReady:function(){f(!0)},onPause:function(){c(!0)},onPlay:function(){c(!1)}})})};var fp=function(){return fp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fp.apply(this,arguments)},pp=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},mp=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e})),hp=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.url}),(function(e){return e})),vp=(0,Yt.P1)((function(e){return e.externalMediaPlayer.action}),(function(e){return e})),xp=(0,Yt.P1)((function(e){return e.externalMediaPlayer.seekTo}),(function(e){return e})),yp=(0,Yt.P1)((function(e){var t,r;return null===(r=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.is_presenter}),(function(e){return e}));const bp=function(e){var t,r=e.videoSubscribers,n=Jt(hp),i=Jt(mp),s=Jt(vp),l=Jt(xp),c=pp((0,a.useState)(!1),2),u=c[0],d=c[1],f=Jt(yp),p=$t(),m=null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.isRecorder,h=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,v=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,x=/\.(m3u8)($|\?)/i,y=/\.(mpd)($|\?)/i;(0,a.useEffect)((function(){m||(p(le(!1)),p(ce(!1)))}),[]),(0,a.useEffect)((function(){n&&(p(bt()),d(h.test(n)||v.test(n)||x.test(n)||y.test(n)))}),[p,n]);return(0,o.jsx)(o.Fragment,{children:i?(0,o.jsxs)("div",fp({className:"middle-fullscreen-wrapper h-full flex ".concat((null===r||void 0===r?void 0:r.size)?"verticalsWebcamsActivated":"")},{children:[(0,o.jsx)(Dd,{videoSubscribers:r}),n?(0,o.jsx)("div",fp({className:"externalMediaPlayerWrapper m-auto w-full flex items-center justify-center max-w-[1000px] flex-1 p-4"},{children:(0,o.jsx)("div",fp({className:"media-player-inner"},{children:u?(0,o.jsx)(sp,{src:null!==n&&void 0!==n?n:"",action:s,isPresenter:!!f,seekTo:l}):(0,o.jsx)(dp,{src:null!==n&&void 0!==n?n:"",action:s,isPresenter:!!f,seekTo:l})}))})):null]})):null})};var gp=function(){return gp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gp.apply(this,arguments)},wp=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},jp=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.display_external_link_features.is_active}),(function(e){return e})),Sp=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.display_external_link_features.link}),(function(e){return e}));const kp=function(e){var t=e.videoSubscribers,r=Jt(Sp),n=Jt(jp),i=$t(),s=wp((0,a.useState)(),2),l=s[0],c=s[1];(0,a.useEffect)((function(){i(le(!1)),i(ce(!1))}),[i]);var u=function(){c(!0)};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsxs)("div",gp({className:"middle-fullscreen-wrapper h-full flex ".concat((null===t||void 0===t?void 0:t.size)?"verticalsWebcamsActivated":"")},{children:[(0,o.jsx)(Dd,{videoSubscribers:t}),r&&""!==r?(0,o.jsxs)("div",gp({className:"external-display-link-wrapper m-auto h-[calc(100%-50px)] w-full max-w-[1100px] flex-1 sm:px-5 mt-9"},{children:[l?null:(0,o.jsx)("div",gp({className:"loading absolute left-[50%] top-[40%] flex justify-center"},{children:(0,o.jsxs)("div",gp({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))})),(0,o.jsx)("iframe",{height:"100%",width:"100%",src:r,onLoad:u})]})):null]})):null})};var _p=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Np=(0,Yt.P1)((function(e){return e.session.screenSharing}),(function(e){return e.isActive})),Cp=(0,Yt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),Ep=(0,Yt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e})),Tp=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),Pp=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e})),Op=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e})),Ap=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.display_external_link_features.is_active}),(function(e){return e}));const Rp=function(e){var t=e.audioSubscribers,r=e.videoSubscribers,n=e.screenShareTracks,i=Jt(Np),s=Jt(Cp),l=Jt(Ep),c=Jt(Tp),u=Jt(Pp),d=Jt(Op),f=Jt(Ap),p=_p((0,a.useState)(24),2),m=p[0],h=p[1];(0,a.useEffect)((function(){var e=qt.getState().session.userDeviceType;"mobile"!==e&&"tablet"!==e||h(6)}),[]);return(0,o.jsxs)(o.Fragment,{children:[l&&i&&n?(0,o.jsx)(Ld,{videoSubscribers:r,screenShareTracks:n}):null,!i&&c?(0,o.jsx)($d,{videoSubscribers:r}):null,!i&&u?(0,o.jsx)(tp,{videoSubscribers:r}):null,!i&&d?(0,o.jsx)(bp,{videoSubscribers:r}):null,!i&&f?(0,o.jsx)(kp,{videoSubscribers:r}):null,!s||(l||c||u||d||f)&&(i||c||u||d||f)||!r?null:(0,o.jsx)(Rd,{videoSubscribers:r,perPage:m}),t?(0,o.jsx)(Gd,{audioSubscribers:t}):null]})};var Ip=function(){return Ip=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ip.apply(this,arguments)},Fp=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Mp=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),Dp=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),Up=(0,Yt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e})),Lp=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),Bp=(0,Yt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e})),Wp=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.external_media_player_features.is_active}),(function(e){return e})),Vp=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.display_external_link_features.is_active}),(function(e){return e}));const Gp=function(e){var t,r=e.currentRoom,n=e.audioSubscribers,i=e.videoSubscribers,s=e.screenShareTracks,l=e.isRecorder,c=Jt(Mp),u=Jt(Up),d=Jt(Lp),f=Jt(Bp),p=Jt(Wp),m=Jt(Vp),h=$t(),v=Jt(Dp),x=Fp((0,a.useState)(!0),2),y=x[0],b=x[1],g=Fp((0,a.useState)(),2),w=g[0],j=g[1],S=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,a.useEffect)((function(){var e;(null===(e=qt.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.chat_features.allow_chat)||(b(!1),h(le(!1)))}),[h]),(0,a.useEffect)((function(){var e=[];v?e.push("showChatPanel"):e.push("hideChatPanel"),c?e.push("showParticipantsPanel"):e.push("hideParticipantsPanel"),(null===s||void 0===s?void 0:s.size)&&u?e.push("showScreenShare fullWidthMainArea"):e.push("hideScreenShare"),d?e.push("showSharedNotepad fullWidthMainArea"):e.push("hideSharedNotepad"),f?e.push("showWhiteboard fullWidthMainArea"):e.push("hideWhiteboard"),p?e.push("showExternalMediaPlayer fullWidthMainArea"):e.push("hideExternalMediaPlayer"),m?e.push("showDisplayExternalLink fullWidthMainArea"):e.push("hideDisplayExternalLink"),j(e.join(" "))}),[u,v,c,d,f,null===s||void 0===s?void 0:s.size,p,m]),(0,o.jsxs)("div",Ip({id:"main-area",className:"".concat(l?"h-[calc(100vh)] isRecorder":"lg:h-[calc(100vh-110px)]","  plugNmeet-app-main-area overflow-hidden relative flex ").concat(w)},{children:[(0,o.jsx)("div",{className:"main-app-bg absolute w-full h-full left-0 top-0 object-cover pointer-events-none ",style:{backgroundImage:'url("'.concat(S,'/imgs/app-banner.jpg")')}}),(0,o.jsxs)("div",Ip({className:"inner flex justify-between w-full"},{children:[(0,o.jsx)(rr.u,Ip({className:"transition-left-panel",show:c,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 -translate-x-full"},{children:(0,o.jsx)(Su,{currentRoom:r})})),(0,o.jsxs)("div",Ip({className:"middle-area relative flex-auto"},{children:[(0,o.jsx)(cd,{}),(0,o.jsx)(Rp,{currentRoom:r,audioSubscribers:n,videoSubscribers:i,screenShareTracks:s})]})),y?(0,o.jsx)(rr.u,Ip({className:"transition-right-panel",show:v,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 translate-x-full"},{children:(0,o.jsx)(ad,{currentRoom:r,isRecorder:l})})):null]}))]}))};var Hp=function(){return Hp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hp.apply(this,arguments)},zp=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Qp=(0,Yt.P1)((function(e){return e.session.isStartup}),(function(e){return e}));const qp=function(e){var t=e.onCloseModal,r=zp((0,a.useState)(!0),2),n=r[0],i=r[1],s=Jt(Qp),l=$t(),c=(0,Xt.$)().t,u=function(e){void 0===e&&(e=!1),i(!1),l(L(!1)),e&&l(Je(0)),t()};return(0,o.jsx)("div",{children:s?(0,o.jsx)("div",Hp({id:"startupJoinModal",className:"".concat(n?"opacity-1 pointer-events-auto":"pointer-events-none opacity-0"," join-the-audio-popup fixed transition ease-in top-0 left-0 w-full h-full z-[999] bg-white/80 px-6 flex items-center justify-center")},{children:(0,o.jsxs)("div",Hp({className:"popup-inner bg-white w-full max-w-md rounded-2xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",Hp({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return u(!0)}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-primaryColor absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)("p",Hp({className:"text-base md:text-lg primaryColor font-normal mb-5 text-center"},{children:c("app.how-to-join")})),(0,o.jsxs)("div",Hp({className:"btn flex justify-center"},{children:[(0,o.jsxs)("button",Hp({type:"button",className:"microphone bg-transparent mr-4 text-center",onClick:function(){return l(me(!0)),void u()}},{children:[(0,o.jsx)("div",Hp({className:"h-[40px] md:h-[60px] w-[40px] md:w-[60px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute primaryColor text-xl"})})),(0,o.jsx)("p",Hp({className:"text-sm md:text-base primaryColor font-normal"},{children:c("app.microphone")}))]})),(0,o.jsxs)("button",Hp({type:"button",id:"listenOnlyJoin",className:"headphone bg-transparent ml-4 text-center"},{children:[(0,o.jsx)("div",Hp({className:"camera h-[40px] md:h-[60px] w-[40px] md:w-[60px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer",onClick:function(){return u()}},{children:(0,o.jsx)("i",{className:"pnm-listen-only primaryColor text-xl"})})),(0,o.jsx)("p",Hp({className:"text-sm md:text-base primaryColor font-normal"},{children:c("app.listen-only")}))]}))]}))]}))})):null})};var $p=function(){function e(e){var t=this;this.isRecorderJoin=!1,this.participantsCount=0,this.participantCounterInterval=0,this.participantConnected=function(e){t.addParticipant(e)},this.addParticipant=function(e){var r,n,o,a,i,s;if(e.metadata){var c=JSON.parse(e.metadata);c.wait_for_approval&&(null===(n=null===(r=qt.getState().session.currentUser)||void 0===r?void 0:r.metadata)||void 0===n?void 0:n.is_admin)&&(0,l.Am)(v.t("waiting-room.user-waiting",{name:e.name}).toString(),{type:"info",toastId:"user-waiting"}),s=c}qt.dispatch(O({sid:e.sid,userId:e.identity,name:null!==(o=e.name)&&void 0!==o?o:"",metadata:s||null,audioTracks:e.audioTracks.size,videoTracks:e.videoTracks.size,screenShareTrack:0,isMuted:!1,connectionQuality:e.connectionQuality,isLocal:!1,joinedAt:null!==(i=null===(a=e.joinedAt)||void 0===a?void 0:a.getTime())&&void 0!==i?i:Date.now(),visibility:"visible"})),t.isRecorderJoin&&t.participantsCount++},this.participantDisconnected=function(e){t.removeParticipant(e),t.isRecorderJoin&&t.participantsCount--},this.removeParticipant=function(e){var r=T.selectById(qt.getState(),e.identity);(null===r||void 0===r?void 0:r.screenShareTrack)&&qt.dispatch(V({isActive:!1,sharedBy:""})),qt.dispatch(A(e.identity)),t.that.updateVideoSubscribers(e,!1),t.that.updateAudioSubscribers(e,!1),t.that.updateScreenShareOnUserDisconnect(e)},this.connectionQualityChanged=function(e,r){qt.dispatch(R({id:r.identity,changes:{connectionQuality:e}})),e===Ie.ZV.Poor&&r.sid===t.that.room.localParticipant.sid&&"RECORDER_BOT"!==r.identity&&"RTMP_BOT"!==r.identity&&(0,l.Am)("Your connection quality isn't good enough",{toastId:"connection-status",type:"error"})},this.setParticipantMetadata=function(e,r){if(r.metadata){var n=JSON.parse(r.metadata);qt.dispatch(R({id:r.identity,changes:{metadata:n}})),t.that.room.localParticipant.sid===r.sid&&(qt.dispatch(H(n)),qt.dispatch(ue(n.raised_hand)))}},this.that=e}return e.prototype.recorderJoined=function(){this.isRecorderJoin=!0,this.startParticipantCounter(),qt.dispatch(ce(!1))},e.prototype.clearParticipantCounterInterval=function(){this.participantCounterInterval&&clearInterval(this.participantCounterInterval)},e.prototype.startParticipantCounter=function(){var e=this;this.participantCounterInterval=setInterval((function(){0===e.participantsCount&&(console.log("NO_USER_ONLINE"),e.that.room.disconnect())}),3e3)},e}();const Jp=$p;var Xp=function(){function e(e){var t=this;this.localTrackPublished=function(e,r){t.addSubscriber(e,r)},this.localTrackUnpublished=function(e,r){t.removeSubscriber(e,r)},this.trackSubscribed=function(e,r,n){t.addSubscriber(r,n)},this.trackUnsubscribed=function(e,r){t.removeSubscriber(e,r)},this.trackMuted=function(e,t){var r;qt.dispatch(R({id:t.identity,changes:{isMuted:!0}})),t.identity===(null===(r=qt.getState().session.currentUser)||void 0===r?void 0:r.userId)&&qt.dispatch(ie(!0))},this.trackUnmuted=function(e,t){var r;qt.dispatch(R({id:t.identity,changes:{isMuted:!1}})),t.identity===(null===(r=qt.getState().session.currentUser)||void 0===r?void 0:r.userId)&&qt.dispatch(ie(!1))},this.trackSubscriptionFailed=function(e,t){console.log("==== trackSubscriptionFailed ===="),console.log(e,t)},this.trackStreamStateChanged=function(e,t,r){console.log(t,r.name)},this.that=e}return e.prototype.addSubscriber=function(e,t){var r,n,o,a,i,s;if(this.roomMetadata||(this.roomMetadata=qt.getState().session.currentRoom.metadata),this.currentUser||(this.currentUser=qt.getState().session.currentUser),t instanceof Ie._A&&e.audioTrack){var l=qt.getState().roomSettings.roomAudioVolume;t.getVolume()!==l&&t.setVolume(l)}if(t.identity!==(null===(r=this.currentUser)||void 0===r?void 0:r.userId)&&e.source===Ie.fQ.Source.Camera&&(((null===(n=this.roomMetadata.room_features)||void 0===n?void 0:n.admin_only_webcams)||!(null===(o=this.roomMetadata.room_features)||void 0===o?void 0:o.allow_view_other_webcams))&&!(null===(i=null===(a=this.currentUser)||void 0===a?void 0:a.metadata)||void 0===i?void 0:i.is_admin)&&t.metadata&&!JSON.parse(t.metadata).is_admin))return;e.source===Ie.fQ.Source.ScreenShare||e.source===Ie.fQ.Source.ScreenShareAudio?(qt.dispatch(R({id:t.identity,changes:{screenShareTrack:1}})),qt.dispatch(V({isActive:!0,sharedBy:t.identity})),this.that.setScreenShareTrack(e,t,!0)):(qt.dispatch(R({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===Ie.fQ.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===Ie.fQ.Source.Microphone})).length}})),e.source===Ie.fQ.Source.Microphone?(this.that.updateAudioSubscribers(t),qt.dispatch(R({id:t.identity,changes:{isMuted:null===(s=e.audioTrack)||void 0===s?void 0:s.isMuted}}))):e.source===Ie.fQ.Source.Camera&&this.that.updateVideoSubscribers(t))},e.prototype.removeSubscriber=function(e,t){var r;e.source===Ie.fQ.Source.ScreenShare||e.source===Ie.fQ.Source.ScreenShareAudio?(qt.dispatch(R({id:t.identity,changes:{screenShareTrack:0}})),qt.dispatch(V({isActive:!1,sharedBy:""})),this.that.setScreenShareTrack(e,t,!1)):(qt.dispatch(R({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===Ie.fQ.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===Ie.fQ.Source.Microphone})).length,isMuted:null===(r=e.audioTrack)||void 0===r?void 0:r.isMuted}})),e.source===Ie.fQ.Source.Microphone?this.that.updateAudioSubscribers(t,!1):e.source===Ie.fQ.Source.Camera&&this.that.updateVideoSubscribers(t,!1))},e}();const Yp=Xp;var Kp=new TextDecoder,Zp=function(e){var t=this;this.dataReceived=function(e,r,n){var o;t.requestedParticipant=r;var a=Kp.decode(e);if(a){var i;try{i=JSON.parse(a)}catch(s){return}n===Ie.WO.RELIABLE&&"SYSTEM"===i.type&&((null===(o=qt.getState().session.currentUser)||void 0===o?void 0:o.isRecorder)||t.handleSystemTypeData(i.body))}},this.handleSystemTypeData=function(e){switch(e.type){case Jo.RAISE_HAND:case Jo.INFO:(0,l.Am)(v.t(e.msg).toString(),{type:"info"}),t.playNotification(e.type);break;case Jo.ALERT:(0,l.Am)(v.t(e.msg).toString(),{type:"error"}),t.playNotification(e.type)}},this.playNotification=function(e){e!==Jo.RAISE_HAND&&e!==Jo.ALERT||qt.dispatch(Ge(!0))},this.that=e};const em=Zp;var tm=function(){var e=this;this.metadata=null,this.welcomeMessage=void 0,this.setRoomMetadata=function(t){(0,Sa.isEmpty)(t)||(e.metadata=JSON.parse(t),e.metadata&&(e.setWindowTitle(e.metadata.room_title),e.showRecordingNotification(),e.showRTMPNotification(),e.publishWelcomeMessage(),qt.dispatch(z(e.metadata))))},this.setWindowTitle=function(e){document.title=e},this.showRecordingNotification=function(){var t,r,n;if(!(null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.isRecorder)){var o=qt.getState().session.isActiveRecording;!o&&(null===(r=e.metadata)||void 0===r?void 0:r.is_recording)?(0,l.Am)(v.t("room-metadata.session-recording").toString(),{type:"info"}):o&&!(null===(n=e.metadata)||void 0===n?void 0:n.is_recording)&&(0,l.Am)(v.t("room-metadata.session-not-recording").toString(),{type:"info"})}},this.showRTMPNotification=function(){var t,r,n;if(!(null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.isRecorder)){var o=qt.getState().session.isActiveRtmpBroadcasting;!o&&(null===(r=e.metadata)||void 0===r?void 0:r.is_active_rtmp)?(0,l.Am)(v.t("room-metadata.rtmp-started").toString(),{type:"info"}):o&&!(null===(n=e.metadata)||void 0===n?void 0:n.is_active_rtmp)&&(0,l.Am)(v.t("room-metadata.rtmp-stopped").toString(),{type:"info"})}},this.publishWelcomeMessage=function(){var t,r,n;if(void 0===e.welcomeMessage)if((0,Sa.isEmpty)(null===(t=e.metadata)||void 0===t?void 0:t.welcome_message))e.welcomeMessage="";else{e.welcomeMessage=null===(r=e.metadata)||void 0===r?void 0:r.welcome_message;var o={type:"CHAT",message_id:"",time:"",isPrivate:!1,from:{userId:"system",name:"System",sid:"system"},msg:null!==(n=e.welcomeMessage)&&void 0!==n?n:""};qt.dispatch(Oe(o))}}};const rm=tm;var nm=function(e){var t=this;this.lastActiveWebcamChanged=Date.now(),this.activeSpeakers=[],this.activeSpeakersChanged=function(e){if(t.activeSpeakers=[],e.length){var r=qt.getState().session.isWebcamPaginating,n=Date.now();e.forEach((function(e){var o,a,i;if(!r&&t.that.videoSubscribersMap.size>2){var s=t.lastActiveWebcamChanged+4e3;n>s&&t.that.videoSubscribersMap.has(e.sid)&&(t.that.updateVideoSubscribers(e),t.lastActiveWebcamChanged=n)}var l={sid:e.sid,userId:e.identity,metadata:e.metadata,name:null!==(o=null===e||void 0===e?void 0:e.name)&&void 0!==o?o:"",isSpeaking:e.isSpeaking,audioLevel:e.audioLevel,lastSpokeAt:null!==(i=null===(a=e.lastSpokeAt)||void 0===a?void 0:a.getTime())&&void 0!==i?i:Date.now()};qt.dispatch(S(l)),t.activeSpeakers.push(l)}))}},this.runInterval=function(){t.interval=setInterval((function(){t.activeSpeakers.length?qt.dispatch(_(t.activeSpeakers)):w.selectAll(qt.getState()).length&&qt.dispatch(k())}),1e3)},this.onLivekitDisconnect=function(){clearInterval(t.interval)},this.that=e,this.runInterval()};const om=nm;var am=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},im=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},sm=function(){function e(e,t,r,n,o,a,i){var s=this;this._audioSubscribersMap=new Map,this._videoSubscribersMap=new Map,this._screenShareTracksMap=new Map,this.connect=function(){return am(s,void 0,void 0,(function(){var e;return im(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,this._room.connect(this.url,this.token)];case 1:return t.sent(),[4,this.initiateParticipants()];case 2:return t.sent(),[4,this.updateSession()];case 3:return t.sent(),Kl(),this.roomConnectionStatusState("connected"),this.currentRoomState(this._room),this.startTokenRenewInterval(),[3,5];case 4:return e=t.sent(),this.roomConnectionStatusState("error"),this.errorState({title:"Error",text:String(e)}),[3,5];case 5:return[2]}}))}))},this.initiateParticipants=function(){return am(s,void 0,void 0,(function(){var e,t,r=this;return im(this,(function(n){return e=null!==(t="RECORDER_BOT"===this._room.localParticipant.identity||"RTMP_BOT"===this._room.localParticipant.identity)&&void 0!==t&&t,qt.dispatch(B({sid:this._room.localParticipant.sid,userId:this._room.localParticipant.identity,name:this._room.localParticipant.name,isRecorder:e})),this.handleParticipant.setParticipantMetadata("",this._room.localParticipant),e?this.handleParticipant.recorderJoined():this.handleParticipant.addParticipant(this._room.localParticipant),this._room.participants.forEach((function(e){r.handleParticipant.addParticipant(e),e.getTracks().forEach((function(t){t.isSubscribed&&(t.source===Ie.fQ.Source.ScreenShare||t.source===Ie.fQ.Source.ScreenShareAudio?(qt.dispatch(R({id:e.identity,changes:{screenShareTrack:1}})),qt.dispatch(V({isActive:!0,sharedBy:e.identity}))):r.updateVideoSubscribers(e))}))})),[2]}))}))},this.updateSession=function(){return am(s,void 0,void 0,(function(){return im(this,(function(e){return qt.dispatch(W({sid:this._room.sid,room_id:this._room.name})),!(0,Sa.isEmpty)(this._room.metadata)&&this._room.metadata&&this.handleRoomMetadata.setRoomMetadata(this._room.metadata),[2]}))}))},this.configureRoom=function(){var e,t,r,n,o=new Ie.du({adaptiveStream:!0,dynacast:null!==(e=window.ENABLE_DYNACAST)&&void 0!==e&&e,videoCaptureDefaults:{resolution:Ie.OM.h720.resolution},publishDefaults:{simulcast:null!==(t=window.ENABLE_SIMULCAST)&&void 0!==t&&t,videoSimulcastLayers:[Ie.OM.h90,Ie.OM.h180,Ie.OM.h360],screenShareSimulcastLayers:[Ie.Ri.h360fps3,Ie.Ri.h720fps15],stopMicTrackOnMute:null!==(r=window.STOP_MIC_TRACK_ON_MUTE)&&void 0!==r&&r,videoCodec:null!==(n=window.VIDEO_CODEC)&&void 0!==n?n:"vp8"}});return o.on(Ie.TQ.Reconnecting,(function(){return s.roomConnectionStatusState("re-connecting")})),o.on(Ie.TQ.Reconnected,(function(){return s.roomConnectionStatusState("connected")})),o.on(Ie.TQ.Disconnected,s.onDisconnected),o.on(Ie.TQ.RoomMetadataChanged,s.handleRoomMetadata.setRoomMetadata),o.on(Ie.TQ.ActiveSpeakersChanged,s.handleActiveSpeakers.activeSpeakersChanged),o.on(Ie.TQ.MediaDevicesError,s.mediaDevicesError),o.on(Ie.TQ.DataReceived,s.handleDataMessages.dataReceived),o.on(Ie.TQ.ParticipantConnected,s.handleParticipant.participantConnected),o.on(Ie.TQ.ParticipantDisconnected,s.handleParticipant.participantDisconnected),o.on(Ie.TQ.ParticipantMetadataChanged,s.handleParticipant.setParticipantMetadata),o.on(Ie.TQ.ConnectionQualityChanged,s.handleParticipant.connectionQualityChanged),o.on(Ie.TQ.LocalTrackPublished,s.handleMediaTracks.localTrackPublished),o.on(Ie.TQ.LocalTrackUnpublished,s.handleMediaTracks.localTrackUnpublished),o.on(Ie.TQ.TrackSubscribed,s.handleMediaTracks.trackSubscribed),o.on(Ie.TQ.TrackUnpublished,s.handleMediaTracks.trackUnsubscribed),o.on(Ie.TQ.TrackSubscriptionFailed,s.handleMediaTracks.trackSubscriptionFailed),o.on(Ie.TQ.TrackMuted,s.handleMediaTracks.trackMuted),o.on(Ie.TQ.TrackUnmuted,s.handleMediaTracks.trackUnmuted),o.on(Ie.TQ.TrackStreamStateChanged,s.handleMediaTracks.trackStreamStateChanged),o},this.onDisconnected=function(e){s.errorState({title:v.t("notifications.room-disconnected-title"),text:s.getDisconnectErrorReasonText(e)}),s.roomConnectionStatusState("disconnected"),Jl&&(null===Ml||void 0===Ml||Ml.close(),Yl=!0),s.handleActiveSpeakers.onLivekitDisconnect(),clearInterval(s.tokenRenewInterval),s.handleParticipant.clearParticipantCounterInterval()},this.getDisconnectErrorReasonText=function(e){var t=v.t("notifications.room-disconnected-unknown",{code:"UNKNOWN_REASON"});switch(e){case Ie.W4.CLIENT_INITIATED:t=v.t("notifications.room-disconnected-client-initiated",{code:"CLIENT_INITIATED"});break;case Ie.W4.DUPLICATE_IDENTITY:t=v.t("notifications.room-disconnected-duplicate-entry",{code:"DUPLICATE_IDENTITY"});break;case Ie.W4.SERVER_SHUTDOWN:t=v.t("notifications.room-disconnected-server-shutdown",{code:"SERVER_SHUTDOWN"});break;case Ie.W4.PARTICIPANT_REMOVED:t=v.t("notifications.room-disconnected-participant-removed",{code:"PARTICIPANT_REMOVED"});break;case Ie.W4.ROOM_DELETED:t=v.t("notifications.room-disconnected-room-ended",{code:"ROOM_ENDED"});break;case Ie.W4.STATE_MISMATCH:t=v.t("notifications.room-disconnected-state-mismatch",{code:"STATE_MISMATCH"})}return t},this.mediaDevicesError=function(e){console.error(e)},this.startTokenRenewInterval=function(){s.tokenRenewInterval=setInterval((function(){var e=qt.getState().session.token,t={type:$o.SYSTEM,message_id:"",room_sid:s._room.sid,room_id:s._room.name,body:{type:Jo.RENEW_TOKEN,from:{sid:s._room.localParticipant.sid,userId:s._room.localParticipant.identity},msg:e}};rc(JSON.stringify(t))}),3e5)},this.setScreenShareTrack=function(e,t,r){void 0===r&&(r=!0),r?s._screenShareTracksMap.set(t.identity,e):s._screenShareTracksMap.delete(t.identity),s.screenShareTracksState(new Map(s._screenShareTracksMap))},this.updateScreenShareOnUserDisconnect=function(e){s._screenShareTracksMap.size&&s._screenShareTracksMap.has(e.identity)&&(s._screenShareTracksMap.delete(e.identity),s.screenShareTracksState(new Map(s._screenShareTracksMap)),s._screenShareTracksMap.size||qt.dispatch(V({isActive:!1,sharedBy:""})))},this.updateAudioSubscribers=function(e,t){void 0===t&&(t=!0),"undefined"!==typeof e.identity&&e.identity!==s._room.localParticipant.identity&&(t?s._audioSubscribersMap.set(e.identity,e):s._audioSubscribersMap.has(e.identity)&&s._audioSubscribersMap.delete(e.identity),s.audioSubscribersState(new Map(s._audioSubscribersMap)),qt.dispatch($(s.audioSubscribersState.length)))},this.updateVideoSubscribers=function(e,t){if(void 0===t&&(t=!0),"undefined"!==typeof e.identity)if(t?s._videoSubscribersMap.set(e.identity,e):s._videoSubscribersMap.has(e.identity)&&s._videoSubscribersMap.delete(e.identity),qt.dispatch(q(s._videoSubscribersMap.size)),s._videoSubscribersMap.size<=1)s.videoSubscribersState(new Map(s._videoSubscribersMap));else{var r=Array.from(s._videoSubscribersMap).filter((function(e){var t;return e[0]!==(null===(t=s._room.localParticipant)||void 0===t?void 0:t.identity)}));if(r.sort((function(e,t){var r,n,o,a,i,s,l,c,u=e[1],d=t[1];if(u.isSpeaking&&d.isSpeaking)return d.audioLevel-u.audioLevel;if(u.isSpeaking!==d.isSpeaking)return u.isSpeaking?-1:1;if(u.lastSpokeAt!==d.lastSpokeAt){var f=null!==(n=null===(r=u.lastSpokeAt)||void 0===r?void 0:r.getTime())&&void 0!==n?n:0;return(null!==(a=null===(o=d.lastSpokeAt)||void 0===o?void 0:o.getTime())&&void 0!==a?a:0)-f}return(null!==(s=null===(i=u.joinedAt)||void 0===i?void 0:i.getTime())&&void 0!==s?s:0)-(null!==(c=null===(l=d.joinedAt)||void 0===l?void 0:l.getTime())&&void 0!==c?c:0)})),s._room.localParticipant.getTracks().length){var n=[s._room.localParticipant.sid,s._room.localParticipant];r.unshift(n)}s.videoSubscribersState(new Map(r))}},this.token=e.token,this.url=e.livekit_host,this.audioSubscribersState=t,this.videoSubscribersState=r,this.screenShareTracksState=i,this.currentRoomState=n,this.errorState=o,this.roomConnectionStatusState=a,this.handleParticipant=new Jp(this),this.handleMediaTracks=new Yp(this),this.handleDataMessages=new em(this),this.handleRoomMetadata=new rm,this.handleActiveSpeakers=new om(this),this.roomConnectionStatusState("connecting"),sessionStorage.clear(),this._room=this.configureRoom(),this.connect()}return Object.defineProperty(e.prototype,"videoSubscribersMap",{get:function(){return this._videoSubscribersMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room",{get:function(){return this._room},enumerable:!1,configurable:!0}),e}();const lm=sm;var cm=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const um=function(){var e=cm((0,a.useState)(),2),t=e[0],r=e[1],n=cm((0,a.useState)(),2),o=n[0],i=n[1],s=cm((0,a.useState)("loading"),2),l=s[0],c=s[1],u=cm((0,a.useState)(),2),d=u[0],f=u[1],p=cm((0,a.useState)(),2),m=p[0],h=p[1],v=cm((0,a.useState)(),2),x=v[0],y=v[1];return{error:t,setError:r,roomConnectionStatus:l,setRoomConnectionStatus:c,currentRoom:o,audioSubscribers:d,videoSubscribers:m,screenShareTracks:x,startLivekitConnection:function(e){new lm(e,f,h,i,r,c,y)}}};var dm=function(){return dm=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dm.apply(this,arguments)},fm=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},pm=(0,Yt.P1)((function(e){return e.roomSettings.playAudioNotification}),(function(e){return e})),mm=(0,Yt.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const hm=a.memo((function(){var e,t=$t(),r=(0,a.useRef)(null),n=Jt(pm),i=Jt(mm),s=fm((0,a.useState)(!1),2),l=s[0],c=s[1],u=null!==(e=window.STATIC_ASSETS_PATH)&&void 0!==e?e:"./assets";return(0,a.useEffect)((function(){var e=r.current;n&&(!l&&i&&(null===e||void 0===e||e.play()),t(Ge(!1)))}),[n,l,i,t]),(0,a.useEffect)((function(){var e=r.current;return e&&(e.addEventListener("playing",(function(){return c(!0)})),e.addEventListener("ended",(function(){return c(!1)}))),function(){e&&(e.pause(),e.removeEventListener("playing",(function(){return c(!0)})),e.removeEventListener("ended",(function(){return c(!1)})))}}),[]),(0,o.jsx)("div",dm({style:{display:"none"}},{children:(0,o.jsx)("audio",{ref:r,src:"".concat(u,"/audio/beep-07a.mp3")})}))}));var vm=r(95172),xm=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},ym=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const bm=function(e){var t=$t(),r=(0,Xt.$)().t;(0,vm.y1)("ctrl+alt+m",(function(){e&&function(e){e&&e.localParticipant.audioTracks.forEach((function(e){return xm(void 0,void 0,void 0,(function(){return ym(this,(function(r){switch(r.label){case 0:return e.track&&e.track.source===Ie.fQ.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return r.sent(),t(ie(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:r.sent(),t(ie(!0)),r.label=4;case 4:return[2]}}))}))}))}(e)}),[e]),(0,vm.y1)("ctrl+alt+a",(function(){var e=qt.getState().bottomIconsActivity;e.isActiveMicrophone||e.showMicrophoneModal||t(me(!0))}));(0,vm.y1)("ctrl+alt+o",(function(){e&&function(e){e.localParticipant.audioTracks.forEach((function(t){return xm(void 0,void 0,void 0,(function(){return ym(this,(function(r){return t.track&&t.kind===Ie.fQ.Kind.Audio&&e.localParticipant.unpublishTrack(t.track),[2]}))}))})),t(ae(!1)),t(ie(!1)),t(We(""))}(e)}),[e]),(0,vm.y1)("ctrl+alt+v",(function(){var e=qt.getState().bottomIconsActivity;e.isActiveWebcam||e.showVideoShareModal||t(he(!0))}));(0,vm.y1)("ctrl+alt+x",(function(){e&&(qt.getState().bottomIconsActivity.isActiveWebcam&&function(e){e.localParticipant.videoTracks.forEach((function(t){return xm(void 0,void 0,void 0,(function(){return ym(this,(function(r){return t.track&&t.track.source===Ie.fQ.Source.Camera&&e.localParticipant.unpublishTrack(t.track),[2]}))}))})),t(se(!1)),t(Ve("")),t(_e({type:"none"}))}(e))}),[e]),(0,vm.y1)("ctrl+alt+u",(function(){var e=qt.getState().bottomIconsActivity.isActiveParticipantsPanel;t(ce(!e))})),(0,vm.y1)("ctrl+alt+c",(function(){var e=qt.getState().bottomIconsActivity.isActiveChatPanel;t(le(!e))})),(0,vm.y1)("ctrl+alt+l",(function(){var e,r;if(null===(r=null===(e=qt.getState().session.currentUser)||void 0===e?void 0:e.metadata)||void 0===r?void 0:r.is_admin){var n=qt.getState().bottomIconsActivity.showLockSettingsModal;t(ve(!n))}})),(0,vm.y1)("ctrl+alt+s",(function(){var e=qt.getState().roomSettings.isShowRoomSettingsModal;t(He(!e))})),(0,vm.y1)("ctrl+alt+w",(function(){var e=qt.getState().bottomIconsActivity.isActiveWhiteboard;t(pe(!e))}));(0,vm.y1)("ctrl+alt+r",(function(){e&&function(e,n){xm(void 0,void 0,void 0,(function(){var o,a;return ym(this,(function(i){switch(i.label){case 0:return e?[3,2]:(o={sid:n.sid,room_id:n.name,msg_type:Jo.RAISE_HAND,msg:r("footer.notice.has-raised-hand",{user:n.localParticipant.name})},[4,qo("dataMessage",o)]);case 1:return(a=i.sent()).status?(t(ue(!0)),(0,l.Am)(r("footer.notice.you-raised-hand"),{type:"info"})):(0,l.Am)(a.msg,{type:"error"}),[3,4];case 2:return o={sid:n.sid,room_id:n.name,msg_type:Jo.LOWER_HAND,msg:Jo.LOWER_HAND},[4,qo("dataMessage",o)];case 3:(a=i.sent()).status?t(ue(!1)):(0,l.Am)(a.msg,{type:"error"}),i.label=4;case 4:return[2]}}))}))}(qt.getState().bottomIconsActivity.isActiveRaisehand,e)}),[e])};const gm=function(){(0,a.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("custom_design");if(e&&""!==e&&"{}"!==e&&(window.DESIGN_CUSTOMIZATION=e),"undefined"!==typeof window.DESIGN_CUSTOMIZATION){var t={};try{t=JSON.parse(window.DESIGN_CUSTOMIZATION)}catch(i){return void console.error("can't parse custom design params")}var r="";t.primary_color&&(r+=".primaryColor{ color: "+t.primary_color+"}",r+=".text-primaryColor { color: "+t.primary_color+"}",r+=".placeholder\\:text-primaryColor\\/70::placeholder { color: "+t.primary_color+"}",r+=".bg-primaryColor { background: "+t.primary_color+" !important;}",r+=".hover\\:bg-primaryColor:hover { background: "+t.primary_color+" !important;}",r+=".border-primaryColor { border-color: "+t.primary_color+" !important;}",r+=".excalidraw {\n    --color-primary: "+t.primary_color+";\n    --color-primary-darker: "+t.primary_color+";\n    --color-primary-darkest: "+t.primary_color+";\n}"),t.secondary_color&&(r+=".secondaryColor { color: "+t.secondary_color+" !important;}",r+=".text-secondaryColor { color: "+t.secondary_color+" !important;}",r+=".bg-secondaryColor { background: "+t.secondary_color+" !important;}",r+=".hover\\:text-secondaryColor:hover { color: "+t.secondary_color+" !important;}",r+=".group:hover .group-hover\\:text-secondaryColor { color: "+t.secondary_color+" !important;}",r+=".bg-secondaryColor, .hover:bg-secondaryColor:hover { background: "+t.secondary_color+" !important;}",r+=".hover:bg-secondaryColor:hover { background: "+t.secondary_color+" !important;}",r+=".border-secondaryColor { border-color: "+t.secondary_color+" !important;}",r+=".excalidraw {\n    --color-primary-light: "+t.secondary_color+";\n}"),t.background_image?(r+='.main-app-bg { \n        background: url("'.concat(t.background_image,'") !important;\n        background-position: center !important;\n        background-repeat: no-repeat !important;\n        background-size: cover !important;\n        }'),r+='.error-app-bg { \n        background: url("'.concat(t.background_image,'") !important;\n        background-position: center !important;\n        background-repeat: no-repeat !important;\n        background-size: cover !important;\n        }'),r+='.waiting-room { \n        background: url("'.concat(t.background_image,'") !important;\n        background-position: center !important;\n        background-repeat: no-repeat !important;\n        background-size: cover !important;\n        }')):t.background_color&&(r+=".main-app-bg { \n        background: ".concat(t.background_color," !important;\n        }"),r+=".error-app-bg { \n        background: ".concat(t.background_color," !important;\n        }"),r+=".waiting-room { \n        background: ".concat(t.background_color," !important;\n        }")),t.header_bg_color&&(r+="header#main-header { background: "+t.header_bg_color+"; }"),t.footer_bg_color&&(r+="footer#main-footer { background: "+t.footer_bg_color+"; }"),t.left_side_bg_color&&(r+=".participants-wrapper { background: "+t.left_side_bg_color+"; }",r+=".vertical-webcams { background: "+t.left_side_bg_color+" !important; }"),t.right_side_bg_color&&(r+=".messageModule-wrapper { background: "+t.right_side_bg_color+"; }"),"undefined"===typeof window.CUSTOM_LOGO&&t.custom_logo&&(window.CUSTOM_LOGO=t.custom_logo);var n,o,a=document.head;return t.custom_css_url&&((n=document.createElement("link")).type="text/css",n.rel="stylesheet",n.href=t.custom_css_url,a.appendChild(n)),""!==r&&((o=document.createElement("style")).id="plugNmeetCustomization",o.textContent=r,a.appendChild(o)),function(){""!==r&&a.removeChild(o),t.custom_css_url&&a.removeChild(n)}}}),[])};var wm=r(12437),jm=r.n(wm),Sm=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const km=function(e,t){var r=$t(),n=Sm((0,a.useState)(""),2),o=n[0],i=n[1],s=Sm((0,a.useState)("landscape-device"),2),l=s[0],c=s[1],u=Sm((0,a.useState)(""),2),d=u[0],f=u[1];(0,a.useEffect)((function(){window.onresize=function(){r(je(window.innerWidth)),r(Se(window.innerHeight)),p();var e=qt.getState().bottomIconsActivity.isActiveChatPanel,t=qt.getState().bottomIconsActivity.isActiveParticipantsPanel;window.innerWidth<1024&&e&&t&&r(ce(!1))},r(je(window.innerWidth)),r(Se(window.innerHeight)),window.innerWidth<1024&&(r(ce(!1)),r(le(!1)));var e="is-pc",t=new(jm())(window.navigator.userAgent);t.mobile()?(e="is-mobile ",r(X("mobile"))):t.tablet()&&(e="is-tablet ",r(X("tablet")));var n=t.os();"AndroidOS"===n?e+="is-android":"iOS"!==n&&"iPadOS"!==n||(e+="is-ios"),i(e);var o=window.matchMedia("(orientation: portrait)");o.matches&&c("portrait-device"),o.addEventListener("change",(function(e){e.matches?c("portrait-device"):c("landscape-device")}))}),[]),(0,a.useEffect)((function(){p()}),[null===e||void 0===e?void 0:e.state]);var p=function(){var e=t.current;e&&f("".concat(e.clientHeight,"px"))};return{deviceClass:o,orientationClass:l,screenHeight:d}};var _m=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const Nm=function(){var e=_m((0,a.useState)(!1),2),t=e[0],r=e[1];(0,a.useEffect)((function(){var e=function(){r(!0)},t=function(){r(!1)};return window.addEventListener("blur",e,!1),window.addEventListener("focus",t,!1),function(){window.removeEventListener("blur",e),window.removeEventListener("focus",t)}}),[]),(0,a.useEffect)((function(){var e,t;"undefined"!==typeof document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==typeof document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange");var n=function(){document[e]?r(!0):r(!1)};return"undefined"===typeof document.addEventListener&&void 0===e||document.addEventListener(t,n,!1),function(){"undefined"===typeof document.addEventListener&&void 0===e||document.removeEventListener(t,n)}}),[]),(0,a.useEffect)((function(){var e,r,n,o,a=qt.getState().session,i={type:$o.SYSTEM,room_sid:a.currentRoom.sid,message_id:"",body:{type:Jo.USER_VISIBILITY_CHANGE,from:{sid:null!==(r=null===(e=a.currentUser)||void 0===e?void 0:e.sid)&&void 0!==r?r:"",userId:null!==(o=null===(n=a.currentUser)||void 0===n?void 0:n.userId)&&void 0!==o?o:""},msg:t?"hidden":"visible"}};rc(JSON.stringify(i))}),[t])};var Cm=function(){return Cm=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cm.apply(this,arguments)},Em=(0,Yt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.waiting_room_features.waiting_room_msg}),(function(e){return e}));const Tm=function(){var e,t,r=null!==(e=window.STATIC_ASSETS_PATH)&&void 0!==e?e:"./assets",n=null!==(t=window.CUSTOM_LOGO)&&void 0!==t?t:"".concat(r,"/imgs/main-logo.png"),a=(0,Xt.$)().t,i=Jt(Em);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",Cm({className:"waiting-room flex items-center justify-center w-full h-screen",style:{backgroundImage:'url("'.concat(r,'/imgs/app-banner.jpg")')}},{children:(0,o.jsxs)("div",Cm({className:"waiting-room-inner"},{children:[(0,o.jsx)("div",Cm({className:"logo w-40 m-auto relative z-20"},{children:(0,o.jsx)("div",{className:"".concat((window.CUSTOM_LOGO,"h-[90px]")," header-logo h-full bg-contain bg-no-repeat"),style:{backgroundImage:'url("'.concat(n,'")')}})})),(0,o.jsx)("div",{className:"divider my-5 h-[2px] w-full max-w-[50px] bg-primaryColor m-auto"}),(0,o.jsx)("div",Cm({className:"loading-wrap relative h-24"},{children:(0,o.jsx)("div",Cm({className:"loading absolute text-center top-3 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Cm({className:"lds-ripple"},{children:[(0,o.jsx)("div",{className:"border-secondaryColor"}),(0,o.jsx)("div",{className:"border-secondaryColor"})]}))}))})),(0,o.jsx)("p",Cm({className:"text-3xl"},{children:(0,Oa.isEmpty)(i)?a("notifications.waiting-for-approval"):i}))]}))}))})};var Pm=function(){return Pm=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pm.apply(this,arguments)},Om=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))},Am=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Rm=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},Im=(0,Yt.P1)((function(e){var t,r;return null===(r=null===(t=e.session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.wait_for_approval}),(function(e){return e}));const Fm=function(){var e=$t(),t=(0,a.useRef)(null),r=(0,Xt.$)().t,n=Rm((0,a.useState)(!0),2),i=n[0],s=n[1],l=Rm((0,a.useState)(!1),2),c=l[0],u=l[1],d=Rm((0,a.useState)("participant"),2),f=d[0],p=d[1],m=Rm((0,a.useState)(),2),h=m[0],v=m[1],x=Jt(Im);hn();var y=um(),b=y.error,g=y.setError,w=y.roomConnectionStatus,j=y.setRoomConnectionStatus,S=y.currentRoom,k=y.audioSubscribers,_=y.videoSubscribers,N=y.screenShareTracks,C=y.startLivekitConnection;bm(S),gm(),Nm();var E=km(S,t),T=E.deviceClass,P=E.orientationClass,O=E.screenHeight;(0,a.useEffect)((function(){var t,n=new URLSearchParams(window.location.search),o=Object.fromEntries(n.entries());if("undefined"===typeof o.access_token)s(!1),g({title:r("app.token-missing-title"),text:r("app.token-missing-des")});else{S||(j("checking"),t=setTimeout((function(){Om(void 0,void 0,void 0,(function(){var t;return Am(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,qo("verifyToken",{is_production:!0})];case 1:return t=n.sent(),[3,3];case 2:return n.sent(),j("ready"),s(!1),g({title:r("app.verification-failed-title"),text:r("app.token-not-valid")}),[2];case 3:return j("ready"),s(!1),t.status?(e(U(o.access_token)),v({livekit_host:t.livekit_host,token:t.token})):g({title:r("app.verification-failed-title"),text:r(t.msg)}),[2]}}))}))}),300))}return function(){t&&clearTimeout(t)}}),[r,e,S,g,j]),(0,a.useEffect)((function(){s("connecting"===w||"re-connecting"===w||"checking"===w)}),[w]),(0,a.useEffect)((function(){var t,r;S&&("RECORDER_BOT"!==S.localParticipant.identity&&"RTMP_BOT"!==S.localParticipant.identity||(u(!0),e(le(!1))),(null===(r=null===(t=qt.getState().session.currentUser)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.is_admin)&&p("admin"))}),[S,e]);var A=function(){h&&C(h)};return(0,o.jsx)("div",Pm({className:"".concat(P," ").concat(T," ").concat(f),style:{height:O}},{children:i?(0,o.jsx)(tr,{text:r("app."+w)}):b&&!i?(0,o.jsx)(Zt,{title:b.title,text:b.text}):"connected"===(null===S||void 0===S?void 0:S.state)?x?(0,o.jsx)(Tm,{}):S?(0,o.jsxs)("div",Pm({className:"plugNmeet-app overflow-hidden",ref:t},{children:[c?null:(0,o.jsx)(wl,{currentRoom:S}),(0,o.jsx)(Gp,{currentRoom:S,audioSubscribers:k,videoSubscribers:_,screenShareTracks:N,isRecorder:c}),(0,o.jsx)(Ws,{currentRoom:S,isRecorder:c}),(0,o.jsx)(hm,{})]})):null:"ready"===w?(0,o.jsx)(qp,{onCloseModal:A}):null}))};var Mm=function(){return Mm=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mm.apply(this,arguments)},Dm=document.getElementById("plugNmeet-app");(0,i.s)(Dm).render((0,o.jsx)(a.StrictMode,{children:(0,o.jsx)(s.zt,Mm({store:qt},{children:(0,o.jsxs)(u.W,Mm({backend:c.PD},{children:[(0,o.jsx)(a.Suspense,Mm({fallback:(0,o.jsx)(tr,{text:""})},{children:(0,o.jsx)(Fm,{})})),(0,o.jsx)(l.Ix,{})]}))}))}))},75410:()=>{},48628:()=>{},55778:()=>{},25893:()=>{},73908:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}},e=>{e.O(0,[736],(()=>{return t=31877,e(e.s=t);var t}));e.O()}]);